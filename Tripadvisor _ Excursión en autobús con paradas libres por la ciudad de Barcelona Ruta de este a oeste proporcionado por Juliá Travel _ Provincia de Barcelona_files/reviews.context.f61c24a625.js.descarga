($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/reviews.context",d:["vendor-babel","vendor-react-libs","vendor-urql","lithium-platform"],e:["./packages/reviews/context/context.jsx"],m:{"./packages/reviews/context/Fragments/UGCQuestionSummary.fragment.gql":function(e,i,n){"use strict";var a=JSON.parse('{"kind":"Document","definitions":[{"kind":"FragmentDefinition","name":{"kind":"Name","value":"UGCQuestionSummary"},"typeCondition":{"kind":"NamedType","name":{"kind":"Name","value":"LocationInformation"}},"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"topicsUrl"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"topicCount"},"arguments":[],"directives":[]}]}}],"loc":{"start":0,"end":88}}');a.__key=0xddcde30c3abe,a.loc.source={body:"ddcde30c3abe"},i.a=a},"./packages/reviews/context/context.jsx":function(e,i,n){"use strict";n.r(i);var a=n("@babel/runtime/helpers/esm/slicedToArray"),t=n.n(a),d=n("react"),r=n("urql"),l=n("@ta/lithium.context"),s=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"HasDraftForLocationQuery"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"locationId"}},"type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}},"directives":[]},{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"userId"}},"type":{"kind":"NamedType","name":{"kind":"Name","value":"String"}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","alias":{"kind":"Name","value":"HasDraftForLocation"},"name":{"kind":"Name","value":"Review_hasDraftForLocation"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"locationIds"},"value":{"kind":"ListValue","values":[{"kind":"Variable","name":{"kind":"Name","value":"locationId"}}]}},{"kind":"Argument","name":{"kind":"Name","value":"userId"},"value":{"kind":"Variable","name":{"kind":"Name","value":"userId"}}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"hasDraft"},"arguments":[],"directives":[]}]}}]}}],"loc":{"start":0,"end":192}}');s.__key=0x9a7672a69457,s.loc.source={body:"9a7672a69457"};var o=s,u=function e(i){var n=i.locationId,a=Object(d.useContext)(l.Visitor).userId,s=Object(r.useQuery)({query:o,variables:{locationId:n,userId:a}}),u=t()(s,1)[0].data;return u&&u.HasDraftForLocation&&u.HasDraftForLocation.length>0&&u.HasDraftForLocation[0]&&u.HasDraftForLocation[0].hasDraft||!1},m=JSON.parse('{"kind":"Document","definitions":[{"kind":"FragmentDefinition","name":{"kind":"Name","value":"UGCLocationInformation"},"typeCondition":{"kind":"NamedType","name":{"kind":"Name","value":"LocationInformation"}},"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"locationId"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"parentGeoId"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"currentUserOwnerStatus"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"isValid"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"name"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"additionalNames"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"normal"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"long"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"placeType"},"arguments":[],"directives":[]}]}}],"loc":{"start":0,"end":200}}');m.__key=9097641161587,m.loc.source={body:"084635ab7373"};var c=m,k=JSON.parse('{"kind":"Document","definitions":[{"kind":"FragmentDefinition","name":{"kind":"Name","value":"UGCReviewSummary"},"typeCondition":{"kind":"NamedType","name":{"kind":"Name","value":"LocationInformation"}},"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"writeUserReviewUrl"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"reviewSummary"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"count"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"rating"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"reviewAggregations"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"alertStatusCount"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"languageCounts"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"ratingCounts"},"arguments":[],"directives":[]}]}}]}}],"loc":{"start":0,"end":209}}');k.__key=0xa7cee6eda676,k.loc.source={body:"a7cee6eda676"};var v=k,f=JSON.parse('{"kind":"Document","definitions":[{"kind":"FragmentDefinition","name":{"kind":"Name","value":"UGCPhotoSummary"},"typeCondition":{"kind":"NamedType","name":{"kind":"Name","value":"LocationInformation"}},"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"albums"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"albumIds"},"value":{"kind":"ListValue","values":[{"kind":"Variable","name":{"kind":"Name","value":"albumId"}}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"totalCount"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"postPhotosUrl"},"arguments":[],"directives":[]}]}}],"loc":{"start":0,"end":128}}');f.__key=0x62fafaeb323e,f.loc.source={body:"62fafaeb323e"};var g=f,N=n("./packages/reviews/context/Fragments/UGCQuestionSummary.fragment.gql"),S=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"CommunityContentQuery"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"locationId"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]},{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"albumId"}},"type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}},"defaultValue":{"kind":"IntValue","value":"101"},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"locations"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"locationIds"},"value":{"kind":"ListValue","values":[{"kind":"Variable","name":{"kind":"Name","value":"locationId"}}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"FragmentSpread","name":{"kind":"Name","value":"UGCLocationInformation"},"directives":[]},{"kind":"FragmentSpread","name":{"kind":"Name","value":"UGCReviewSummary"},"directives":[]},{"kind":"FragmentSpread","name":{"kind":"Name","value":"UGCPhotoSummary"},"directives":[]},{"kind":"FragmentSpread","name":{"kind":"Name","value":"UGCQuestionSummary"},"directives":[]}]}}]}}],"loc":{"start":0,"end":555}}');S.__key=0x75c42d5af9df,S.loc.source={body:"75c42d5af9df"};var p={};function y(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var i=e.name.value;return!p[i]&&(p[i]=!0,!0)})}S.definitions=S.definitions.concat(y(c.definitions)),S.definitions=S.definitions.concat(y(v.definitions)),S.definitions=S.definitions.concat(y(g.definitions)),S.definitions=S.definitions.concat(y(N.a.definitions));var F=S,b=function e(i){var n=i.locationId;return Object(r.useQuery)({query:F,variables:{locationId:n}})},h=n("@ta/platform.i18n"),T=function e(){var i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=Object(h.useLocalize)().localize;return d.useMemo(function(){var e=new Map([["en",n.string("language_english_ffffe66c")],["fr",n.string("language_french_ffffe66c")],["es",n.string("language_spanish_ffffe66c")],["de",n.string("language_german_ffffe66c")],["it",n.string("language_italian_ffffe66c")],["ja",n.string("language_japanese_ffffe66c")],["zhCN",n.string("Chinese_sim")],["zhTW",n.string("Chinese_trad")],["sv",n.string("language_swedish_ffffe66c")],["nl",n.string("language_dutch_ffffe66c")],["pt",n.string("language_portugese_ffffe66c")],["tr",n.string("language_turkish_13a4")],["da",n.string("cds_langname_da_159b")],["no",n.string("locale_no")],["pl",n.string("locale_pl")],["th",n.string("locale_th")],["ko",n.string("locale_ko")],["ru",n.string("locale_ru")],["el",n.string("locale_el")],["in",n.string("locale_id")],["ar",n.string("locale_ar")],["vi",n.string("language_vietnamese_fffffd37")],["cs",n.string("language_czech")],["sk",n.string("locale_sk")],["sr",n.string("locale_sr")],["iw",n.string("language_hebrew")],["fi",n.string("locale_fi")],["hu",n.string("locale_hu")],["uk",n.string("locale_uk")]]);return i&&e.set("all",n.string("common_alllangs_3dd")),e},[n,i])},_=n("@babel/runtime/helpers/esm/toConsumableArray"),D=n.n(_),w=n("@babel/runtime/helpers/esm/defineProperty"),V=n.n(w),C=JSON.parse('{"kind":"Document","definitions":[{"kind":"FragmentDefinition","name":{"kind":"Name","value":"ReviewTextFields"},"typeCondition":{"kind":"NamedType","name":{"kind":"Name","value":"Review"}},"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"title"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"text"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"rating"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"alertStatus"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"translationType"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"mtProviderId"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"originalLanguage"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"url"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"id"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"publishedDate"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"createdDate"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"tripInfo"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"stayDate"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"tripType"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"original"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"submissionDomain"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"language"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"url"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"language"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"provider"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"isLocalProvider"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"isToolsProvider"},"arguments":[],"directives":[]}]}}]}}],"loc":{"start":0,"end":349}}');C.__key=0xf8514d10d95d,C.loc.source={body:"f8514d10d95d"};var I=C,R=JSON.parse('{"kind":"Document","definitions":[{"kind":"FragmentDefinition","name":{"kind":"Name","value":"ReviewerTextFields"},"typeCondition":{"kind":"NamedType","name":{"kind":"Name","value":"Review"}},"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"userProfile"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"hometown"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"locationId"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"fallbackString"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"location"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"additionalNames"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"long"},"arguments":[],"directives":[]}]}}]}}]}},{"kind":"Field","name":{"kind":"Name","value":"displayName"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"route"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"url"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"contributionCounts"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"sumAllUgc"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"helpfulVote"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"isVerified"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"avatar"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"photoSizes"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"url"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"width"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"height"},"arguments":[],"directives":[]}]}}]}}]}}]}}],"loc":{"start":0,"end":416}}');R.__key=46577281378862,R.loc.source={body:"2a5c9e4faa2e"};var L=R,x=JSON.parse('{"kind":"Document","definitions":[{"kind":"FragmentDefinition","name":{"kind":"Name","value":"ReviewResponse"},"typeCondition":{"kind":"NamedType","name":{"kind":"Name","value":"Review"}},"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"mgmtResponse"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"id"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"text"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"username"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"connectionToSubject"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"publishedDate"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"language"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"translationType"},"arguments":[],"directives":[]}]}}]}}],"loc":{"start":0,"end":171}}');x.__key=0xb14315577545,x.loc.source={body:"b14315577545"};var O=x,A=JSON.parse('{"kind":"Document","definitions":[{"kind":"FragmentDefinition","name":{"kind":"Name","value":"ReviewPhotoFields"},"typeCondition":{"kind":"NamedType","name":{"kind":"Name","value":"Review"}},"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"photos"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"id"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"photoSizes"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"height"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"isHorizontal"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"url"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"width"},"arguments":[],"directives":[]}]}}]}}]}}],"loc":{"start":0,"end":148}}');A.__key=9348227382161,A.loc.source={body:"08808dc5bb91"};var U=A,E=JSON.parse('{"kind":"Document","definitions":[{"kind":"FragmentDefinition","name":{"kind":"Name","value":"ReviewSocialFields"},"typeCondition":{"kind":"NamedType","name":{"kind":"Name","value":"Review"}},"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"__typename"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"socialStatistics"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"isLiked"},"arguments":[],"directives":[]}]}}]}}],"loc":{"start":0,"end":100}}');E.__key=96686620666700,E.loc.source={body:"57ef9badeb4c"};var P=E,G=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"ReviewList"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"locationId"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]},{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"albumId"}},"type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}},"defaultValue":{"kind":"IntValue","value":"101"},"directives":[]},{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"limit"}},"type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}},"defaultValue":{"kind":"IntValue","value":"10"},"directives":[]},{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"offset"}},"type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}},"defaultValue":{"kind":"IntValue","value":"0"},"directives":[]},{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"filterCacheKey"}},"type":{"kind":"NamedType","name":{"kind":"Name","value":"String"}},"directives":[]},{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"prefsCacheKey"}},"type":{"kind":"NamedType","name":{"kind":"Name","value":"String"}},"directives":[]},{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"initialPrefs"}},"type":{"kind":"NamedType","name":{"kind":"Name","value":"ReviewListPrefsInput"}},"directives":[]},{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"prefs"}},"type":{"kind":"NamedType","name":{"kind":"Name","value":"ReviewListPrefsInput"}},"directives":[]},{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"filters"}},"type":{"kind":"ListType","type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"FilterConditionInput"}}}},"directives":[]},{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"keywordVariant"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"String"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"locations"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"locationIds"},"value":{"kind":"ListValue","values":[{"kind":"Variable","name":{"kind":"Name","value":"locationId"}}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"FragmentSpread","name":{"kind":"Name","value":"UGCLocationInformation"},"directives":[]},{"kind":"FragmentSpread","name":{"kind":"Name","value":"UGCReviewSummary"},"directives":[]},{"kind":"FragmentSpread","name":{"kind":"Name","value":"UGCPhotoSummary"},"directives":[]},{"kind":"FragmentSpread","name":{"kind":"Name","value":"UGCQuestionSummary"},"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"keywords"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"variant"},"value":{"kind":"Variable","name":{"kind":"Name","value":"keywordVariant"}}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"keywords"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"keyword"},"arguments":[],"directives":[]}]}}]}},{"kind":"Field","name":{"kind":"Name","value":"reviewListPage"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"page"},"value":{"kind":"ObjectValue","fields":[{"kind":"ObjectField","name":{"kind":"Name","value":"limit"},"value":{"kind":"Variable","name":{"kind":"Name","value":"limit"}}},{"kind":"ObjectField","name":{"kind":"Name","value":"offset"},"value":{"kind":"Variable","name":{"kind":"Name","value":"offset"}}}]}},{"kind":"Argument","name":{"kind":"Name","value":"prefs"},"value":{"kind":"Variable","name":{"kind":"Name","value":"prefs"}}},{"kind":"Argument","name":{"kind":"Name","value":"initialPrefs"},"value":{"kind":"Variable","name":{"kind":"Name","value":"initialPrefs"}}},{"kind":"Argument","name":{"kind":"Name","value":"filters"},"value":{"kind":"Variable","name":{"kind":"Name","value":"filters"}}},{"kind":"Argument","name":{"kind":"Name","value":"filterCacheKey"},"value":{"kind":"Variable","name":{"kind":"Name","value":"filterCacheKey"}}},{"kind":"Argument","name":{"kind":"Name","value":"prefsCacheKey"},"value":{"kind":"Variable","name":{"kind":"Name","value":"prefsCacheKey"}}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"totalCount"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"reviews"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"FragmentSpread","name":{"kind":"Name","value":"ReviewTextFields"},"directives":[]},{"kind":"FragmentSpread","name":{"kind":"Name","value":"ReviewPhotoFields"},"directives":[]},{"kind":"FragmentSpread","name":{"kind":"Name","value":"ReviewerTextFields"},"directives":[]},{"kind":"FragmentSpread","name":{"kind":"Name","value":"ReviewResponse"},"directives":[]},{"kind":"FragmentSpread","name":{"kind":"Name","value":"ReviewSocialFields"},"directives":[]}]}}]}}]}}]}}],"loc":{"start":0,"end":1687}}');G.__key=0x916e354ec98c,G.loc.source={body:"916e354ec98c"};var j={};function z(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var i=e.name.value;return!j[i]&&(j[i]=!0,!0)})}G.definitions=G.definitions.concat(z(c.definitions)),G.definitions=G.definitions.concat(z(v.definitions)),G.definitions=G.definitions.concat(z(g.definitions)),G.definitions=G.definitions.concat(z(N.a.definitions)),G.definitions=G.definitions.concat(z(I.definitions)),G.definitions=G.definitions.concat(z(L.definitions)),G.definitions=G.definitions.concat(z(O.definitions)),G.definitions=G.definitions.concat(z(U.definitions)),G.definitions=G.definitions.concat(z(P.definitions));var M,H=G,J=(M={},V()(M,"rating","RATING"),V()(M,"safety","ALERT_STATUS"),V()(M,"travelType","SEGMENT"),V()(M,"travelTime","MONTH"),V()(M,"language","LANGUAGE"),V()(M,"text","TEXT"),V()(M,"classOfService","CLASS_OF_SERVICE"),V()(M,"route","ROUTE"),M),K=function e(i,n){return"".concat("locationReviewFilters","_").concat(i,"_").concat(n)},Q=function e(i){var n,a=V()({},"sortType","connectionsFirst"),t=Object(d.useMemo)(function(){return function e(i,n){var a=n?n.split(" "):[],t=i&&0!==i.length?i:[];return[].concat(D()(a),D()(t)).join(" ")}(i.keywords,i.searchText)},[i.keywords,i.searchText]),l=i.contentLanguage,s=Object(d.useMemo)(function(){var e;return i.isDefaultFilters?e=function e(i){return[{axis:J.language,selections:[i]}]}(l):(e=[],"all"!==l&&e.push({axis:J.language,selections:[l]}),i.rating&&e.push({axis:J.rating,selections:i.rating.map(function(e){return"".concat(e)})}),i.travelTime&&e.push({axis:J.travelTime,selections:i.travelTime.flatMap(function(e){return e}).map(function(e){return"".concat(e)})}),i.travelType&&e.push({axis:J.travelType,selections:i.travelType.map(function(e){return e})}),i.healthSafety&&e.push({axis:J.safety,selections:i.healthSafety.map(function(e){return e.toString()})}),t&&e.push({axis:J.text,selections:[t]})),e},[i.isDefaultFilters,l,i.rating,i.travelTime,i.travelType,i.healthSafety,t]),o=(n={},V()(n,"showMT",i.showMT||!0),V()(n,"sortType",i.sortType||"connectionsFirst"),n);return Object(r.useQuery)({query:H,variables:{locationId:i.locationId,offset:i.offset,limit:i.limit||5,filterCacheKey:i.isDefaultFilters?K(i.locationId,l):null,filters:s,prefsCacheKey:i.isDefaultPrefs?"locationReviewPrefs":null,initialPrefs:a,prefs:o,keywordVariant:i.keywordVariant||""}})},q=new Map([["zh","zhCN"],["zh-CN","zhCN"],["zh-HK","zhTW"],["zh-TW","zhTW"]]),W=function e(i){var n=i||"en";return q.get(n)||n.split("-")[0]||"en"},$=function e(i,n){return(Array.isArray(i)?i.join(","):i)===(Array.isArray(n)?n.join(","):n)},X=function e(i,n){var a=d.useCallback(function(e,i){return"TOGGLE"===i.type?(n(!0),e.some(function(e){return $(e,i.value)})?e.filter(function(e){return!$(e,i.value)}):[].concat(D()(e),[i.value])):"RESET"===i.type?(n(!0),[]):(console.error("Unexpected state in useCheckboxFilterReducer"),e)},[n]),r=d.useReducer(a,i?[i]:[]),l=t()(r,2),s=l[0],o=l[1];return[s,function e(i){return o({type:"TOGGLE",value:i})},function e(){return o({type:"RESET"})}]},B=function e(i){var n=i.onFilterChange,a=d.useState(!1),r=t()(a,2),s=r[0],o=r[1];d.useEffect(function(){s&&(o(!1),n())},[s,n]);var u=d.useContext(l.Environment).locale.code,m=d.useContext(l.Route),c=t()(m,1)[0].params,k=T(!0),v=c.filterLang&&k.has(c.filterLang)?c.filterLang:u,f=W(v),g=X(null,o),N=t()(g,3),S=N[0],p=N[1],y=N[2],F=X(null,o),b=t()(F,3),h=b[0],_=b[1],w=b[2],V=X(null,o),C=t()(V,3),I=C[0],R=C[1],L=C[2],x=X(null,o),O=t()(x,3),A=O[0],U=O[1],E=O[2],P=function e(i,n){var a=T(!0),r=d.useState(i||"en"),l=t()(r,2),s=l[0],o=l[1];return[s,function e(i){a.has(i)?(n(!0),o(i)):console.error("Unexpected language value in useReviewLanguageFilterState")}]}(f,o),G=t()(P,2),j=G[0],z=G[1],M=function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,n=arguments.length>1?arguments[1]:void 0,a=d.useReducer(function e(i,a){switch(a.type){case"ADD":return n(!0),i.concat(" ",a.value||"").trim();case"SET":return n(!0),a.value||"";case"REMOVE":return n(!0),a.value?i.replace(a.value,"").trim():"";case"CLEAR":return n(!0),"";default:return console.error("Unexpected state in useSearchFilterState"),i}},""),r=t()(a,2),l=r[0],s=r[1],o=d.useState(""),u=t()(o,2),m=u[0],c=u[1],k=d.useRef(!0);return d.useEffect(function(){if(k.current)return k.current=!1,function(){};var e=setTimeout(function(){c(l)},i);return function(){return clearTimeout(e)}},[l,i,c]),[l,m,s]}(500,o),H=t()(M,3),J=H[0],K=H[1],Q=H[2],q=function e(i){return d.useReducer(function e(n,a){switch(a.type){case"ADD":return i(!0),[].concat(D()(n),[a.value||""]);case"REMOVE":return i(!0),n.filter(function(e){return e!==a.value});case"CLEAR":return i(!0),[];case"MATCH":return i(!0),n.filter(function(e){return(a.value||"").includes(e)});default:return console.error("Unexpected state in useKeywordFilterState"),n}},[])}(o),$=t()(q,2),B=$[0],Y=$[1],Z=d.useCallback(function(){o(!0),w(),L(),E(),y(),z(f),Q({type:"CLEAR"}),Y({type:"CLEAR"})},[w,L,E,y,z,f,Q,Y]),ee=!(h&&h.length||I&&I.length||S&&S.length||j!==f||J||B&&B.length||A&&A.length);return{rating:S,toggleRating:p,travelType:h,toggleTravelType:_,travelTime:I,toggleTravelTime:R,healthSafety:A,toggleHealthSafety:U,languageFilter:j,setLanguageFilter:z,searchFilter:J,debouncedSearchFilter:K,setSearchFilter:Q,keywordFilter:B,setKeywordFilter:Y,isDefaultFilters:ee,clearFilters:Z}},Y=function e(){var i=d.useState(!0),n=t()(i,2),a=n[0],r=n[1],l=d.useState("connectionsFirst"),s=t()(l,2),o=s[0];return{showMT:a,setShowMT:r,sortType:o,setSortType:s[1],isDefaultPrefs:!0===a&&"connectionsFirst"===o}};n.d(i,"useHasDraftReview",function(){return u}),n.d(i,"useLocationCommunityContent",function(){return b}),n.d(i,"useGetLanguageNames",function(){return T}),n.d(i,"useQueryReviewsList",function(){return Q}),n.d(i,"useReviewFilterState",function(){return B}),n.d(i,"useReviewPrefsState",function(){return Y}),n.d(i,"contentLangFromLocale",function(){return W})}}});
//# sourceMappingURL=reviews.context.f61c24a625.js.map