($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/iap-reporting.core",d:["vendor-react-libs","@ta/core-ui.radio-button","@ta/input.text-area","lithium-platform","@ta/modal.styleguide","@ta/modal.headers","vendor-babel","lithium-common"],e:["./packages/iap-reporting/core/index.jsx"],m:{"./packages/iap-reporting/core/index.jsx":function(e,t,a){"use strict";a.r(t);var r=a("react"),n=a("@ta/core-ui.radio-button"),i=function e(t){var a=t.value,i=t.selected,l=t.labelText,o=t.onSelect,c=t.children;return r.createElement("div",{className:"_32ZufFp4"},r.createElement(n.RadioButton,{value:a,selected:i,onSelect:o,label:r.createElement("span",{className:i?"cX9pI1Xe":"_1ugkkg7h"},l)}),r.createElement("div",{className:"BZDCmin_"},i&&c))},l=a("@ta/input.text-area"),o=a("@ta/platform.i18n"),c=a.n(o),d=function e(t){var a=t.label;a||(a=t.required?r.createElement(c.a,{id:"social_report_level2_6b"}):r.createElement(o.UnsafeLocalize,{id:"social_report_level2_5"}));var n=function e(t,a,n){return t?r.createElement("div",{className:"_29KgpxJJ"},r.createElement(c.a,{id:"ur_rd_0characterminimum",args:{0:a}})," / ",r.createElement(c.a,{id:"ur_rd_0charactermaximum",args:{0:n}})):null}(t.required,t.minLength,t.maxLength);return r.createElement("div",{className:t.className},r.createElement("div",{className:"_261rmpag"},a),r.createElement(l.TextArea,{className:"_1CnuqPVr",value:t.value,onChange:t.onChange,maxLength:t.maxLength}),n)};d.defaultProps={required:!1,label:"",minLength:10,maxLength:250,className:null};var _=d,m={DUPLICATE_CONTENT:{id:5,label:r.createElement(o.UnsafeLocalize,{id:"social_report_reason_photos2"})},WRONG_LOCATION:{id:6,label:r.createElement(c.a,{id:"report_review_radio_8"})},CLOSED:{id:8,label:r.createElement(c.a,{id:"report_review_radio_21"})},OTHER:{id:9,label:r.createElement(c.a,{id:"report_review_radio_19"})},WRITTEN_BY_COMPETITOR:{id:19,label:r.createElement(c.a,{id:"report_review_radio_10"})},OWNER_RESPONSE:{id:21,label:r.createElement(function e(){throw new Error("This reason does not have a label")},null)},INAPPROPRIATE:{id:22,label:r.createElement(c.a,{id:"report_review_radio_9"})},NOT_ORIGINAL_REVIEW:{id:24,label:r.createElement(c.a,{id:"report_review_radio_16"})},NOT_TRAVELERS_OWN:{id:25,label:r.createElement(c.a,{id:"report_review_radio_13"})},PROMOTIONAL:{id:27,label:r.createElement(c.a,{id:"report_review_radio_24"})},REVIEW_NOT_CONSISTENT_WITH_RATING:{id:30,label:r.createElement(c.a,{id:"report_review_radio_12_ver_2"})},LOW_QUALITY:{id:31,label:r.createElement(c.a,{id:"iap_low_quality_ffffe4e2"})},COPYRIGHT_VIOLATION:{id:32,label:r.createElement(o.UnsafeLocalize,{id:"social_content_report_copyright_violation"})},BIASED:{id:37,label:r.createElement(c.a,{id:"report_review_radio_20"})},MORE_THAN_1_YEAR_AGO:{id:38,label:r.createElement(c.a,{id:"report_review_radio_11"})},CONTAINS_PRIVATE_INFO:{id:41,label:r.createElement(c.a,{id:"report_review_radio_18"})},PROFANE_EXPLICIT_HATE_SPEECH:{id:42,label:r.createElement(c.a,{id:"iap_profane_explicit_or_hate_speech"})},LINK_INCORRECT_OUTDATED_BROKEN:{id:43,label:r.createElement(c.a,{id:"iap_link_incorrect_outdated_broken"})},NOT_PERSONAL_EXPERIENCE:{id:45,label:r.createElement(c.a,{id:"iap_not_personal_experience"})},FALSE_MISLEADING_INFO:{id:46,label:r.createElement(c.a,{id:"iap_false_misleading_info"})},PROMOTES_ILLEGAL_ACTIVITY:{id:47,label:r.createElement(c.a,{id:"iap_promote_illegal_activity"})},PARTICIPATION_ILLEGAL_ACTIVITY:{id:48,label:r.createElement(c.a,{id:"iap_participate_illegal_activity"})},LINK_ILLEGAL_ACTIVITY:{id:50,label:r.createElement(c.a,{id:"iap_link_illegal_activity"})},SELF_PROMOTION_ADVERTISEMENT_SOLICITATION:{id:51,label:r.createElement(c.a,{id:"iap_forums_self_promotion"})},OFF_TOPIC:{id:52,label:r.createElement(c.a,{id:"iap_forums_off_topic"})},SPAM:{id:53,label:r.createElement(c.a,{id:"iap_forums_spam"})},DUPLICATE_FORUM:{id:54,label:r.createElement(c.a,{id:"iap_forums_duplicate"})},HARASSMENT:{id:55,label:r.createElement(c.a,{id:"iap_forums_harassment"})},PROFANITY_SEX_VIOLENCE_CRIME_HATE:{id:56,label:r.createElement(c.a,{id:"iap_forums_profanity_sex_violence_crime_hate"})},MULTIPLE_ACCOUNTS_OR_IMPERSONATION:{id:57,label:r.createElement(c.a,{id:"iap_forums_multiple_accounts_or_impersonation"})},PERSONAL_INFO:{id:58,label:r.createElement(c.a,{id:"iap_forums_personal_info"})},COPYRIGHTED:{id:59,label:r.createElement(c.a,{id:"iap_forums_copyrighted"})},TRIP_COPYRIGHT:{id:60,label:r.createElement(c.a,{id:"iap_trips_copyrighted"})},TRIP_NOT_TRAVEL_RELATED:{id:61,label:r.createElement(c.a,{id:"iap_trips_not_travel_related"})},TRIP_ERROR_OR_DISAGREE:{id:62,label:r.createElement(c.a,{id:"iap_trips_error_or_disagree"})},PROFILE_PROBLEM_WITH_PHOTO:{id:63,label:r.createElement(c.a,{id:"iap_profile_problem_with_pic"})},PROFILE_PROBLEM_WITH_LINK:{id:64,label:r.createElement(c.a,{id:"iap_profile_problem_with_link"})},PROFILE_IAP_USERNAME:{id:65,label:r.createElement(c.a,{id:"iap_profile_username"})},PROFILE_IAP_CONTRIBUTION:{id:66,label:r.createElement(c.a,{id:"iap_profile_contribution"})},PROFILE_PROBLEM_MY_ACCOUNT:{id:67,label:r.createElement(c.a,{id:"iap_profile_problem_my_account"})},PROFILE_UNWANTED_MESSAGE:{id:68,label:r.createElement(c.a,{id:"iap_profile_unwanted_messages"})},REPORT_THIS_REVIEW:{id:-1,label:r.createElement(c.a,{id:"report_review_radio_1"})},UPDATE_BUSINESS_DETAILS:{id:-2,label:r.createElement(c.a,{id:"report_review_radio_2"})},REPORT_BUSINESS_CLOSED:{id:-3,label:r.createElement(c.a,{id:"report_review_radio_3"})},EDIT_REMOVE_RESPONSE:{id:-4,label:r.createElement(c.a,{id:"report_review_radio_4"})},REPORT_OWNER_CHANGED:{id:-5,label:r.createElement(c.a,{id:"report_review_radio_5"})},REPORT_PHOTO:{id:-6,label:r.createElement(c.a,{id:"report_review_radio_6"})},REMOVE_LISTING:{id:-7,label:r.createElement(c.a,{id:"report_review_radio_7"})},DISAGREE_WITH_INFO:{id:-8,label:r.createElement(c.a,{id:"report_review_radio_17"})}},E=function e(t){return m[t].id<0},s=function e(t){return m[t]},u=a("@ta/modal.styleguide"),p=a.n(u),f=a("@ta/modal.headers"),O=function e(){return r.createElement("div",{className:"_3JyyU5GO"},r.createElement("p",{className:"_2cbIEE_M",style:{textAlign:"center"}},r.createElement(c.a,{id:"social_report_ty2"})," "),r.createElement("p",{className:"o74-RvSL"},r.createElement(c.a,{id:"social_report_ty2b"})," "))},I=a("@ta/common.classnames"),T=a.n(I),R=function e(){return r.createElement("div",{className:T()("_3QCXkQou","n3QmS_jU")},r.createElement(c.a,{id:"social_report_prof_err"})," ")},b=function e(t){var a=t.stage,i=t.onClose,l=t.children;return r.createElement(p.a,{header:r.createElement(f.TitleBar,{iconName:"flag-fill",displayType:"LEFT_ALIGN_GRAY"},r.createElement("div",{id:"ReportIAP"},r.createElement(c.a,{id:"report_problem_ffffff85"}))),onClose:i},"thankyou"===a&&r.createElement(O,null),"error"===a&&r.createElement(R,null),"panel"===a&&r.createElement("div",{className:"_2KwWSEyW"},r.createElement(n.RadioGroup,{name:"ReportIAP",labelId:"ReportIAP"},l)))},v=a("@babel/runtime/helpers/esm/slicedToArray"),N=a.n(v),P=a("@ta/lithium.context"),h={ForumPost:"FORUMPOST",Review:"USERREVIEW",ManagementResponse:"USERREVIEW",Photo:"MEDIA",Video:"MEDIA",Trip:"2",LinkPost:"1",Repost:"3",Profile:"4",LocationTopic:"LOCATION_TOPIC",LocationPosting:"LOCATION_POSTING"},L=new Set(["USERREVIEW","MEDIA","LOCATION_TOPIC","LOCATION_POSTING"]),A=function e(t){var a=r.useState("panel"),n=N()(a,2),i=n[0],l=n[1],o=function e(t){var a=t.contentType,n=t.contentId,i=t.submission,l=r.useContext(P.Device).securityToken;return r.useCallback(function(){if(!i)return Promise.reject(new Error("No submission data!"));var e=h[a],t=new URLSearchParams([["action","reportIAP"],["step","SAVE"],["contentId",n],["voteContentType",e],["comment",i.comment],["reasonId","".concat(s(i.reason).id)]]);if(i.suggestedLocationId&&t.set("suggestedLocationId","".concat(i.suggestedLocationId)),L.has(e))return function e(t,a){return fetch(t,{cache:"no-cache",credentials:"same-origin",method:"POST",redirect:"follow",headers:{"X-Requested-By":a}})}("/ReportIAP?".concat(t.toString()),l);throw new Error("Only legacy inputs are supported through the Lithium-ported iat-reporting! Feel free to add the remaining ones from public.iat-reporting")},[a,n,l,i])}(t);return r.useMemo(function(){return[i,function(){return o().then(function(){l("thankyou")}).catch(function(){l("error")})}]},[i,o])},g=a("@babel/runtime/helpers/esm/defineProperty"),S=a.n(g);function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(a,!0).forEach(function(t){S()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var w=function e(t,a){if("changeReason"===a.type)return{selected:a.payload.reason,validator:a.payload.validator,form:t.form};if("modifyBody"===a.type&&t.selected)return{selected:t.selected,validator:t.validator,form:C({},t.form,S()({},t.selected,a.payload))};throw new Error("Tried to dispatch action type ".concat(a.type," that does not exist"))},M=function e(t){var a=r.useReducer(w,{selected:t?t.reason:null,validator:t&&t.validator,form:{}}),n=N()(a,2),i=n[0],l=n[1];return r.useMemo(function(){var e=i.selected&&i.form[i.selected]||{comment:void 0};return[{selected:i.selected,disabled:!i.selected||i.validator&&!i.validator(e),form:e},l]},[i])},D=function e(t,a){return r.useMemo(function(){return t?{reason:t,comment:a.comment||""}:null},[t,a])},x=a("@ta/core-ui.button"),U=a.n(x),F=function e(t){var a=t.onBack;return r.createElement(U.a,{theme:"secondary",onClick:a,fullWidth:!0},r.createElement(c.a,{id:"com_fyf_p2_011"})," ")},G=function e(t){var a=t.disabled,n=t.onBack,i=t.onSubmit,l="MOBILE"===r.useContext(P.Device).viewportCategory;return r.createElement(r.Fragment,null,l&&r.createElement("div",{className:"hlrQZ1JM"},r.createElement(U.a,{disabled:!0},null)),r.createElement("div",{className:T()("_3g8GjfUU",l&&"_1OU-RYIJ")},n&&r.createElement("div",{className:"vgGkKfJ9"},r.createElement(F,{onBack:n})),r.createElement("div",{className:"vgGkKfJ9"},r.createElement(U.a,{theme:"primary",disabled:a,onClick:i,fullWidth:!0},r.createElement(c.a,{id:"common_Submit"})))))},W=function e(t,a){return r.useCallback(function(e){var r=(e.comment||"").trim();return!(r.length>a||r.length<t)},[t,a])},k=function e(t){var a=t.selected,n=t.reason,l=t.comment,o=void 0===l?"":l,c=t.dispatch,d=t.minLength,m=void 0===d?0:d,E=t.maxLength,u=void 0===E?250:E,p=W(m,u);return r.createElement(i,{value:n,selected:a===n,labelText:s(n).label,onSelect:function e(){c({type:"changeReason",payload:{reason:n,validator:p}})}},r.createElement(_,{value:o,onChange:function e(t){c({type:"modifyBody",payload:{comment:t.currentTarget.value}})},minLength:m,maxLength:u,required:!!m}))},V=function e(t){var a=t.selected,n=t.reason,l=t.dispatch,o=t.children;return r.createElement(i,{value:n,selected:a===n,labelText:s(n).label,onSelect:function e(){l({type:"changeReason",payload:{reason:n,validator:function e(){return!1}}})}},o)};a.d(t,"ReportIAPRadio",function(){return i}),a.d(t,"CommentBox",function(){return _}),a.d(t,"forLabel",function(){return s}),a.d(t,"isOwnerReason",function(){return E}),a.d(t,"ReportModal",function(){return b}),a.d(t,"useReportFlow",function(){return A}),a.d(t,"useReportForm",function(){return M}),a.d(t,"useFormToSubmission",function(){return D}),a.d(t,"SubmitVoteButton",function(){return G}),a.d(t,"CommentOption",function(){return k}),a.d(t,"useLengthValidator",function(){return W}),a.d(t,"RedirectOption",function(){return V})}}});
//# sourceMappingURL=iap-reporting.core.1b7b215753.js.map