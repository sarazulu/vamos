($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/memx.google-onetap-api",d:["vendor-babel","vendor-react-libs","@ta/platform.interactions","lithium-platform"],e:["./packages/memx/google-onetap-api/index.jsx"],m:{"./packages/memx/google-onetap-api/index.jsx":function(e,t,o){"use strict";o.r(t);var n=o("@babel/runtime/helpers/esm/extends"),r=o.n(n),i=o("@babel/runtime/helpers/esm/classCallCheck"),a=o.n(i),c=o("@babel/runtime/helpers/esm/createClass"),s=o.n(c),l=o("@babel/runtime/helpers/esm/possibleConstructorReturn"),u=o.n(l),d=o("@babel/runtime/helpers/esm/getPrototypeOf"),p=o.n(d),m=o("@babel/runtime/helpers/esm/assertThisInitialized"),f=o.n(m),g=o("@babel/runtime/helpers/esm/inherits"),h=o.n(g),v=o("@babel/runtime/helpers/esm/defineProperty"),k=o.n(v),b=o("react"),y=o("@ta/platform.interactions"),w=o("@ta/platform.import"),_=o("@ta/platform.performance"),A="https://".concat("smartlock.google.com"),N="".concat(A,"/client"),O="".concat("smartlock.google.com","/iframe/"),E=1e4,x={supportedAuthMethods:["https://accounts.google.com"],supportedIdTokenProviders:[{uri:"https://accounts.google.com",clientId:"1070328450902.apps.googleusercontent.com"}]},P={type:"googleYoloNotLoaded",message:"The google yolo library was not yet loaded."};function L(e){"Unknown error processing Google onetap request - type: ".concat(e.type,", message: ").concat(e.message)}var M="undefined"==typeof window?new Promise(function(){}):new Promise(function(e){window.googleyolo?e(window.googleyolo):window.onGoogleYoloLoad=function(t){return e(t)}}),C=function e(){return Object(w.importScript)(N,"MEMX"),M},I=function(e){function t(e){var o;return a()(this,t),o=u()(this,p()(t).call(this,e)),k()(f()(o),"googleyolo",void 0),k()(f()(o),"iframeAttributeObserver",void 0),k()(f()(o),"iframeNode",void 0),k()(f()(o),"classNames",void 0),k()(f()(o),"addClassName",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};return o.classNames.push({className:e,predicate:t}),f()(o)}),k()(f()(o),"load",function(e,t){return C().then(function(n){o.googleyolo=n,n&&n.setTimeouts(t||E),e&&o.googleyolo&&o.googleyolo.setRenderMode(e)})}),k()(f()(o),"captureIframeEvents",function(e){return o.captureIframeNode().then(function(t){o.registerHeightListener(t,e)}),f()(o)}),k()(f()(o),"trackSuccess",function(e,t){t.idToken&&o.props.trackAction("".concat(e,"_selected"))}),o.classNames=[],o}return h()(t,e),s()(t,[{key:"componentDidMount",value:function e(){Object(_.mark)("GoogleOneTapLoaded")}},{key:"componentWillUnmount",value:function e(){if(window.onGoogleYoloLoad=void 0,this.googleyolo){var t=this.googleyolo.cancelLastOperation;this.googleyolo=null,t()}this.iframeAttributeObserver&&this.iframeAttributeObserver.disconnect()}},{key:"reevaluateStylePredicates",value:function e(){var t=this;if(!this.iframeNode||0===this.classNames.length)return this;var o=[];return this.classNames.forEach(function(e){!t.iframeNode||e.predicate&&!e.predicate()?o.push(e):t.iframeNode.classList.add(e.className)}),this.classNames=o,this}},{key:"hint",value:function e(){var t=this;return this.googleyolo?(this.reevaluateStylePredicates(),this.props.trackAction("hint_requested"),new Promise(function(e,o){return t.googleyolo&&t.googleyolo.hint(x).then(function(o){t.trackSuccess("hint",o),e(o)},function(e){t.trackError("hint",e),o(e)}).catch(function(e){var n=Object.assign({type:"unexpectedException"},e);t.trackException("hint",n),o(e)})})):(this.props.trackAction("hint_sdk_not_initialized"),Promise.reject(P))}},{key:"retrieve",value:function e(){var t=this;return this.googleyolo?(this.reevaluateStylePredicates(),this.props.trackAction("autologin_requested"),new Promise(function(e,o){return t.googleyolo&&t.googleyolo.retrieve(x).then(function(o){t.trackSuccess("autologin",o),e(o)},function(e){t.trackError("autologin",e),o(e)}).catch(function(e){var n=Object.assign({type:"unexpectedException"},e);t.trackException("autologin",n),o(n)})})):(this.props.trackAction("autologin_sdk_not_initialized"),Promise.reject(P))}},{key:"trackError",value:function e(t,o){switch(o.type){case"userCanceled":this.props.trackAction("".concat(t,"_closed"));break;case"noCredentialsAvailable":this.props.trackAction("".concat(t,"_no_credentials"));break;case"requestFailed":this.props.trackAction("".concat(t,"_request_failed"));break;case"unsupportedBrowser":this.props.trackAction("".concat(t,"_unsupported_browser"));break;case"operationCanceled":break;case"illegalConcurrentRequest":case"initializationError":case"configurationError":default:this.props.trackAction("".concat(t,"_unknown_error")),L(o)}}},{key:"trackException",value:function e(t,o){this.props.trackAction("".concat(t,"_exception")),L(o)}},{key:"captureIframeNode",value:function e(){var t=this;return new Promise(function(e){var o=new MutationObserver(function(n){n.forEach(function(n){n.addedNodes&&Array.from(n.addedNodes).forEach(function(n){n instanceof HTMLIFrameElement&&n.src.includes(O)&&(o.disconnect(),t.iframeNode=n,t.reevaluateStylePredicates(),e(n))})})});o.observe(window.document.body,{childList:!0})})}},{key:"registerHeightListener",value:function e(t,o){this.iframeAttributeObserver=new MutationObserver(function(e){var t,n,r=null==e?void 0:null===(t=e[0])||void 0===t?void 0:t.target;if(r instanceof HTMLElement){var i=parseInt((null==r?void 0:null===(n=r.style)||void 0===n?void 0:n.height)||0,10),a=isNaN(i)?0:i;o.call(o,a)}}),this.iframeAttributeObserver.observe(t,{attributes:!0})}},{key:"render",value:function e(){return this.props.render(this)}}]),t}(b.Component);o.d(t,"GOOGLE_SMARTLOCK_DOMAIN",function(){return"smartlock.google.com"}),o.d(t,"GOOGLE_SMARTLOCK_ORIGIN",function(){return A}),t.default=function e(t){var o=Object(y.useGARecorder)(),n=b.useCallback(function(e){o({module:t.trackingModule,action:e,context:"".concat(e,"_unknown_").concat(t.flow),value:t.pid})},[t.flow,t.pid,t.trackingModule,o]);return b.createElement(I,r()({},t,{trackAction:n}))}}}});
//# sourceMappingURL=memx.google-onetap-api.e5706dbb81.js.map