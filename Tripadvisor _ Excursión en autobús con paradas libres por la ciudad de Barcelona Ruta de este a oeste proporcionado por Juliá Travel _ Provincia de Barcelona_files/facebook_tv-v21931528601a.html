<!DOCTYPE html>
<!-- saved from url=(3647)https://www.jscache.com/static/page_moniker/facebook_tv-v21931528601a.html#pixelType=PAGEVIEW&lithium=true&path=/AttractionProductReview-g187497-d11446541-Barcelona_City_Tour_Hop_On_Hop_Off-Barcelona_Catalonia.html&localeTag=es-CO&attractionProductCode=2140BCNHOP&attractionProductPrice=138804.14&fullPageUrl=https%3A%2F%2Fwww.tripadvisor.co%2FAttractionProductReview-g187497-d11446541-Barcelona_City_Tour_Hop_On_Hop_Off-Barcelona_Catalonia.html&geoId=187497&curLocId=11446541&pixelList=facebook_vi_attraction_dat_product_detail_pixel,facebook_vi_attraction_log_attribution,google_pixel_attractions,google_display_pixel_attractions,bing_pixel_attractions_detail,clicktripz_attr_aud_pixel,facebook_tv_landing,comscore_pixel,twitter_audience_pixel,stm_new_sync_pixel&tadomain=tripadvisor.co&pageTitle=&reqUnique=f0c8270ca0189f9a352783c92b09d705ce2ae66d&userUnique=d0ffee219c7201a3066ebace8098d67885af9f66&fbUserUnique=ee524e5458318420ea72b7c63c47366f6c6fdb2a7a30d2fb1cf90c584bae8cdb&locale=es_CO&countryID=294073&ipCountryAbbrev=CO&seqId=10&sessionId=C3233CBBBAE76D79DBB0DEB383DD2C71&currency=COP&locationHierarchy=1:4:187427:187496:1969684:187497:187497&regionName=Catalonia&cityName=Barcelona&stateOrCityName=Barcelona&countryName=Spain&countryAbbrev=ES&destinationName=Barcelona%20City%20Tour%20Hop-On%20Hop-Off&locationType=Activity&stDest=Barcelona%2CSpain&geoName=Barcelona&geoParentId=1969684&geoParentName=Provincia%20de%20Barcelona&geoMostPop=1153245&loc1=1153245&productIds=[%22%22,%22d1153245esCO%22,%22187497esCO%22]&productIdsShort=,d1153245esCO,187497esCO&device=Desktop&fbDevice=1&device2=desktop&userGeo=297478&siteType=d&trueServlet=AttractionProductReview&genTrueServlet=AttractionProductReview&fbTrueServlet=AF&servlet=AttractionProductReview&geoFeedBucket=all&serverName=www.tripadvisor.co&puid=LIT@Meu66oN@dt9B98f2tMYN&isMobileDevice=n&rtPath=www.tamgrt.com/RT&random=1205529618&dmpAudienceIds=16635,15434,15299,15765,16062&taSplit=1&mcid=10568&fbChannel=2&isOrganic=false&criteoDedup=0&tasource=SEO&geo=187497&isClickoutYN=no&isLoggedIn=N&securelyLoggedIn=N&stuid=NY1QkB0y0N6jW8BMdUO9LVtU5Jk_8FI8J8gCCtk40IucjkQ7HCdKxiAJiWlkYEV8&countryAlpha2=CO&criteoPartnerId=20904&criteoAttractionPartnerId=0&criteoHotelAcct=%5Ban%3Dweb-hotels-tripadvisor.com%26cn%3Dco%26ln%3Des%2Can%3Dweb-hotels-0-tripadvisor.com%26cn%3Dco%26ln%3Des%2Can%3Dweb-hotels-1-tripadvisor.com%26cn%3Dco%26ln%3Des%2Can%3Dweb-hotels-2-tripadvisor.com%26cn%3Dco%26ln%3Des%5D&flight_originid=&flight_destid=&flight_startdate=2020-05-01&flight_enddate=2020-05-08&flight_oneway=2020-05-01&dynx_itemid=null_null_20200501_20200508&flight_num_tix=1&numSeniors=0&attractionShoppingCartTotalPriceUSD=0.00&isAttractionProdDetailPages=true&facebookuvm_v2UlbScore=0.37788138255865633&facebookuvm_v2UlbBucket=18&facebookUlbScore=0.4683263761414&facebookUlbBucket=100&googleExperimentSegment=test&googleUlbScore=0.23034158500000002&googleUlbBucket=2&googleuvm_v2UlbBucket=2&googleuvm_v2UlbScore=0.153531251&UVMBESTSCORE=0.11&UVMSCOPE=UVM_V2&UVMSAVEABLE=0&googleuvm_v2.1UlbBucket=2&googleuvm_v2.1UlbScore=0.10690441670465999&googleuvm_v2.1UlbBucketParamName=uvm_display_desktop_bucket&criteoUlbScore=0.10690441670465999&criteoUlbBucket=2&criteoUlbScoreCurrent=0.10690441670465999&criteoUlbBucketCurrent=2&DBISCORE=0.029955391805965386&DBIFLAG=false&btb_score=0.000&btb_bucket=L&mofSlice=11&mofLastUpdated=20200417&smarterTravelPixelID=gqLWKHSnTxes4YmmtgWkqA&smarterTravelPixelDomain=p.smartertravel.com&isSTConversion=false&googleCRMId=b7a6a10cca96f7c8c44d2ff6d0d5db75e7361cfa&rexSplit=c&NanigansTestSegment=0&sitePerfTestCode=1&is_default_dates=No&pixelName=facebook_tv_landing -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="ROBOTS" content="NOINDEX, NOFOLLOW">
</head>
<body>
  <script src="./547333922434412" async=""></script><script async="" src="./fbevents.js.descarga"></script><script type="text/javascript">
    // Pull params from URL (argdict maps keys to values or arrays of values)
    var argdict = {};
    var args = window.location.hash.substring(1).split("&");
    for (var i = 0; i < args.length; i++) {
      var pair = args[i].split("=");

      if (typeof argdict[pair[0]] === "undefined") {
        argdict[pair[0]] = pair[1];
      } else if (typeof argdict[pair[0]] === "string") {
        argdict[pair[0]] = [argdict[pair[0]], pair[1]];
      } else {
        argdict[pair[0]].push(pair[1]);
      }
    }

    // Determine pixel type.
    var fbPixelName = null;
    var isStandardEvent = true;
    if (argdict.pixelType === 'PAGEVIEW') {
      fbPixelName = 'PageView';
    }
    else if (argdict.pixelType === 'SAVE_TO_TRIP_INTENT') {
      fbPixelName = 'SavesIntent';
      isStandardEvent = false;
    }
    else if (argdict.pixelType === 'SAVE_TO_TRIP') {
      fbPixelName = 'SavesCompleted';
      isStandardEvent = false;
    }


    if (fbPixelName !== null) {
      var fbContentType = '["hotel","destination"]';
      var applicationId = encodeURIComponent(250701451714610);
      // event name for Dynamic Product Ads
      var eventName = encodeURIComponent(fbPixelName);
      var fbCategory = encodeURIComponent(argdict.fbTrueServlet);
      var servlet = encodeURIComponent(argdict.trueServlet);
      var fbDevice = encodeURIComponent(argdict.fbDevice);
      var fbDateIn = encodeURIComponent(argdict.fbDateIn);
      var fbDateOut = encodeURIComponent(argdict.fbDateOut);
      var geoId = encodeURIComponent(argdict.geoId);
      var propId = encodeURIComponent(argdict.propId);
      var brandName = encodeURIComponent(argdict.brandName);
      var mcid = encodeURIComponent(argdict.mcid);
      var countryID = encodeURIComponent(argdict.countryID);
      var fbUserUnique = encodeURIComponent(argdict.fbUserUnique);
      var userUnique = encodeURIComponent(argdict.userUnique);
      var ulbBucket = encodeURIComponent(argdict.facebookUlbBucket);
      var ulbScore = encodeURIComponent(argdict.facebookUlbScore);
      var fbRegion = encodeURIComponent(argdict.regionName);
      var fbCity = encodeURIComponent(argdict.cityName);
      var fbCountry = encodeURIComponent(argdict.countryName);
      var fbDestinationName = encodeURIComponent(argdict.destinationName);
      var fbOrigin = encodeURIComponent(argdict.originName);
      var fbLocationType = encodeURIComponent(argdict.locationType);
      var fbRetargetingType = encodeURIComponent(argdict.fbRetargetingType);
      var fbUlbMultiplier = encodeURIComponent(argdict.fbUlbMultiplier);
      var ibFlowStep = encodeURIComponent(argdict.ibFlowStep);
      var viatorTourDate = encodeURIComponent(argdict.attractionTourDate);
      var viatorProductCode = encodeURIComponent(argdict.attractionProductCode);
      var dmpAudienceIds = encodeURIComponent(argdict.dmpAudienceIds);
      var userOrigin = encodeURIComponent(argdict.userOrigin);
      var isLoggedIn = encodeURIComponent(argdict.isLoggedIn);
      var currency = encodeURIComponent(argdict.currency);
      var flightOrigin = encodeURIComponent(argdict.flight_originid);
      var flightDestination = encodeURIComponent(argdict.flight_destid);
      var flightDeparture = encodeURIComponent(argdict.flight_startdate);
      var flightReturn = encodeURIComponent(argdict.flight_enddate);
      var flightOneWay = encodeURIComponent(argdict.flight_oneway);
      var rentalCarPickupLocation = encodeURIComponent(argdict.rc_pu_loc);
      var rentalCarPickup = encodeURIComponent(argdict.rc_pu_date);
      var rentalCarDropoff = encodeURIComponent(argdict.rc_do_date);
      var attractionDateFrom = encodeURIComponent(argdict.attractionDateFrom);
      var attractionDateTo = encodeURIComponent(argdict.attractionDateTo);
      var locationHierarchy = encodeURIComponent(argdict.locationHierarchy);

      // Only one model will be calculated for each user - v2, v2.1, or complex
      var uvmV2Bucket;
      var uvmV2Score;
      if (argdict.hasOwnProperty('facebookuvm_complexUlbBucket') && argdict.hasOwnProperty('facebookuvm_complexUlbScore')) {
        uvmV2Bucket = argdict.facebookuvm_complexUlbBucket;
        uvmV2Score = argdict.facebookuvm_complexUlbScore;
      }
      else if (argdict.hasOwnProperty('facebookuvm_v2.1UlbBucket') && argdict.hasOwnProperty('facebookuvm_v2.1UlbScore')) {
        uvmV2Bucket = argdict['facebookuvm_v2.1UlbBucket'];
        uvmV2Score = argdict['facebookuvm_v2.1UlbScore'];
      }
      else {
        uvmV2Bucket = argdict.facebookuvm_v2UlbBucket;
        uvmV2Score = argdict.facebookuvm_v2UlbScore;
      }
      uvmV2Bucket = encodeURIComponent(uvmV2Bucket);
      uvmV2Score = encodeURIComponent(uvmV2Score);

      var dateIn = argdict.dateIn;
      var dateOut = argdict.dateOut;

      // product ids for Dynamic Product Ads. Currently returning a property product followed by a geo product to ensure the geo product is the last product fired
      var productIds = [];
      if (typeof argdict['loc1'] !== 'undefined') {
        // On Hotels page, loc1 is the top commerce hotel for the geo in the POS.
        // On properties page, loc1 is the actual hotel.
        // In all other pages(e.g. SmartDeals page), loc1 is the top pop hotel of the geo.
        productIds.push(encodeURIComponent('d' + argdict['loc1'] + argdict.locale.replace('_', '')));
      }
      productIds.push(encodeURIComponent(geoId + argdict.locale.replace('_' , '')));
      // For obfuscated pixel key mapping, see FB_PIXEL_KEY_MAPPING in PageMoniker.java
      // These are used for Facebook DPA ad creation, do not modify without consulting vwang@ or om-fb@
      var params = {
        'application_id' : applicationId,
        'content_type' : fbContentType,
        'content_ids' : productIds,
        'region' : fbRegion,
        'city' : fbCity,
        'country' : fbCountry,
        'origin' : fbOrigin,
        'destination' : fbDestinationName,
        'types' : fbLocationType,
        'external_id': fbUserUnique,
        'page_type' : servlet,
        'user_origin' : userOrigin,
        'currency' : currency,
        'origin_airport' : flightOrigin,                        // airport code
        'destination_airport' : flightDestination,              // airport code
        'flight_departure' : flightDeparture,
        'flight_return' : flightReturn,
        'flight_one_way' : flightOneWay,
        'rental_car_pickup_location' : rentalCarPickupLocation,
        'rental_car_pickup' : rentalCarPickup,
        'rental_car_dropoff' : rentalCarDropoff,
        'attraction_start' : attractionDateFrom,
        'attraction_end' : attractionDateTo,
        'FB1' : fbDateIn,           // fbCheckInDate
        'FB2' : fbDateOut,          // fbCheckOutDate
        'FB3' : geoId,              // destinationCode
        'FB4' : fbDevice,           // fbDevice
        'FB5' : countryID,          // IP country id
        'FB6' : locationHierarchy,  // location id hierarchy
        'FB7' : mcid,               // mcid
        'FB8' : fbCategory,         // fbProductType
        'FB9' : propId,             // propertyID
        'FB10': userUnique,         // userUnique - this is passed so Facebook can match users with data we provided in an offline file (5/13/15)
        'FB11': brandName,         // brand
        'FB12': isLoggedIn,         // Logged in (Y or N)
        'FB13': ulbBucket,          // User level bid bucket (UVM v1)
        'FB14': ulbScore,           // User level bid score (UVM v1)
        'FB15': viatorTourDate,     // Viator tour date
        'FB16': viatorProductCode,  // Viator product code
        'FB17': fbRetargetingType,  // Retargeting type
        'FB18': fbUlbMultiplier,    // User level bid multiplier
        'FB27': uvmV2Bucket,        // ULB bucket for v2 (for testing)
        'FB28': uvmV2Score,         // ULB score for v2 (for testing)
        'FB29': dmpAudienceIds,     // The audience ids for the user according to our DMP
        'user_bucket': uvmV2Bucket  // Parameter for FB's new ULB product
      };

      params.checkin_date = dateIn;
      params.checkout_date = dateOut;

      //The following code is copy pasted from facebook.
      !function(f,b,e,v,n,t,s)
      {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
      n.callMethod.apply(n,arguments):n.queue.push(arguments)};
      if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
      n.queue=[];t=b.createElement(e);t.async=!0;
      t.src=v;s=b.getElementsByTagName(e)[0];
      s.parentNode.insertBefore(t,s)}(window, document,'script',
      'https://connect.facebook.net/en_US/fbevents.js');
      // End of copy paste from facebook.

      // Note: Using a variable for the pixel id instead of passing it directly causes FB's pixel helper chrome plug-in to break
      if (typeof argdict['fbHEml'] !== 'undefined') {
        fbq('init', '547333922434412', {em: encodeURIComponent(argdict.fbHEml)});
      }
      else {
        fbq('init', '547333922434412');
      }

      if (isStandardEvent) {
        fbq('track', eventName, params);
      } else {
        fbq('trackCustom', eventName, params);
      }
    }
  </script>


</body></html>