($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/reviews.filters-ui",d:["vendor-babel","vendor-react-libs","@ta/bbml.interactions","lithium-platform","@ta/common.features","@ta/core-ui.radio-button","@ta/platform.interactions","@ta/modal.styleguide","@ta/input.filter-group","@ta/reviews.context","@ta/core-ui.checkbox","lithium-common","@ta/input.text-input","@ta/filters.selection-pills","@ta/overlays.tooltip"],e:["./packages/reviews/filters-ui/filters-ui.jsx"],m:{"./packages/reviews/filters-ui/filters-ui.jsx":function(e,t,a){"use strict";a.r(t);var r=a("@babel/runtime/helpers/esm/defineProperty"),n=a.n(r),l=a("@babel/runtime/helpers/esm/slicedToArray"),c=a.n(l),i=a("react"),o=a.n(i),s=a("@ta/bbml.interactions"),u=a.n(s),m=a("@ta/common.classnames"),d=a.n(m),f=a("@ta/common.features"),_=a("@ta/core-ui.radio-button"),g=a("@ta/lithium.context"),b=a("@ta/platform.interactions"),v=a("@ta/platform.i18n"),p=a.n(v),E=a("@ta/modal.styleguide"),y=a.n(E),h=a("@ta/input.filter-group"),T=a("@ta/reviews.context"),O=function e(t){var a=t.id,r=t.children,n=t.selectorString;return i.createElement("div",{className:"_1x5PKeJI","data-automation":"".concat(n||"filterHeader"),id:a},r)};function F(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}var k=function e(t,a){return("ATTRACTION"===a||"ACTIVITY"===a)&&""===t},x=function e(t){var a=t.displayType,r=t.reviewAggregations,l=t.placeType,o=t.selectedLanguage,m=t.setLanguageFilter,E=Object(v.useIntlFormatter)(),x=Object(b.useGARecorder)(),N=Object(v.useLocalize)().localize,j={};o&&(j[o]=!0);var w=Object(T.useGetLanguageNames)(!0),R=i.useState(!1),C=c()(R,2),S=C[0],A=C[1],I=i.useContext(g.Environment).locale,V=Object(T.contentLangFromLocale)(I.code),G=u()(),L=function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?F(a,!0).forEach(function(t){n()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):F(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},r.languageCounts||{}),z=Object.values(L).reduce(function(e,t){return t+e},0)||0;L.all=z,V&&w.get(V)&&(L[V]=L[V]||0);var H=Object.keys(L).filter(function(e){return w.get(e)&&(L[e]||j[e]||"all"===e||e===V)}).sort(function(e,t){return L[t]-L[e]||e.localeCompare(t)}),K=H.findIndex(function(e){return j[e]}),W=H.length;if("dropdown"!==a&&W>5&&(W=4,K>=4)){var B=H[K];H.splice(K,1),K=3,H.splice(K,0,B)}var U=K>0?H[K]:"all",J=i.useCallback(function(e){m(e),x({module:"Reviews_Controls",action:"click_language",context:e}),A(!1),G({businessUnit:Object(s.getBUForPlaceType)(l),elementType:e,actionName:"REVIEW_FILTER_LANGUAGE"})},[m,x,G,l]),D=i.useMemo(function(){for(var e=[],t=[],a=function a(r){e.push(i.createElement("li",{className:"_3xKGJV3H",key:H[r]},i.createElement(_.RadioButton,{value:H[r],selected:H[r]===U,onSelect:function e(){return J(H[r])},label:i.createElement("span",{className:"_1jRVPvMu"},i.createElement("span",{className:"_1wvINOEk"},w.get(H[r])),!k(H[r],l)&&i.createElement("span",{className:"".concat("_265wfHg1")},"(",E.formatNumber("integer",L[H[r]]||0),")"))}))),H[r]===U&&"all"!==H[r]&&t.push({id:String(r),value:w.get(H[r]),active:!0})},r=0;r<W;++r)a(r);return[e,t]},[U,H,L,E,W,w,l,J]),q=c()(D,2),M=q[0],Q=q[1];if("dropdown"===a)return i.createElement(h.FilterGroup,{category:"reviews",textTitle:N.string("OwnerResponse_filter_languages_1"),itemsActive:Q,itemsVisible:i.createElement(_.RadioGroup,{name:"languageFilterChoices",labelId:"languageFilterLabel"},i.createElement("ul",{className:"_7irxco_a"},M))});var X=null;if(H.length>W){for(var Y=[],$=function e(t){Y.push(i.createElement("li",{className:"_3xKGJV3H",key:t},i.createElement(_.RadioButton,{value:H[t],selected:H[t]===U,onSelect:function e(){return J(H[t])},label:i.createElement("div",{className:"_3AWDKgb1"},w.get(H[t]),"Â ",!k(H[t],l)&&i.createElement("span",{className:"_265wfHg1"},"(",E.formatNumber("integer",L[H[t]]||0),")"))})))},Z=0;Z<H.length;++Z)$(Z);X=i.createElement(i.Fragment,{key:"moreLink"},S&&i.createElement(y.a,{onClose:function e(){return A(!1)}},i.createElement(_.RadioGroup,{name:"languageFilterChoices",labelId:"languageFilterLabel"},i.createElement("ul",{className:"_7irxco_a"},Y))),i.createElement("div",{onClick:function e(){return A(!0)},className:d()("_15-z2H31",n()({},"_2Pa0Ordk",Object(f.featureIsEnabled)("cx_brand_refresh_degreen")))},i.createElement(p.a,{id:"common_more_capital_ffffe27f"})," "))}return i.createElement(i.Fragment,null,i.createElement(O,{id:"languageFilterLabel",selectorString:"languageFilterHeader"},i.createElement(p.a,{id:"OwnerResponse_filter_languages_1"})),i.createElement(_.RadioGroup,{name:"languageFilterChoices",labelId:"languageFilterLabel"},i.createElement("ul",{className:"_7irxco_a","data-automation":"languageFilterBody"},M)),X)},N=a("@ta/core-ui.checkbox"),j=a.n(N),w={1:i.createElement(p.a,{id:"common_Terrible"}),2:i.createElement(p.a,{id:"common_Poor"}),3:i.createElement(p.a,{id:"common_Average"}),4:i.createElement(p.a,{id:"common_VeryGood"}),5:i.createElement(p.a,{id:"common_Excellent"})},R=function e(t){for(var a=t.displayType,r=t.reviewAggregations,l=t.rating,c=t.toggleRating,o=t.placeType,m=t.staticOnly,_=Object(v.useIntlFormatter)(),g=Object(b.useGARecorder)(),E=Object(v.useLocalize)().localize,y=u()(),T=r.ratingCounts,F=T.reduce(function(e,t){return e+t},0),k=[],x=[],N=!m,R=i.useCallback(function(e){y({businessUnit:Object(s.getBUForPlaceType)(o),elementType:String(e),actionName:"REVIEW_FILTER_TA_RATING",itemAttributes:{filter_value:l.indexOf(e)>-1?0:1}}),c(e);var t=String(e);g({module:"Reviews_Controls",action:"click_ta_rating",context:t,value:l.indexOf(e)>-1?0:1})},[y,o,l,g,c]),C=function e(t){var a=F>0?100*T[t-1]/F:0;k.push(i.createElement("li",{className:d()("_3xKGJV3H",n()({},"_2VX1lQvS",0===T[t-1])),key:t},N?i.createElement("div",{className:"_2Et3K2zk"},i.createElement(j.a,{label:i.createElement("span",{className:"".concat("_3AWDKgb1"," ").concat("_1BNyKKzN")},w[t]),value:"".concat(t),checked:l.indexOf(t)>-1,onToggle:function e(){R(t)},disabled:0===T[t-1]})):i.createElement("div",{className:"ywz_JYuW"},w[t]),i.createElement("span",{className:"_3bwfmhiy",onClick:function e(){T[t-1]>0&&R(t)}},i.createElement("span",{className:d()("_2e2_hFOI",n()({},"_1rH0E5b7",!N))},i.createElement("span",{className:d()("_1VHXsbMM",n()({},"LsmzMeyi",Object(f.featureIsEnabled)("cx_brand_refresh_degreen"))),style:{width:"".concat(a,"%")}}))),i.createElement("span",{className:"eqh_0ztw"},_.formatNumber("integer",T[t-1])))),l.indexOf(t)>-1&&x.push({id:String(t),value:w[t],active:!0})},S=Object.keys(w).length;S>=1;--S)C(S);return"dropdown"===a?i.createElement(h.FilterGroup,{category:"reviews",textTitle:E.string("common_Travelerrating"),itemsActive:x,itemsVisible:i.createElement("ul",{className:"_7irxco_a"},k)}):i.createElement(i.Fragment,null,i.createElement(O,{selectorString:"reviewRatingFilterHeader"},i.createElement(p.a,{id:"common_Travelerrating"})),i.createElement("ul",{className:"_7irxco_a","data-automation":"reviewRatingFilterBody"},k))},C=[[3,4,5],[6,7,8],[9,10,11],[12,1,2]],S=[i.createElement(p.a,{id:"season_mar_may_1cb3"}),i.createElement(p.a,{id:"season_jun_aug_1cb3"}),i.createElement(p.a,{id:"season_sep_nov_1cb3"}),i.createElement(p.a,{id:"season_dec_feb_1cb3"})],A=function e(t){for(var a=t.displayType,r=t.travelTime,n=t.toggleTravelTime,l=t.placeType,c=Object(b.useGARecorder)(),o=Object(v.useLocalize)().localize,m=u()(),d=[],f=[],_=i.useCallback(function(e){var t=r.find(function(e){return e.join(",")===r.join(",")});m({businessUnit:Object(s.getBUForPlaceType)(l),elementType:e.join(),actionName:"REVIEW_FILTER_TRAVEL_TIME",itemAttributes:{filter_value:t?0:1}}),c({module:"Reviews_Controls",action:"click_season",context:e.join(","),value:t?0:1}),n(e)},[m,l,c,n,r]),g=function e(t){var a=r.find(function(e){return e.join(",")===C[t].join(",")});d.push(i.createElement("li",{className:"_3xKGJV3H",key:t},i.createElement(j.a,{label:i.createElement("span",{className:"_3AWDKgb1"},S[t]),value:"".concat(t),checked:!!a,onToggle:function e(){return _(C[t])}}))),a&&f.push({id:String(t),value:S[t],active:!0})},E=0;E<C.length;++E)g(E);return"dropdown"===a?i.createElement(h.FilterGroup,{category:"reviews",textTitle:o.string("p13n_time_of_year"),itemsActive:f,itemsVisible:i.createElement("ul",{className:"_7irxco_a"},d)}):i.createElement(i.Fragment,null,i.createElement(O,{selectorString:"travelerTimeFilterHeader"},i.createElement(p.a,{id:"p13n_time_of_year"})),i.createElement("ul",{className:"_7irxco_a","data-automation":"travelerTimeFilterBody"},d))},I={Family:i.createElement(p.a,{id:"favorite_review_travelertype_families"}),Couples:i.createElement(p.a,{id:"favorite_review_travelertype_couples"}),Solo:i.createElement(p.a,{id:"favorite_review_travelertype_solo"}),Business:i.createElement(p.a,{id:"favorite_review_travelertype_business"}),Friends:i.createElement(p.a,{id:"favorite_review_travelertype_friends"})},V=function e(t){for(var a=t.displayType,r=t.travelType,n=t.toggleTravelType,l=t.placeType,c=Object(b.useGARecorder)(),o=Object(v.useLocalize)().localize,m=u()(),d=[],f=[],_=i.useCallback(function(e){c({module:"Reviews_Controls",action:"click_traveler_filter",context:e,value:r.indexOf(e)>-1?0:1}),m({businessUnit:Object(s.getBUForPlaceType)(l),elementType:e,actionName:"REVIEW_FILTER_TRAVEL_TYPE",itemAttributes:{filter_value:r.indexOf(e)>-1?0:1}}),n(e)},[m,l,c,n,r]),g=function e(t){var a=Object.values(I)[t];d.push(i.createElement("li",{className:"_3xKGJV3H",key:t},i.createElement(j.a,{label:i.createElement("span",{className:"".concat("_3AWDKgb1")},a),value:Object.keys(I)[t],checked:r.includes(Object.keys(I)[t]),onToggle:function e(){return _(Object.keys(I)[t])}}))),r.includes(I[t])&&f.push({id:String(t),value:I[t],active:!0})},E=0;E<Object.keys(I).length;++E)g(E);return"dropdown"===a?i.createElement(h.FilterGroup,{category:"reviews",textTitle:o.string("traveler_type"),itemsActive:f,itemsVisible:i.createElement("ul",{className:"_7irxco_a"},d)}):i.createElement(i.Fragment,null,i.createElement(O,{selectorString:"travelerTypeFilterHeader"},i.createElement(p.a,{id:"traveler_type"})),i.createElement("ul",{className:"_7irxco_a","data-automation":"travelerTypeFilterBody"},d))},G=a("@ta/core-ui.icon"),L=a.n(G),P=a("@ta/input.text-input"),z=function e(t){var a=t.query,r=t.setQuery,l=t.clearQuery,c=t.placeType,o=Object(b.useGARecorder)(),m=Object(v.useLocalize)().localize,_=u()(),g=i.useCallback(function(e,t){r(t),o({module:"Reviews_Controls",action:"click_search",context:t}),_({businessUnit:Object(s.getBUForPlaceType)(c),elementType:t,actionName:"HR_REVIEW_SEARCH"})},[r,o,_,c]),p=i.useCallback(function(e,t){r(t)},[r]),E=i.useCallback(function(e,t){"Enter"===e.key&&g(e,t)},[g]);return i.createElement("div",{className:d()("gcEZ6mhd",n()({},"_9nTF1inH",Object(f.featureIsEnabled)("cx_brand_refresh_degreen"))),"data-automation":"reviewsSearchBox"},i.createElement("div",{className:"_2VhjKZLs"},i.createElement(L.a,{name:"search",color:Object(f.featureIsEnabled)("cx_brand_refresh_degreen")?"black":"accessibleGreen",fontSize:20})),i.createElement(P.TextInput,{className:"kqcL_F3o",placeholder:m.string("Search_reviews_248"),value:a,onChange:p,onKeyUp:E,onBlur:g}),a&&i.createElement("span",{onClick:l,className:"_2_-ObaWP"},i.createElement(L.a,{name:"times-circle-fill",color:Object(f.featureIsEnabled)("cx_brand_refresh_degreen")?"black":"accessibleGreen"})))},H=function e(t){var a=t.availableKeywords,r=t.keywordsSelected,l=t.clearKeywords,c=t.addKeyword,o=t.removeKeyword,m=t.placeType,_=Object(b.useGARecorder)(),g=u()(),v=i.useCallback(function(){0!==r.length&&l()},[r,l]),E=i.useCallback(function(e){var t=r.indexOf(e)>=0;t?o(e):c(e),g({businessUnit:Object(s.getBUForPlaceType)(m),elementType:e,actionName:"REVIEW_FILTER_TAG_CLOUD",itemAttributes:{filter_value:t?0:1}}),_({module:"Reviews_Controls",action:"click_tag_cloud",context:e,value:t?0:1})},[c,r,g,m,_,o]),y=[],h=i.useCallback(function(e){e&&e.detail>0&&e.currentTarget&&e.currentTarget.blur(),v()},[v]);if(a.length>0){var T=a.slice(0,22);0===r.length?y.push(i.createElement("button",{className:d()("u0qUrVmn","_1z7-P3WF",n()({},"_2ENJrPc2",Object(f.featureIsEnabled)("cx_brand_refresh_degreen"))),key:"*"},i.createElement(p.a,{id:"airm_all_reviews"}))):y.push(i.createElement("button",{className:d()("u0qUrVmn","_1cbIb7G2",n()({},"_2ENJrPc2",Object(f.featureIsEnabled)("cx_brand_refresh_degreen"))),key:"*",onClick:h},i.createElement(p.a,{id:"airm_all_reviews"}))),T.forEach(function(e){var t;if(e){var a=r.indexOf(e)>=0;y.push(i.createElement("button",{className:d()("u0qUrVmn",(t={},n()(t,"_1z7-P3WF",a),n()(t,"_1cbIb7G2",!a),n()(t,"_2ENJrPc2",Object(f.featureIsEnabled)("cx_brand_refresh_degreen")),t)),key:e,onClick:function t(a){a&&a.detail>0&&a.currentTarget&&a.currentTarget.blur(),E(e)}},e))}})}return i.createElement(i.Fragment,null,a.length>0&&i.createElement(O,{selectorString:"keywordFilterHeader"},i.createElement(p.a,{id:"community_popular_mentions"})),i.createElement("div",{className:"_3QEHvmAb","data-automation":"keywordFilterBody"},y))},K=a("@ta/filters.selection-pills"),W=a.n(K),B=function e(t){var a=t.showOverlay,r=t.ratingFilterValue,n=t.clearRatingFilter,l=t.travelTypeFilterValue,c=t.clearTravelTypeFilterValue,o=t.travelTimeFilterValue,s=t.clearTravelTimeFilterValue,u=t.languageFilterValue,m=t.clearLanguageFilterValue,d=t.queryFilterValue,f=t.clearQueryFilterValue,_=Object(v.useLocalize)().localize,g=Object(T.useGetLanguageNames)(!0),b=[];return r&&function e(t){return t.map(function(e){return{index:0,param:"rating",value:String(e),label:w[e],tracker:""}})}(r).forEach(function(e){return b.push(e)}),l&&function e(t){return t.map(function(e){return{index:0,param:"travelType",value:e,label:I[e],tracker:""}})}(l).forEach(function(e){return b.push(e)}),o&&function e(t){return t.map(function(e){var t=C.findIndex(function(t){return t.join(",")===e.join(",")});return{index:0,param:"travelTime",value:e.join(","),label:S[t],tracker:""}})}(o).forEach(function(e){return b.push(e)}),u&&"all"!==u&&function e(t,a){return[{index:0,param:"language",value:t,label:a.get(t)||"",tracker:""}]}(u,g).forEach(function(e){return b.push(e)}),d&&function e(t){return[{index:0,param:"query",value:t,label:t,tracker:""}]}(d).forEach(function(e){return b.push(e)}),i.createElement("div",{className:"_2eQSoVWk"},i.createElement("div",{className:"_26Xy2--6"},i.createElement(p.a,{id:"hs_selected_filters"})),i.createElement(W.a,{actions:[{label:_.string("filter_ffffe84e"),chevron:!0,onClick:a,tracker:""}],selections:b,onClearSelection:function e(t,a){switch(t){case"rating":var r=Number.parseInt(a,10);!n||1!==r&&2!==r&&3!==r&&4!==r&&5!==r||n(r);break;case"travelType":!c||"Family"!==a&&"Couples"!==a&&"Solo"!==a&&"Business"!==a&&"Friends"!==a||c(a);break;case"travelTime":if(s&&("3,4,5"===a||"6,7,8"===a||"9,10,11"===a||"12,1,2"===a)){var l=a.split(",").map(function(e){return Number.parseInt(e,10)});s(l)}break;case"language":m&&m();break;case"query":f&&f()}}}))},U=a("@ta/overlays.tooltip"),J=a.n(U),D=[!0],q=function e(t){var a=t.displayType,r=t.reviewAggregations,n=t.healthSafety,l=t.toggleHealthSafety,s=Object(i.useState)(0),u=c()(s,2),m=u[0],d=u[1],f=Object(b.useGARecorder)(),_=Object(v.useLocalize)().localize;(null==r?void 0:r.alertStatusCount)&&m!==(null==r?void 0:r.alertStatusCount)&&d(r.alertStatusCount||0);var g=function e(t){return[o.a.createElement(p.a,{id:"hs_safety_filter",args:{0:t}})]}(m),E=o.a.useMemo(function(){for(var e=[],t=[],a=function a(r){e.push(o.a.createElement("li",{className:"_3xKGJV3H",key:r},o.a.createElement(j.a,{label:o.a.createElement("span",{className:"_3AWDKgb1"},g[r]),value:D[r].toString(),checked:n.includes(D[r]),onToggle:function e(){return function e(t){l(t),f({module:"Reviews_Controls",action:"click_health_safety",context:t.toString(),value:n.indexOf(t)>-1?1:0})}(D[r])}}))),n.includes(D[r])&&t.push({id:String(r),value:g[r],active:!0})},r=0;r<D.length;++r)a(r);return[e,t]},[f,n,l,g]),y=c()(E,2),T=y[0],F=y[1];return"dropdown"===a?o.a.createElement(h.FilterGroup,{category:"reviews",textTitle:_.string("hs_traveler_safety_title"),itemsActive:F,itemsVisible:o.a.createElement("ul",{className:"_7irxco_a"},T)}):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"_3Mm9TQ9M"},o.a.createElement(O,null,o.a.createElement(p.a,{id:"hs_traveler_safety_title"})),o.a.createElement(J.a,{below:!0,message:o.a.createElement(p.a,{id:"hs_safety_tooltip"}),maxWidth:222,alignEdge:"left",shiftX:-50,shiftArrow:-8,toggleOnTouch:!0},function(e){return o.a.createElement("span",{ref:e,className:"_3QVT8g6W"},o.a.createElement(L.a,{name:"information-circle"}))})),o.a.createElement("ul",{className:"_7irxco_a","data-automation":"healthSafetyFilterBody"},T))};a.d(t,"LanguageFilter",function(){return x}),a.d(t,"ReviewRatingFilter",function(){return R}),a.d(t,"TravelTimeFilter",function(){return A}),a.d(t,"TravelerTypeFilter",function(){return V}),a.d(t,"SearchBoxFilter",function(){return z}),a.d(t,"KeywordFilter",function(){return H}),a.d(t,"SelectedFilters",function(){return B}),a.d(t,"HealthSafetyFilter",function(){return q}),t.default={}}}});
//# sourceMappingURL=reviews.filters-ui.b92eee8888.js.map