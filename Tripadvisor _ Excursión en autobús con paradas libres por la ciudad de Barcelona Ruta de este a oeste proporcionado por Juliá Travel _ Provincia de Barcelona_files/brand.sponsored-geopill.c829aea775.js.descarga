($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/brand.sponsored-geopill",d:["vendor-babel","vendor-react-libs","@ta/cpm.gpt-ad","@ta/common.features"],e:["./packages/brand/sponsored-geopill/sponsored-geopill.jsx"],m:{"./packages/brand/sponsored-geopill/sponsored-geopill.jsx":function(e,t,s){"use strict";s.r(t);var r=s("@babel/runtime/helpers/esm/classCallCheck"),a=s.n(r),n=s("@babel/runtime/helpers/esm/createClass"),o=s.n(n),i=s("@babel/runtime/helpers/esm/possibleConstructorReturn"),l=s.n(i),p=s("@babel/runtime/helpers/esm/getPrototypeOf"),d=s.n(p),c=s("@babel/runtime/helpers/esm/assertThisInitialized"),u=s.n(c),m=s("@babel/runtime/helpers/esm/inherits"),f=s.n(m),h=s("@babel/runtime/helpers/esm/defineProperty"),b=s.n(h),g=s("react"),k=s.n(g),S=s("@ta/cpm.gpt-ad"),P=s("@ta/common.features"),T=function(e){function t(e){var s;return a()(this,t),s=l()(this,d()(t).call(this,e)),b()(u()(s),"updateSponsorData",function(e){s.state.listeners.forEach(function(t){return t(e)}),s.setState({listeners:[],sponsorData:e})}),b()(u()(s),"isSponsoredGeopillEnabled",function(){return Object(P.featureIsEnabled)("where_to_top_featured_destination")}),b()(u()(s),"fetchAds",function(){!s.state.dfpRequested&&s.isSponsoredGeopillEnabled()&&(s.setState({dfpRequested:!0}),Object(S.listenToCpmMessage)("whereToSponsor",function(e){if(!s.state.sponsorData){var t=e.sponsorName,r=e.sponsorParentGeoName,a=e.pinGeoId,n=e.clickTracker,o=e.thirdPartyClickTrackerURL,i=e.impressionTrackerURL;s.updateSponsorData({name:t,location_id:a,ancestors:(r||"").split(",").map(function(e){return e.trim()}),dfpTrackingUrl:n,thirdPartyClickTrackerURL:o}),s.setState({impressionTrackerURL:i})}}),s.setState({loadAd:!0}))}),b()(u()(s),"sponsorDataProvider",function(e){s.state.sponsorData?"function"==typeof e&&e(s.state.sponsorData):(s.fetchAds(),"function"==typeof e&&s.state.listeners.push(e))}),s.state={dfpRequested:!1,loadAd:!1,listeners:[],impressionTrackerURL:""},s}return f()(t,e),o()(t,[{key:"render",value:function e(){var t=this.state.loadAd,s=this.props,r=s.children,a=s.adAreaId,n={pos:a,kw:"lure"};return k.a.createElement(k.a.Fragment,null,this.isSponsoredGeopillEnabled()?k.a.createElement(k.a.Fragment,null,t&&k.a.createElement(S.GptAd,{size:"3x1",position:a,slotTargeting:n,slotConfig:{disableSlotPrebid:!0,disableSlotRefresh:!0},className:S.adStyles.dataPixel}),this.state.impressionTrackerURL&&k.a.createElement("iframe",{title:"Third Party iframe",src:this.state.impressionTrackerURL,height:"0",width:"0",hidden:!0})):null,r(this.isSponsoredGeopillEnabled()?this.sponsorDataProvider:null))}}]),t}(k.a.Component);s.d(t,"GeoPillSponsor",function(){return T})}}});
//# sourceMappingURL=brand.sponsored-geopill.c829aea775.js.map