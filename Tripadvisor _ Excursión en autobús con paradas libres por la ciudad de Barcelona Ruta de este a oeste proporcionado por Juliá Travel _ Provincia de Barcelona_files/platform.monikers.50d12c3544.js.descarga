($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/platform.monikers",d:["vendor-react-libs","vendor-babel","lithium-platform"],e:["./packages/platform/monikers/index.jsx"],m:{"./packages/platform/monikers/index.jsx":function(e,n,t){"use strict";t.r(n);var r=t("react"),a=t("@babel/runtime/helpers/esm/toConsumableArray"),o=t.n(a),i=t("@babel/runtime/helpers/esm/slicedToArray"),l=t.n(i),u=t("@ta/platform.tti"),c=t("@ta/lithium.context"),s=r.createContext(null),d=function e(n){var t=l()(n,2),r=t[0],a=t[1];return"string"==typeof a||"number"==typeof a?[[r,"".concat(a)]]:"boolean"==typeof a?[[r,a?"true":"false"]]:[]},f=function e(n,t){switch(t.type){case"startLoadingMoniker":return{monikers:[].concat(o()(n.monikers),[t.payload]),loaded:n.loaded};case"finishLoadingMoniker":return n.loaded.add(t.payload),{monikers:n.monikers,loaded:n.loaded};default:throw new Error("Attempted to dispatch an action with a type that does not exist")}},m=r.memo(function(e){return e.children}),p=function e(n){var t=n.config,a=(n.suppressConfigWarnings,n.children),i=r.useReducer(f,{monikers:[],loaded:new WeakSet}),p=l()(i,2),k=p[0],g=p[1],h=r.useContext(c.Route),y=l()(h,2),b=y[0].path,v=y[1].uid,x=r.useContext(c.Environment),C=x.locale.code,w=x.domainName,E=r.useRef(new Set),P=r.useRef(0),T=r.useCallback(function(e){P.current++;var n="string"==typeof e?e:e.type,r="string"==typeof e?{}:e.payload,a=(null==t?void 0:t.servlet)||null,i=(null==t?void 0:t.fullPageUrl)||"https://".concat(w).concat(b),l=document.referrer||null,u=document.title||null,c=[].concat(o()(Object.entries(r)),[["servlet",a],["fullPageUrl",i],["path","/Unknown"!==b?b:null],["puid",v],["referringUrl",l],["pageTitle",u],["localeTag",C],["pixelType",n],["lithium",!t]]).flatMap(d),s="/PageMoniker?".concat(new URLSearchParams(c).toString());g({type:"startLoadingMoniker",payload:[v,n,s]})},[t,w,b,v,C]);return r.useEffect(function(){return function(){E.current.forEach(function(e){return Object(u.cancelTTICallback)(e)})}},[]),r.createElement(r.Fragment,null,r.createElement(s.Provider,{value:T},r.createElement(m,null,a)),k.monikers.map(function(e,n){var t=l()(e,3),a=t[0],o=t[1],i=t[2];return k.loaded.has(e)&&a!==v?null:r.createElement("iframe",{"data-moniker-type":o,"aria-hidden":"true",tabIndex:"-1",className:"_15gGlX5W",src:i,key:"".concat(n).concat(i),onLoad:function n(t){g({type:"finishLoadingMoniker",payload:e});var r=t.target.contentWindow,a=Object(u.requestTTICallback)(function(e){r.postMessage("TimeToInteractive:".concat(e||"null"),"*"),E.current.delete(a)});E.current.add(a)}})}))},k=function e(n){var t=r.useContext(s);return r.useCallback(function(){return new Promise(function(e){t?t(n,e):e(null)})},[t,n])},g=new Set,h=function e(n){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=r.useContext(c.Route),o=l()(a,2)[1].uid,i=k({type:"PAGEVIEW",payload:n||{}}),u=r.useRef(i);r.useEffect(function(){u.current=i},[i]),r.useEffect(function(){t&&!g.has(o)&&(u.current(),g.add(o))},[o,t])};t.d(n,"usePixelCallback",function(){return k}),t.d(n,"usePageViewMoniker",function(){return h}),t.d(n,"MonikerConfiguration",function(){return p})}}});
//# sourceMappingURL=platform.monikers.50d12c3544.js.map