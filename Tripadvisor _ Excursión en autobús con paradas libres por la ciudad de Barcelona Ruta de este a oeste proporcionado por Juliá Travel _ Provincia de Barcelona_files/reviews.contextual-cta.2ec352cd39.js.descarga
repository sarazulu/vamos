($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/reviews.contextual-cta",d:["vendor-react-libs","vendor-babel","@ta/reviews.context","lithium-common","lithium-platform","@ta/common.features","@ta/reviews.types","@ta/platform.interactions","@ta/overlays.popover","@ta/reviews.photos","@ta/reviews.questions","@ta/login.login"],e:["./packages/reviews/contextual-cta/index.jsx"],m:{"./packages/reviews/contextual-cta/index.jsx":function(e,t,n){"use strict";n.r(t);var a=n("react"),o=function e(t){var n=t.locationId,o=t.geoId,c=t.writeUserReviewUrl,r=t.onClick,i=t.children,l=t.selectorString;if(n<=0||o<=0)return null;var s=c||"/UserReview-g".concat(o,"-d").concat(n);return a.createElement("a",{"data-automation":"".concat(l||"warButton"),href:s,target:"_blank",onClick:r},i)},c=n("@babel/runtime/helpers/esm/slicedToArray"),r=n.n(c),i=n("@babel/runtime/helpers/esm/defineProperty"),l=n.n(i),s=n("@ta/reviews.context"),u=n("@ta/core-ui.button"),m=n.n(u),d=n("@ta/common.classnames"),_=n.n(d),g=n("@ta/common.features"),p=n("@ta/core-ui.icon"),f=n.n(p),v=n("@ta/platform.i18n"),w=n.n(v),I=n("@ta/reviews.types"),E=n("@ta/platform.interactions"),k=n("@ta/overlays.popover"),b=n.n(k),x=function e(t){return t?a.createElement(w.a,{id:"attractions_community_content_cta_finish_your_review"}):a.createElement(w.a,{id:"attractions_community_content_cta_write_a_review"})},C=function e(t){var n=t.trackingContext,c=t.isLoggedIn,r=t.geoId,i=t.locationId,l=t.hasDraft,s=t.writeUserReviewUrl,u=Object(E.useGARecordCallback)({module:"contextual_cta_button_review",action:"click",context:c?"".concat(n,"|LoggedIn"):n});return a.createElement(o,{locationId:i,geoId:r,writeUserReviewUrl:s,onClick:u,selectorString:"writeReviewButton"},a.createElement(m.a,{elementType:"span"},a.createElement("span",{className:"_3dqzLydx"},x(l))))},y=function e(t){var n=t.trackingContext,c=t.isLoggedIn,r=t.geoId,i=t.locationId,s=t.hasDraft,u=t.writeUserReviewUrl,m=Object(E.useGARecordCallback)({module:"contextual_cta_dropdown_review",action:"click",context:c?"".concat(n,"|LoggedIn"):n});return a.createElement(o,{locationId:i,geoId:r,writeUserReviewUrl:u,onClick:m,selectorString:"writeReviewDropDownItem"},a.createElement("span",{className:_()("_1JHDR8fz",l()({},"x4-iPy2Z",Object(g.featureIsEnabled)("cx_brand_refresh_degreen")))},a.createElement("span",{className:"_2zmNNdg9"},a.createElement(f.a,{name:"pencil-paper"})),a.createElement("span",{className:"gX_Lvoy8"},x(s))))},h=n("@ta/reviews.questions"),R=n("@ta/login.login"),U=n.n(R),T=function e(t){var n=t.placeType,o=t.trackingContext,c=t.onClose,i=U()(),l=a.useState(!1),s=r()(l,2),u=s[0],d=s[1],_=Object(E.useGARecordCallback)({module:"contextual_cta_button_question",action:"click",context:o||""}),g=a.useCallback(function(){d(!1),c&&c()},[c]);return a.createElement("div",{className:"_1u21xsUK","data-automation":"askQuestionButton"},a.createElement(m.a,{fullWidth:!0,onClick:function e(){i({}).then(function(){d(!0),_()})}},a.createElement(w.a,{id:"attractions_community_content_cta_ask_a_question"})),u&&a.createElement(h.QuestionFormModal,{onCancel:g,onSubmit:g,placeType:n}))},N=function e(t){var n=t.placeType,o=t.trackingContext,c=t.onClose,i=U()(),s=a.useState(!1),u=r()(s,2),m=u[0],d=u[1],p=Object(E.useGARecordCallback)({module:"contextual_cta_dropdown_question",action:"click",context:o||""}),v=a.useCallback(function(){d(!1),c&&c()},[c]);return a.createElement(a.Fragment,null,a.createElement("span",{className:"_1PsbSzGF","data-automation":"askQuestionDropDownItem",onClick:function e(){i({}).then(function(){d(!0),p()})}},a.createElement("span",{className:_()("jszyUrID",l()({},"_3acfLCCx",Object(g.featureIsEnabled)("cx_brand_refresh_degreen")))},a.createElement("span",{className:"Jhl3lR8L"},a.createElement(f.a,{name:"forums"})),a.createElement("span",{className:"kE9xm-7O"},a.createElement(w.a,{id:"attractions_community_content_cta_ask_a_question"})))),m&&a.createElement(h.QuestionFormModal,{onCancel:v,onSubmit:v,placeType:n}))},j=n("@ta/reviews.photos"),O=n.n(j),D=function e(t){var n=t.trackingContext,o=t.geoId,c=t.locationId,r=Object(E.useGARecordCallback)({module:"contextual_cta_dropdown_photo",action:"click",context:n});return a.createElement("span",{className:_()("eVq4d46I",l()({},"_2ao4lRo-",Object(g.featureIsEnabled)("cx_brand_refresh_degreen"))),"data-automation":"postPhotoDropDownItem",onClick:function e(){return O()(o,c,r)}},a.createElement("span",{className:"FjipHUvL"},a.createElement(f.a,{name:"camera-fill"})),a.createElement("span",{className:"_253Xbf5p"},a.createElement(w.a,{id:"attractions_community_content_cta_post_a_photo"})))},L=function e(t){var n=t.locationId,o=Object(E.useGARecordCallback)({module:"owner_cta",action:"owner_visit_mc_middle",context:n.toString()});return a.createElement("a",{href:"/ManagementCenter-d".concat(n)},a.createElement(m.a,{theme:"primary",onClick:o,elementType:"span"},a.createElement(w.a,{id:"restaurant_owners_visit_your_owner_mangement_center"})))},A=function e(t){var n=t.trackingContext,o=t.isLoggedIn,c=t.geoId,r=t.locationId,i=t.hasDraft,s=t.writeUserReviewUrl,u=t.placeType,m=Object(E.useGARecordCallback)({module:"contextual_cta_dropdown",action:"toggle",context:n});return a.createElement(b.a,{below:!0,arrowType:"none",closeButton:!1,fullBleed:!0,alignEdge:"right",contents:function e(t){return a.createElement(a.Fragment,null,a.createElement("div",{className:"_1Yd6VvIz",onClick:t},a.createElement(y,{trackingContext:n,isLoggedIn:o,geoId:c,locationId:r,hasDraft:i,writeUserReviewUrl:s})),a.createElement("div",{className:"_1Yd6VvIz",onClick:t},a.createElement(D,{trackingContext:n,geoId:c,locationId:r})),a.createElement("div",{className:"_1Yd6VvIz"},a.createElement(N,{placeType:u,trackingContext:n,onClose:t})))}},function(e,t,n,o){return a.createElement("div",{ref:e,className:_()("zhrpRsTQ",l()({},"_1dFpy1ER",Object(g.featureIsEnabled)("cx_brand_refresh_degreen"))),"data-automation":"contextualCTADropDownArrow",onClick:o?function(){m(),n()}:function(){m(),t()}},a.createElement(f.a,{name:o?"caret-up":"caret-down"}))})},S=function e(t){var n=Object(s.useHasDraftReview)({locationId:t.locationId}),o=Object(s.useLocationCommunityContent)({locationId:t.locationId}),c=r()(o,1)[0],i=c.fetching,l=c.data;if(i||!l||!l.locations||!l.locations[0])return null;var u=l&&l.locations&&l.locations[0],m=u.currentUserOwnerStatus,d=u.topicCount,g=u.reviewSummary,p=u.writeUserReviewUrl,f=u.placeType,v=null==m?void 0:m.isValid,w=(null==g?void 0:g.count)||0;return 0===d&&0===w?null:v?a.createElement(L,{locationId:t.locationId}):a.createElement("div",{className:_()("_18E1OnxI","PGaOa1jk")},a.createElement(function e(o){var c=o.selectedTab;return c&&c!==I.QUESTIONS_TAB?a.createElement(C,{trackingContext:t.trackingContext,isLoggedIn:t.isLoggedIn,geoId:t.geoId,locationId:t.locationId,hasDraft:n,writeUserReviewUrl:p}):a.createElement(T,{placeType:f,trackingContext:t.trackingContext})},{selectedTab:t.selectedTab}),a.createElement(A,{trackingContext:t.trackingContext,isLoggedIn:t.isLoggedIn,geoId:t.geoId,locationId:t.locationId,hasDraft:n,writeUserReviewUrl:p,placeType:f}))};n.d(t,"WARButton",function(){return o}),n.d(t,"ContextualCTA",function(){return S}),n.d(t,"AskAQuestionButton",function(){return T})}}});
//# sourceMappingURL=reviews.contextual-cta.2ec352cd39.js.map