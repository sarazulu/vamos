($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/search.typeahead",d:["vendor-babel","vendor-react-libs","@ta/platform.routing","@ta/common.features","lithium-platform","vendor-urql","@ta/common.text-html","@ta/common.client","lithium-common","@ta/modal.core","@ta/common.localstorage"],e:["./packages/search/typeahead/Typeahead.jsx"],m:{"./packages/search/typeahead/Typeahead.jsx":function(e,t,n){"use strict";n.r(t);var a=n("@babel/runtime/helpers/esm/slicedToArray"),i=n.n(a),l=n("react"),r=n.n(l),o=n("@babel/runtime/helpers/esm/defineProperty"),s=n.n(o),d=n("@ta/common.classnames"),u=n.n(d),c=n("@ta/common.client"),m=n("@ta/common.is-visible"),v=n("@ta/core-ui.icon"),k=n.n(v),g=n("@ta/lithium.context"),p=n("@ta/platform.i18n"),S=n("@ta/modal.core"),y=n("@ta/media.image"),h=function e(t){var n,a=t.result,o=t.selected,d=void 0!==o&&o,c=t.onClick,m=void 0===c?function(){}:c,v=t.onHover,S=a.title,h=a.image,b=a.url,f=a.details,N=Object(p.useLocalize)().localize,O=Object(l.useCallback)(function(e){return m(a,e)},[m,a]),_="auto";Object(l.useContext)(g.Environment).locale.isRtl&&(_="ltr");var T=function e(t){var n,a=Object(p.useLocalize)().localize,i=Object(l.useCallback)(function(e){switch(e){case"HOTEL":return a("common_Hotels");case"RESTAURANT":return a("common_Restaurants");case"ATTRACTION":return a("common_Thingstodo");default:return""}},[a]),r=t.title,o=t.details,s=t.subtitle;return"USER"===o.type&&null!=s&&null!=o.followerCount&&(n=!0===o.following?a("social_nowFollowing"):a("social_nCount_followers2",{0:o.followerCount}),s=a("m2_trips_detail_date_display",{0:s,1:n})),"SEARCH"===o.type?[a("see_all_results_for",{query:r}),s]:"LIST_RESULT"===o.type&&null!=o.listResultType?[a("m2_trips_detail_date_display",{0:i(o.listResultType),1:r}),s]:[r,s]}(a),R=i()(T,2),I=R[0],E=R[1];return"SEARCH"===f.type?r.a.createElement("a",{className:"Fdx628qR",href:b,onClick:O,onMouseOver:v,onFocus:v,"data-test-attribute":"typeahead-search"},I):r.a.createElement("a",{className:u()("bY-HBBDv",s()({},"_2S2LhMFD",d)),title:S,href:b,onClick:O,onMouseOver:v,onFocus:v,"data-test-attribute":"typeahead-result"},("LOCATION"===f.type||"SPONSORED_LOCATION"===f.type||"USER"===f.type||"LIST_RESULT"===f.type)&&r.a.createElement("div",{className:u()("PMEEKyil",(n={},s()(n,"_33DVI8LJ","LOCATION"===f.type||"SPONSORED_LOCATION"===f.type),s()(n,"_25JhQQYM","USER"===f.type),n))},r.a.createElement("div",{className:"oSJlm8m-"},r.a.createElement(k.a,{name:"LOCATION"===f.type||"SPONSORED_LOCATION"===f.type?"map-pin-fill":"member-fill",color:"gray1",fontSize:20})),null!=h&&r.a.createElement("div",{className:"_1Kik-lwQ"},r.a.createElement(y.ResponsiveImage,{sources:h,width:"42px",height:"42px",ssrContainerDimensions:{clientWidth:42,clientHeight:42}}))),r.a.createElement("div",{className:"_2mEKAhC-"},r.a.createElement("div",{className:u()("_2oYoDbfY",s()({},"_1E74Pkjc","SEARCH_SUGGESTION"===f.type))},I,"SPONSORED_LOCATION"===f.type&&r.a.createElement("span",{className:"_1PzlDpzj"},N("social_mobile_reason_for_sponsored")),"USER"===f.type&&f.verified&&r.a.createElement("span",{className:"_1pSUFgEX"},r.a.createElement(k.a,{name:"verified-checkmark-fill",color:"taGreen",fontSize:16}))),null!=E&&r.a.createElement("div",{className:"_1EbEjClF",dir:_},E)))},b=Object(l.memo)(function e(t){var n,a=t.color,i=void 0===a?"white":a,o=t.styleVariant,d=void 0===o?"box":o,v=t.overlayVariant,y=void 0===v?"none":v,b=t.placeholderText,f=t.resultsPlaceholder,N=t.query,O=void 0===N?"":N,_=t.displayedQuery,T=void 0===_?"":_,R=t.scope,I=void 0===R?{geoId:0}:R,E=t.onChange,C=void 0===E?function(){}:E,F=t.onOpen,A=t.onClose,L=t.onFocus,j=t.onBlur,w=t.onKeyDown,U=t.onSubmit,D=t.onResultHovered,P=t.onResultClicked,H=t.isOpen,x=t.isLoading,G=t.selectedIndex,V=t.results,M=void 0===V?[]:V,z=t.searchSessionId,Q=void 0===z?"":z,q=t.testAttribute,B=void 0===q?"":q,J=Object(p.useLocalize)().localize,Y=Object(l.useContext)(g.Device).viewportCategory,K=Object(l.useRef)(),W=Object(l.useRef)(),X=I&&"number"==typeof I.geoId&&I.geoId>1,Z=I&&"number"==typeof I.latitude&&"number"==typeof I.longitude,$=Object(l.useRef)(A);$.current=A;var ee=Object(m.useVisibleEffect)(function(e){e||null==$.current||(W.current&&W.current.blur(),$.current())}),te=Object(l.useCallback)(function(e){return C(e.currentTarget.value)},[C]),ne=Object(l.useCallback)(function(){C(""),W.current&&W.current.focus()},[C]),ae="MOBILE"===Y&&H,ie=Object(l.useCallback)(function(){ae&&W.current&&W.current.blur()},[ae]);return Object(S.useBlockScroll)(ae,!1),Object(c.useClientSideLayoutEffect)(function(){var e=W.current,t=K.current;H&&null!=e&&null!=t&&e.focus()},[H]),"expanding"!==d&&"expanding_right"!==d||"MOBILE"!==Y||H?r.a.createElement("div",{ref:K,className:u()("i3bZ_gBa",(n={},s()(n,"_2RTs3_Ee",H),s()(n,"_2vChPWwI","gray"===i),s()(n,"_3TPJs5_m","box"===d),s()(n,"_1RBnVZdn","underlined"===d),s()(n,"_1KTTRnER","expanding"===d),s()(n,"_1l0GdtUl","expanding_right"===d),s()(n,"_1mOv9xe7","heroSearchNarrow"===y),s()(n,"_3awdcWrG","topCentered"===y),n)),onTouchMove:ie,"data-test-attribute":B},r.a.createElement("div",{className:"_3sXsAqz5",onClick:A}),r.a.createElement("form",{className:"R1IsnpX3",action:"/Search",onFocus:L,onBlur:j,onInvalid:function e(t){return t.preventDefault()},onSubmit:U,ref:ee},r.a.createElement("input",{ref:W,type:"search",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",required:!0,name:"q",className:u()("_3qLQ-U8m",s()({},"_3TADk3fX",0!==O.length)),placeholder:b,title:J.string("common_Search"),"aria-label":J.string("common_Search"),value:T,onChange:te,onKeyDown:w}),r.a.createElement("input",{type:"hidden",name:"searchSessionId",value:Q}),r.a.createElement("input",{type:"hidden",name:"searchNearby",value:Z}),r.a.createElement("input",{type:"hidden",name:"latitude",value:(null==I?void 0:I.latitude)||""}),r.a.createElement("input",{type:"hidden",name:"longitude",value:(null==I?void 0:I.longitude)||""}),X&&r.a.createElement("input",{type:"hidden",name:"geo",value:null==I?void 0:I.geoId}),r.a.createElement("button",{type:"button",className:"".concat("_3mLX8jwB"," ").concat("_3djzE9Mn"),title:J.string("mobile_back_8e0"),"aria-label":J.string("mobile_back_8e0"),onClick:A},r.a.createElement(k.a,{name:"arrow-left"})),0!==O.length&&r.a.createElement("button",{type:"button",className:"".concat("_3mLX8jwB"," ").concat("_3ecPvWgn"),title:J.string("mobile_search_filter_clear_26e8"),"aria-label":J.string("mobile_search_filter_clear_26e8"),onClick:ne},r.a.createElement(k.a,{name:"times"})),r.a.createElement("button",{type:"submit",formAction:"/Search",className:"".concat("_3mLX8jwB"," ").concat("_2a_Ua4Qv"),title:J.string("common_Search"),"aria-label":J.string("common_Search")},x?r.a.createElement("svg",{className:"_2x7VRITB",viewBox:"0 0 20 20"},r.a.createElement("path",{className:"_1lLaBydz",d:"M 10 2 A 8 8 0 1 0 18 10"})):r.a.createElement(k.a,{name:"search"})),H&&r.a.createElement("div",{className:"_27pk-lCQ","data-test-attribute":"typeahead-results"},null!=f?f:r.a.createElement(r.a.Fragment,null,M.map(function(e,t){return r.a.createElement(h,{key:e.key,result:e,selected:t===G,onHover:D,onClick:P})}))))):r.a.createElement("button",{className:"".concat("_3mLX8jwB"," ").concat("_2obQobO0"),title:J.string("common_Search"),"aria-label":J.string("common_Search"),onClick:function e(){window.scrollTo({top:0,behavior:"instant"}),null!=F&&F()}},r.a.createElement(k.a,{name:"search"}))}),f=n("@ta/platform.routing"),N=function e(t){return t.replace(/([-&?.\/_])/g,function(e,t){return"__".concat(t.charCodeAt(0).toString(16).toUpperCase(),"__")})},O=function e(t){var n=t.onSelection,a=void 0===n?function(){}:n,i=t.onComplete,o=void 0===i?function(){}:i,s=Object(p.useLocalize)().localize,d=function e(t){var n=Object(p.useLocalize)().localize,a=Object(f.useNavigate)();return Object(l.useCallback)(function(){navigator.geolocation.getCurrentPosition(function(e){t();var n=N(String(e.coords.latitude)),i=N(String(e.coords.longitude));a("/Home-a_isNearby.true-a_latitude.".concat(n,"-a_longitude.").concat(i))},function(e){t(),e.code===e.PERMISSION_DENIED&&alert(n.string("mw_js_positionPermissionDenied"))})},[n,a,t])}(o);return r.a.createElement("button",{type:"button",className:"_295OMbmj",onClick:function e(){a(),d()}},r.a.createElement("div",{className:"_2SARomzO"},r.a.createElement(k.a,{name:"nearby"})),r.a.createElement("div",{className:"_3QAE6J7j"},s("mx_nearby")))},_=n("urql"),T=function e(t){var n=[];return null!=t&&null!=t.photoSizes&&t.photoSizes.forEach(function(e){null!=e&&null!=e.width&&null!=e.height&&null!=e.url&&n.push({width:e.width,height:e.height,url:e.url})}),n.length>0?n:null},R=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"SponsoredLocationQuery"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"locationId"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"locations"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"locationIds"},"value":{"kind":"ListValue","values":[{"kind":"Variable","name":{"kind":"Name","value":"locationId"}}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"absoluteUrl"},"arguments":[],"directives":[]},{"kind":"Field","alias":{"kind":"Name","value":"HOTELS_URL"},"name":{"kind":"Name","value":"hotelsUrl"},"arguments":[],"directives":[]},{"kind":"Field","alias":{"kind":"Name","value":"ATTRACTIONS_URL"},"name":{"kind":"Name","value":"attractionOverviewURL"},"arguments":[],"directives":[]},{"kind":"Field","alias":{"kind":"Name","value":"RESTAURANTS_URL"},"name":{"kind":"Name","value":"restaurantOverviewURL"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"isGeo"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"localizedName"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"locationV2"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"names"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"longOnlyHierarchyTypeahead"},"arguments":[],"directives":[]}]}}]}},{"kind":"Field","name":{"kind":"Name","value":"thumbnail"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"photoSizes"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"width"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"height"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"url"},"arguments":[],"directives":[]}]}}]}}]}}]}}],"loc":{"start":0,"end":432}}');R.__key=0xda620fe6cb58,R.loc.source={body:"da620fe6cb58"};var I=R,E=function e(t){var n=t.onResultClicked,a=void 0===n?function(){}:n,o=t.sponsorDataProvider,s=t.isTypeaheadOpen,d=t.linkType,u=Object(l.useState)(null),c=i()(u,2),m=c[0],v=c[1],k=Object(l.useState)(!1),p=i()(k,2),S=p[0],y=p[1],b=Object(l.useContext)(g.Environment).domainName;Object(l.useEffect)(function(){o&&s&&null==m&&o(function(e){v(e)})},[o,s,m]);var f=Object(_.useQuery)({query:I,variables:{locationId:m&&m.location_id||0},pause:!m||!m.location_id}),N=i()(f,1)[0],O=Object(l.useMemo)(function(){if(!N.fetching&&!N.error&&N.data&&N.data.locations&&N.data.locations.length&&m&&m.location_id&&m.dfpTrackingUrl){var e=N.data.locations[0];if(!e||!e.absoluteUrl||!e.localizedName)return null;var t=d&&e.isGeo?e["".concat(d,"_URL")]:null,n=t?"https://".concat(b).concat(t):e.absoluteUrl;return{title:e.localizedName,subtitle:null!=e.locationV2&&null!=e.locationV2.names&&null!=e.locationV2.names.longOnlyHierarchyTypeahead?e.locationV2.names.longOnlyHierarchyTypeahead:null,url:"".concat(m.dfpTrackingUrl).concat(n),details:{type:"SPONSORED_LOCATION",locationId:m.location_id},image:e.thumbnail?T(e.thumbnail):null,key:"SPONSORED_LOCATION_".concat(m.location_id)}}return null},[N,m,d,b]),R=Object(l.useCallback)(function(e,t){y(!0),O&&a(O,t)},[a,O]);if(null==O)return null;var E=S&&m&&m.thirdPartyClickTrackerURL;return r.a.createElement(r.a.Fragment,null,E&&r.a.createElement("iframe",{title:"Third Party iframe",src:E,height:"0",width:"0",hidden:!0}),r.a.createElement(h,{key:O.key,result:O,selected:!1,onClick:R}))},C=n("@ta/common.localstorage"),F=n.n(C),A=n("@ta/common.features"),L=function e(t){var n=t.geoId,a=t.geoName,o=t.links,s=t.triggerLoadingState,d=void 0===s?function(){}:s,u=Object(l.useContext)(g.Route),c=i()(u,2),m=c[0].path,v=c[1].uid,k=Object(p.useLocalize)().localize,S=Object(l.useCallback)(function(e){var t=F.a.get("interactionData")||[];t.push({eventTimestampMsClient:(new Date).getTime(),interaction:{home:{quickLinkTypeaheadClick:{uid:v,scopedGeoId:n,trackingKey:e}}}}),F.a.set("interactionData",t)},[n,v]);return 0===o.length?null:r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"_1hr-ZS7R","data-test-attribute":"typeahead-quicklinks-header"},"number"==typeof n&&n>1&&null!=a?k("cx_single_search_explore_geo",{geoName:a}):k("cx_single_search_explore_tripadvisor")),r.a.createElement("div",{className:"i9S2wniC"},o.map(function(e){if(null!=e&&null!=e.linkId&&function e(t){switch(t){case"scoped-home":return!1;case"cars":return Object(A.featureIsEnabled)("rental_cars_winning_quick_link");case"cruises":return Object(A.featureIsEnabled)("cruise");case"vr":return Object(A.featureIsEnabled)("vacation_rentals");case"vp":return Object(A.featureIsEnabled)("seo_vacation_packages_servlet");default:return!0}}(e.linkId)){var t=e.linkId,n=e.url,a=e.anchorText;return r.a.createElement("a",{key:t,className:"lskmYLHJ",href:n,onClick:function e(){S(t),m!==n&&d()}},a)}return null})))},j=function e(t){var n=t.title,a=t.locations,i=t.maxResults,o=void 0===i?5:i,s=t.onResultClicked,d=t.linkType,u=Object(l.useMemo)(function(){var e=[];return a.forEach(function(t){if(e.length<o&&null!=t&&null!=t.url&&null!=t.locationId&&t.locationId>1){var n,a=t.name,i=t.thumbnail,l=t.url,r=t.locationId,s=t.isGeo,u=t.locationV2,c=d&&t.isGeo?t["".concat(d,"_URL")]:null;e.push({title:a||"",subtitle:(null==u?void 0:null===(n=u.names)||void 0===n?void 0:n.longOnlyHierarchyTypeahead)||null,image:T(i),url:c||l,details:{type:"LOCATION",locationId:r,isGeo:!!s},key:String(r)})}}),e},[a,o,d]);return 0===u.length?null:r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"_23v_S-ni"},n),u.map(function(e){return r.a.createElement(h,{key:e.key,result:e,selected:!1,onClick:s})}))},w=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"SearchResultsPlaceholderQuery"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"locale"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"String"}}},"directives":[]},{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"geoId"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]},{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"params"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Map_String_StringScalar"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"locations"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"locationIds"},"value":{"kind":"ListValue","values":[{"kind":"Variable","name":{"kind":"Name","value":"geoId"}}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"name"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"globalNavLinks"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"request"},"value":{"kind":"ObjectValue","fields":[{"kind":"ObjectField","name":{"kind":"Name","value":"pos"},"value":{"kind":"Variable","name":{"kind":"Name","value":"locale"}}},{"kind":"ObjectField","name":{"kind":"Name","value":"servlet"},"value":{"kind":"StringValue","value":"Home","block":false}},{"kind":"ObjectField","name":{"kind":"Name","value":"urlParameters"},"value":{"kind":"Variable","name":{"kind":"Name","value":"params"}}},{"kind":"ObjectField","name":{"kind":"Name","value":"includeSublinks"},"value":{"kind":"BooleanValue","value":false}}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"sublinks"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"linkId"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"anchorText"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"url"},"arguments":[],"directives":[]}]}}]}},{"kind":"Field","name":{"kind":"Name","value":"insightProfile"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"limit"},"value":{"kind":"IntValue","value":"5"}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"locations"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"location"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"FragmentSpread","name":{"kind":"Name","value":"PlaceholderLocation"},"directives":[]}]}}]}}]}},{"kind":"Field","name":{"kind":"Name","value":"popularDestinations"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"FragmentSpread","name":{"kind":"Name","value":"PlaceholderLocation"},"directives":[]}]}}]}},{"kind":"FragmentDefinition","name":{"kind":"Name","value":"PlaceholderLocation"},"typeCondition":{"kind":"NamedType","name":{"kind":"Name","value":"LocationInformation"}},"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"locationId"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"parentId"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"name"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"url"},"arguments":[],"directives":[]},{"kind":"Field","alias":{"kind":"Name","value":"HOTELS_URL"},"name":{"kind":"Name","value":"hotelsUrl"},"arguments":[],"directives":[]},{"kind":"Field","alias":{"kind":"Name","value":"ATTRACTIONS_URL"},"name":{"kind":"Name","value":"attractionOverviewURL"},"arguments":[],"directives":[]},{"kind":"Field","alias":{"kind":"Name","value":"RESTAURANTS_URL"},"name":{"kind":"Name","value":"restaurantOverviewURL"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"isGeo"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"locationV2"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"names"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"longOnlyHierarchyTypeahead"},"arguments":[],"directives":[]}]}}]}},{"kind":"Field","name":{"kind":"Name","value":"thumbnail"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"photoSizes"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"width"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"height"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"url"},"arguments":[],"directives":[]}]}}]}}]}}],"loc":{"start":0,"end":875}}');w.__key=0xe3bf89aa3784,w.loc.source={body:"e3bf89aa3784"};var U=w,D=function e(t){var n=t.scope,a=Object(l.useContext)(g.Environment).locale.code,r=Object(_.useQuery)({query:U,variables:{locale:a,geoId:n.geoId||0,params:null!=n.geoId&&n.geoId>1?{geo:String(n.geoId)}:{}}});return i()(r,1)[0].data},P=function e(t){var n,a,i,o=t.scope,s=t.onStartLoading,d=t.onStopLoading,u=t.sponsorDataProvider,c=t.onPlaceholderLocationClicked,m=t.hideNearby,v=t.hideQuickLinks,k=t.hideSponsored,g=t.hideRecentlyViewed,S=t.hidePopularDestinations,y=t.isOpen,h=Object(p.useLocalize)().localize,b=D({scope:o}),f=Object(l.useMemo)(function(){var e;return((null==b?void 0:null===(e=b.insightProfile)||void 0===e?void 0:e.locations)||[]).filter(Boolean).filter(function(e){var t=e.location;return!!t&&(!o.linkType||t.isGeo&&t["".concat(o.linkType,"_URL")])}).map(function(e){return e.location})},[b,o]);return r.a.createElement(r.a.Fragment,null,!m&&r.a.createElement(O,{onSelection:s,onComplete:d}),!k&&r.a.createElement(E,{sponsorDataProvider:u,onResultClicked:c,isTypeaheadOpen:y,linkType:o.linkType}),!v&&r.a.createElement(L,{geoName:(null==b?void 0:null===(n=b.locations)||void 0===n?void 0:null===(a=n[0])||void 0===a?void 0:a.name)||null,links:(null==b?void 0:null===(i=b.globalNavLinks)||void 0===i?void 0:i.sublinks)||[],geoId:o.geoId||1,triggerLoadingState:s}),!g&&r.a.createElement(j,{title:h.string("dual_search_recently_viewed_all_caps"),locations:f,onResultClicked:c,linkType:o.linkType}),!S&&(g||!f.length)&&r.a.createElement(j,{title:h.string("dual_search_popular_destinations"),locations:(null==b?void 0:b.popularDestinations)||[],onResultClicked:c,linkType:o.linkType}))},H=n("@babel/runtime/helpers/esm/toConsumableArray"),x=n.n(H),G=function e(){var t=Object(l.useRef)("");if(""===t.current){var n=Array(32).fill(0).map(function(){return"0123456789ABCDEF"[Math.floor(Math.random()*"0123456789ABCDEF".length)]}).join("");t.current="".concat(n).concat(String(Date.now()),"ssid")}return t.current};function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(n,!0).forEach(function(t){s()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var z={LOCATION:"LOCATION",SPONSORED_LOCATION:"SPONSORED_LOCATION",USER:"USER_PROFILE",SEARCH_SUGGESTION:"QUERY_SUGGESTION",SEARCH:"SEARCH",LIST_RESULT:"LIST_RESULT"},Q=function e(t,n,a,r,o,s,d){var u=Object(l.useState)(a),c=i()(u,2),m=c[0],v=c[1],k=Object(l.useState)(""),g=i()(k,2),p=g[0],S=g[1];return{logImpression:Object(l.useCallback)(function(){v(a);var e=String(Date.now());S(e);var i=new URLSearchParams(M({action:"RECORD",eventType:"start",uiOrigin:n,source:n,startTime:e,hadHistory:"false",searchSessionId:t,query:a,beforeQuery:a,afterQuery:a},r));navigator.sendBeacon("/TypeAheadJson?".concat(i.toString()))},[n,t,a,v,r]),logSelection:Object(l.useCallback)(function(e,i,l,u){var c=new URLSearchParams(M({action:"RECORD",eventType:"search_from_masthead",uiOrigin:n,source:n,searchSessionId:t,fromHistory:String(i),dataType:z[l.details.type],url:l.url,value:l.key,indexInType:String(u),selDepth:String(u+1),totalNum:String(o),startTime:p,userInteractionType:e,query:a,documentId:l.key,beforeQuery:m,afterQuery:l.title,errors:s,durationResultsShown:d&&Date.now()-d},r));navigator.sendBeacon("/TypeAheadJson?".concat(c.toString()))},[n,t,a,m,r,p,o,s,d]),logSearchAction:Object(l.useCallback)(function(){var e=new URLSearchParams(M({action:"RECORD",eventType:"search",uiOrigin:n,source:n,searchSessionId:t,value:"",startTime:p,query:a,totalNum:String(o),beforeQuery:m,afterQuery:a,errors:s,durationResultsShown:d&&Date.now()-d},r));navigator.sendBeacon("/TypeAheadJson?".concat(e.toString()))},[n,t,a,m,r,p,o,s,d]),startQuery:m,startTime:p}},q=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"TypeaheadQuery"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"request"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Typeahead_RequestInput"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"Typeahead_autocomplete"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"request"},"value":{"kind":"Variable","name":{"kind":"Name","value":"request"}}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"partial"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"results"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"FragmentSpread","name":{"kind":"Name","value":"TypeAhead_LocationItemFields"},"directives":[]},{"kind":"FragmentSpread","name":{"kind":"Name","value":"TypeAhead_UserProfileFields"},"directives":[]},{"kind":"FragmentSpread","name":{"kind":"Name","value":"TypeAhead_QuerySuggestionFields"},"directives":[]},{"kind":"FragmentSpread","name":{"kind":"Name","value":"TypeAhead_RescueResultFields"},"directives":[]},{"kind":"FragmentSpread","name":{"kind":"Name","value":"TypeAhead_ListResultFields"},"directives":[]}]}}]}}]}},{"kind":"FragmentDefinition","name":{"kind":"Name","value":"TypeAhead_LocationItemFields"},"typeCondition":{"kind":"NamedType","name":{"kind":"Name","value":"Typeahead_LocationItem"}},"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"type"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"documentId"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"locationId"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"details"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"FragmentSpread","name":{"kind":"Name","value":"TypeAheadLocationInformationFields"},"directives":[]}]}}]}},{"kind":"FragmentDefinition","name":{"kind":"Name","value":"TypeAhead_UserProfileFields"},"typeCondition":{"kind":"NamedType","name":{"kind":"Name","value":"Typeahead_UserProfileItem"}},"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"type"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"documentId"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"userId"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"details"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"FragmentSpread","name":{"kind":"Name","value":"TypeAheadUserProfileFields"},"directives":[]}]}}]}},{"kind":"FragmentDefinition","name":{"kind":"Name","value":"TypeAheadLocationInformationFields"},"typeCondition":{"kind":"NamedType","name":{"kind":"Name","value":"LocationInformation"}},"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"localizedName"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"localizedAdditionalNames"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"longOnlyHierarchy"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"streetAddress"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"street1"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"locationV2"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"names"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"longOnlyHierarchyTypeahead"},"arguments":[],"directives":[]}]}}]}},{"kind":"Field","name":{"kind":"Name","value":"url"},"arguments":[],"directives":[]},{"kind":"Field","alias":{"kind":"Name","value":"HOTELS_URL"},"name":{"kind":"Name","value":"hotelsUrl"},"arguments":[],"directives":[]},{"kind":"Field","alias":{"kind":"Name","value":"ATTRACTIONS_URL"},"name":{"kind":"Name","value":"attractionOverviewURL"},"arguments":[],"directives":[]},{"kind":"Field","alias":{"kind":"Name","value":"RESTAURANTS_URL"},"name":{"kind":"Name","value":"restaurantOverviewURL"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"placeType"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"latitude"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"longitude"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"isGeo"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"thumbnail"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"photoSizes"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"width"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"height"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"url"},"arguments":[],"directives":[]}]}}]}}]}},{"kind":"FragmentDefinition","name":{"kind":"Name","value":"TypeAheadUserProfileFields"},"typeCondition":{"kind":"NamedType","name":{"kind":"Name","value":"MemberProfile"}},"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"username"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"displayName"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"followerCount"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"isVerified"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"isFollowing"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"avatar"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"photoSizes"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"width"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"height"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"url"},"arguments":[],"directives":[]}]}}]}},{"kind":"Field","name":{"kind":"Name","value":"route"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"url"},"arguments":[],"directives":[]}]}}]}},{"kind":"FragmentDefinition","name":{"kind":"Name","value":"TypeAhead_QuerySuggestionFields"},"typeCondition":{"kind":"NamedType","name":{"kind":"Name","value":"Typeahead_QuerySuggestionItem"}},"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"type"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"documentId"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"text"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"route"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"url"},"arguments":[],"directives":[]}]}}]}},{"kind":"FragmentDefinition","name":{"kind":"Name","value":"TypeAhead_RescueResultFields"},"typeCondition":{"kind":"NamedType","name":{"kind":"Name","value":"Typeahead_RescueResultItem"}},"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"type"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"documentId"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"text"},"arguments":[],"directives":[]}]}},{"kind":"FragmentDefinition","name":{"kind":"Name","value":"TypeAhead_ListResultFields"},"typeCondition":{"kind":"NamedType","name":{"kind":"Name","value":"Typeahead_ListResultItem"}},"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"type"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"documentId"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"locationId"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"listResultType"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"details"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"localizedName"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"localizedAdditionalNames"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"longOnlyHierarchy"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"locationV2"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"names"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"longOnlyHierarchyTypeahead"},"arguments":[],"directives":[]}]}}]}},{"kind":"Field","alias":{"kind":"Name","value":"HOTELListURL"},"name":{"kind":"Name","value":"hotelsUrl"},"arguments":[],"directives":[]},{"kind":"Field","alias":{"kind":"Name","value":"RESTAURANTListURL"},"name":{"kind":"Name","value":"restaurantOverviewURL"},"arguments":[],"directives":[]},{"kind":"Field","alias":{"kind":"Name","value":"ATTRACTIONListURL"},"name":{"kind":"Name","value":"attractionOverviewURL"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"thumbnail"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"photoSizes"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"width"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"height"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"url"},"arguments":[],"directives":[]}]}}]}}]}}]}}],"loc":{"start":0,"end":2079}}');q.__key=0xf48f8aa1cd22,q.loc.source={body:"f48f8aa1cd22"};var B=q,J=function e(t,n,a){var i=null!=a.latitude&&null!=a.longitude,l={q:t,searchSessionId:n,searchNearby:i?"true":"",latitude:null!=a.latitude?String(a.latitude):"",longitude:null!=a.longitude?String(a.longitude):"",geo:i?"":String(a.geoId)};return"/Search?".concat(new URLSearchParams(l).toString())},Y=["ACCOMMODATION","EATERY","ATTRACTION","CAR_RENTAL_OFFICE"],K=n("@ta/common.text-html"),W=function e(t,n,a){var i=null!=a.latitude&&null!=a.longitude,l={q:t,searchSessionId:n,searchNearby:i?"true":"",latitude:null!=a.latitude?String(a.latitude):"",longitude:null!=a.longitude?String(a.longitude):"",geo:i?"":String(a.geoId)};return"/Search?".concat(new URLSearchParams(l).toString())},X=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"LocationThumbnailQuery"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"locationId"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"locations"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"locationIds"},"value":{"kind":"ListValue","values":[{"kind":"Variable","name":{"kind":"Name","value":"locationId"}}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"thumbnail"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"photoSizes"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"width"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"height"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"url"},"arguments":[],"directives":[]}]}}]}}]}}]}}],"loc":{"start":0,"end":196}}');X.__key=0x8bd3c0aac607,X.loc.source={body:"8bd3c0aac607"};var Z=X,$=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"UserAvatarQuery"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"username"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"String"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"memberProfile"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"username"},"value":{"kind":"Variable","name":{"kind":"Name","value":"username"}}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"avatar"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"photoSizes"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"width"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"height"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"url"},"arguments":[],"directives":[]}]}}]}}]}}]}}],"loc":{"start":0,"end":184}}');$.__key=54782669205391,$.loc.source={body:"31d31589af8f"};var ee=$;function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(n,!0).forEach(function(t){s()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ae=function e(t){var n,a,r,o,s,d,u,c,m,v=Object(_.useQuery)(ne({query:Z},null==t||"LOCATION"!==(null===(n=t.details)||void 0===n?void 0:n.type)&&"LIST_RESULT"!==(null===(a=t.details)||void 0===a?void 0:a.type)?{variables:{locationId:-1},pause:!0}:{variables:{locationId:t.details.locationId}})),k=i()(v,1)[0],g=Object(_.useQuery)(ne({query:ee},null!=t&&"USER"===t.details.type?{variables:{username:t.details.username}}:{variables:{username:""},pause:!0})),p=i()(g,1)[0];if("LOCATION"===(null==t?void 0:null===(r=t.details)||void 0===r?void 0:r.type)||"LIST_RESULT"===(null==t?void 0:null===(o=t.details)||void 0===o?void 0:o.type))k.fetching||k.error||(d=null===(u=k.data)||void 0===u?void 0:null===(c=u.locations)||void 0===c?void 0:null===(m=c[0])||void 0===m?void 0:m.thumbnail);else if("USER"===(null==t?void 0:null===(s=t.details)||void 0===s?void 0:s.type)){var S,y;p.fetching||p.error||(d=null===(S=p.data)||void 0===S?void 0:null===(y=S.memberProfile)||void 0===y?void 0:y.avatar)}return Object(l.useMemo)(function(){if(null==t)return null;var e=T(d);return null!=e?ne({},t,{image:e}):t},[t,d])},ie=function e(t){for(var n=[],a=0;a<10;a++){var i=ae(t[a]);null!=i&&n.push(i)}return n};function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var re={details:"true",disableMaxGroupSize:"true",geoBoostFix:"true",geoPages:"true",injectLists:"false",injectNewLocation:"true",interleaved:"true",link_type:"geo",local:"true",matchKeywords:"true",matchOverview:"true",matchUserProfiles:"true",matchTags:"true",matchGlobalTags:"true",nearPages:"true",nearPagesLevel:"strict",neighborhood_geos:"true",scoreThreshold:"0.8",strictAnd:"false",supportedSearchTypes:"find_near_stand_alone_query",typeahead1_5:"true",simple_typeahead:"true",matchQuerySuggestions:"true",rescue:"true",scopeFilter:"global",types:["geo","hotel","eat","attr","vr","air","theme_park","al","act","uni","shop","port","general_hospital","ferry","corp","ship","cruise_line","car"].join(",")},oe=function e(t,n){return t instanceof Node&&n instanceof Node&&t.contains(n)},se=function e(t){var n,a=t.source,r=t.scope,o=t.maxItems,d=t.onClose,u=t.isOpen,c=t.onOpen,m=t.query,v=t.setQuery,k=t.searchMode,p=void 0===k?"SingleSearch":k,S=t.highlightFirstResult,y=void 0!==S&&S,h=Object(f.useNavigate)(),b=(Object(A.featureIsEnabled)("cx_single_search_via_graphql")||"GeoPicker"===p||"GeoSuggestion"===p?function e(t,n,a,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:10,s=Object(l.useState)([]),d=i()(s,2),u=d[0],c=d[1],m=Object(l.useState)(0),v=i()(m,2),k=v[0],p=v[1],S=Object(l.useState)(null),y=i()(S,2),h=y[0],b=y[1],f=Object(l.useState)(!1),N=i()(f,2),O=N[0],R=N[1],I=G(),E=Object(l.useMemo)(function(){var e=null!=a.geoId&&a.geoId>1?a.geoId:1,t={parentids:String(e),scope:String(e),beforeGeoId:String(e),afterGeoId:String(e),position:"",isNearby:""};return null!=a.latitude&&null!=a.longitude&&(t.isNearby="true",t.position="".concat(String(a.latitude),",").concat(String(a.longitude))),t},[a.geoId,a.latitude,a.longitude]),C=Q(I,n,t,E,u.length,h||"",k),F=C.logImpression,L=C.logSelection,j=C.logSearchAction,w=function e(t,n){var a=Object(l.useState)(t),r=i()(a,2),o=r[0],s=r[1],d=Object(l.useRef)(Date.now());return Object(l.useEffect)(function(){var e=Date.now(),a=n-(e-d.current);if(a<=0)return d.current=e,void s(t);var i=setTimeout(function(){d.current=Date.now(),s(t)},a);return function(){return clearTimeout(i)}},[t,n]),o}(t,100),U=Object(l.useContext)(g.Visitor).userId,D=Object(l.useContext)(g.Environment).locale,P=null!=a.latitude&&null!=a.longitude?{latitude:a.latitude,longitude:a.longitude}:null,H=null!=a.geoId?a.geoId:0,V="WORLDWIDE";H>1?V="IN_GEO_EXTEND_WORLDWIDE":null!=P&&(V="NEAR_POSITION");var M=x()(Object(A.featureIsEnabled)("interleaved_typeahead")?["interleaved_typeahead".toUpperCase()]:[]),z=a.pageType,q={listResultType:z},K=["LOCATION","QUERY_SUGGESTION","USER_PROFILE","RESCUE_RESULT"].concat(x()(null!=z?["LIST_RESULT"]:[])),W=["default"].concat(x()(Object(A.featureIsEnabled)("insurance_lithium")?["insurance_lander"]:[]),x()(Object(A.featureIsEnabled)("love_your_local_article")?["love_your_local"]:[])),X={query:w,limit:o,scope:V,locale:D.code,scopeGeoId:H,searchCenter:P,types:K,locationTypes:["GEO","AIRPORT","ACCOMMODATION","ATTRACTION","ATTRACTION_PRODUCT","EATERY","NEIGHBORHOOD","THEME_PARK","AIRLINE","SHOPPING","UNIVERSITY","GENERAL_HOSPITAL","PORT","FERRY","CORPORATION","VACATION_RENTAL","SHIP","CRUISE_LINE","CAR_RENTAL_OFFICE"],userId:U,enabledFeatures:M,context:q,articleCategories:W};"GeoPicker"===r?(X.types=["LOCATION","RESCUE_RESULT"],X.locationTypes=["GEO","NEIGHBORHOOD"]):"GeoSuggestion"===r&&(X.types=["LOCATION","QUERY_SUGGESTION","RESCUE_RESULT"]);var Z=Object(_.useQuery)({query:B,variables:{request:X},pause:!w||w.length<1||0===o}),$=i()(Z,1)[0];return Object(l.useEffect)(function(){if(!w||w.length<1||!$)return c([]),R(!1),void b("throttledQuery=".concat(w,";response=").concat(String(!!$)));if($.error)try{var e=JSON.stringify($.error&&$.error.message),t=e.indexOf("\\n");b(t<0?e:e.substring(0,Math.min(300,t)))}catch(e){b("Failed to serialize errors object: ".concat(e&&e.message||e))}if($.fetching||!$.data)return c([]),R(!0),void b("fetching=".concat(String(!!$.fetching),";data=").concat(String(!!$.data)));var n=function e(t,n,a,i){var l=[],r=[];if(!t||!t.Typeahead_autocomplete||!t.Typeahead_autocomplete.results)return r.push("no_results"),{results:l,excludedResults:[]};var o=t.Typeahead_autocomplete.results,s=o.reduce(function(e,t){if(null!=t&&null!=t.details&&null!=t.details.placeType&&null!=t.details.localizedName&&null!=t.details.locationV2&&null!=t.details.locationV2.names&&null!=t.details.locationV2.names.longOnlyHierarchyTypeahead&&null!=t.locationId){var n=t.details.localizedName+t.details.locationV2.names.longOnlyHierarchyTypeahead+t.details.placeType,a=t.locationId;if(!Object.keys(e).includes(n)){var i={};i[n]=[],Object.assign(e,i)}e[n].push(a)}return e},{}),d=Object.values(s).filter(function(e){return Array.isArray(e)&&e.length>1}).flatMap(function(e){return e}),u=function e(t){if(null!=t.locationId&&null!=t.details&&null!=t.details.locationV2&&null!=t.details.locationV2.names&&null!=t.details.locationV2.names.longOnlyHierarchyTypeahead){var n=t.details.locationV2.names.longOnlyHierarchyTypeahead,a=null!=t.details.placeType&&Y.includes(t.details.placeType)&&null!=t.details.streetAddress&&null!=t.details.streetAddress.street1&&d.includes(t.locationId)?t.details.streetAddress.street1:null;return null==a?n:"".concat(a,", ").concat(n)}return null};return o.forEach(function(e,t){if(null!=e){var o=i.linkType&&e.details?e.details["".concat(i.linkType,"_URL")]:null;switch(e.type){case"LocationItem":if(null==e.locationId&&r.push("null_locid"),null==e.locationId||e.details||r.push("null_details:".concat(String(e.locationId))),null!=e.locationId&&(!e.details||e.details&&null==e.details.url)&&r.push("null_url:".concat(String(e.locationId))),null==e.locationId||e.details&&null!=e.details.localizedName||r.push("null_name:".concat(String(e.locationId))),null!=e.locationId&&e.details&&null!=e.details.localizedName&&null!=e.details.url){var s=e.details,d=s.isGeo,c=s.url;l.push({title:e.details.localizedName,url:o||c,details:{type:"LOCATION",locationId:e.locationId,isGeo:d},image:e.details.thumbnail?T(e.details.thumbnail):null,key:"LOCATION_".concat(e.documentId),subtitle:u(e)})}break;case"UserProfileItem":e.details&&null!=e.details.username&&null!=e.details.displayName&&e.details.route&&null!=e.details.route.url&&l.push({title:e.details.displayName,subtitle:"@".concat(e.details.username),url:e.details.route.url,details:{type:"USER",username:e.details.username,verified:null!=e.details.isVerified&&e.details.isVerified,followerCount:null!=e.details.followerCount?e.details.followerCount.toString():null,following:null!=e.details.isFollowing&&e.details.isFollowing},image:e.details.avatar?T(e.details.avatar):null,key:"USER_".concat(e.documentId)});break;case"QuerySuggestionItem":null==e.text&&r.push("nulltext_sugg"),null!=e.text&&l.push({title:e.text,subtitle:null,image:null,url:e.route&&e.route.url||J(e.text,n,i),details:{type:"SEARCH_SUGGESTION"},key:e.documentId});break;case"RescueResultItem":null==e.text&&r.push("nulltext_rescue"),null!=e.text&&l.push({title:e.text,subtitle:null,image:null,url:J(e.text,n,i),details:{type:"SEARCH"},key:"SEARCH_".concat(e.documentId)});break;case"ListResultItem":null!=e.locationId&&null!=e.documentId&&null!=e.listResultType&&null!=e.details&&null!=e.details.localizedName&&null!=a&&l.push({title:e.details.localizedName,url:e.details["".concat(a,"ListURL")]||"",details:{type:"LIST_RESULT",locationId:e.locationId,listResultType:e.listResultType},image:e.details.thumbnail?T(e.details.thumbnail):null,key:"LIST_RESULT_".concat(a,"_").concat(e.documentId),subtitle:u(e)});break;default:r.push("unknown_type:".concat(String(e.type)))}}else r.push("null_res:".concat(String(t)))}),{results:l,excludedResults:r}}($.data,I,z,a),i=n.results,l=n.excludedResults;return c(i),b(l.join(";")),R(!0),function(){}},[w,$,I,z,a]),Object(l.useEffect)(function(){p(Date.now())},[u]),{results:u,hasResponse:O,logImpression:F,logSelection:L,logSearchAction:j,searchSessionId:I}}:function e(t,n,a,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:10,d=G(),u=Object(l.useState)([]),c=i()(u,2),m=c[0],v=c[1],k=Object(l.useState)(!1),g=i()(k,2),p=g[0],S=g[1],y=Object(l.useMemo)(function(){var e=null!=a.geoId&&a.geoId>1?a.geoId:1,t={parentids:String(e),scope:String(e),beforeGeoId:String(e),afterGeoId:String(e),position:"",isNearby:""};return null!=a.latitude&&null!=a.longitude&&(t.isNearby="true",t.position="".concat(String(a.latitude),",").concat(String(a.longitude))),t},[a.geoId,a.latitude,a.longitude]),h=Q(d,n,t,y,m.length,"",0),b=h.logImpression,f=h.logSelection,N=h.logSearchAction,O=h.startTime,_=h.startQuery,T=null!=a.pageType?a.pageType:"",R=function e(t,n){var a=Object(l.useState)(t),r=i()(a,2),o=r[0],s=r[1],d=Object(l.useRef)(Date.now());return Object(l.useEffect)(function(){var e=Date.now(),a=n-(e-d.current);if(a<=0)return d.current=e,void s(t);var i=setTimeout(function(){d.current=Date.now(),s(t)},a);return function(){return clearTimeout(i)}},[t,n]),o}(t,100),I=["default"].concat(x()(Object(A.featureIsEnabled)("insurance_lithium")?["insurance_lander"]:[]),x()(Object(A.featureIsEnabled)("love_your_local_article")?["love_your_local"]:[])),E=Object(l.useMemo)(function(){return R.length<1||0===o?null:"/TypeAheadJson?".concat(new URLSearchParams(function e(t){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?le(a,!0).forEach(function(e){s()(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):le(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}({action:"API",searchSessionId:d,source:n,uiOrigin:n,max:String(o),startTime:O,query:R,beforeQuery:_,afterQuery:t},y,{},re,{articleCategories:I.join(","),listResultType:T})).toString())},[n,d,R,y,o,_,t,O,T,I]);return Object(l.useEffect)(function(){if(null==E)return v([]),void S(!1);var e=new AbortController,t=!1;return fetch(E,{credentials:"same-origin",signal:e.signal}).then(function(e){if(e.ok)return e.json();throw new Error(e.statusText)}).then(function(e){v(function e(t,n,a){var i=(+t.query.parentids||0)<=1&&!t.query.isNearby,l=[];return t.results.forEach(function(e){var t=e.url;if(!i||"KEYWORD"!==e.type&&"TAG"!==e.data_type?"SEARCH"===e.data_type&&(t=W(e.query,n,a)):t=W(e.name,n,a),null!=e.data_type)switch(e.data_type){case"LOCATION":l.push({title:e.details.name,subtitle:e.details.geo_name||null,image:null,url:t,details:{type:"LOCATION",locationId:e.value,isGeo:"GEO"===e.type},key:"LOCATION_".concat(e.value)});break;case"USER_PROFILE":l.push({title:Object(K.unescapeHtml)(e.details.name),subtitle:"@".concat(e.details.user_name),image:null,url:t,details:{type:"USER",username:e.details.user_name,verified:e.details.verified,followerCount:null!=e.details.followerCount?e.details.followerCount.toString():null,following:!!e.following},key:"USER_".concat(e.details.user_name)});break;case"QUERY_SUGGESTION":l.push({title:e.name,subtitle:null,image:null,url:t,details:{type:"SEARCH_SUGGESTION"},key:e.document_id});break;case"PAGE":l.push({title:e.name,subtitle:e.details.geo_name||null,image:null,url:t,details:{type:"SEARCH_SUGGESTION"},key:"SEARCH_".concat(l.length+1)});break;case"TAG":l.push({title:e.details.name,subtitle:e.details.geo_name||null,image:null,url:t,details:{type:"SEARCH_SUGGESTION"},key:"TAG_".concat(l.length+1)});break;case"NEAR_POI":l.push({title:e.find_near_input,subtitle:e.details.geo_name||null,image:null,url:t,details:{type:"SEARCH_SUGGESTION"},key:"NEAR_POI_".concat(l.length+1)});break;case"SEARCH":l.push({title:e.query,subtitle:null,image:null,url:t,details:{type:"SEARCH"},key:"SEARCH_".concat(l.length+1)});break;case"LIST_RESULT":l.push({title:e.details.name,subtitle:e.details.geo_name||null,image:null,url:t,details:{type:"LIST_RESULT",listResultType:e.type,locationId:e.value},key:"LIST_RESULT_".concat(e.value)})}else l.push({title:e.details.name,subtitle:e.details.geo_name||null,image:null,url:t,details:{type:"SEARCH_SUGGESTION"},key:"SEARCH_".concat(l.length+1)})}),{results:l,excludedResults:[]}}(e,d,a).results),S(!0)}).catch(function(e){e.code!==e.ABORT_ERR&&console.error("useSearchResults: Error fetching typeahead results",e)}).finally(function(){t=!0}),function(){t||e.abort()}},[E,d,a]),{hasResponse:p,results:ie(m),logImpression:b,logSelection:f,logSearchAction:N,searchSessionId:d}})(m,a,r,p,o),N=b.results,O=b.hasResponse,R=b.logImpression,I=b.logSelection,E=b.logSearchAction,C=b.searchSessionId,F=Object(l.useState)(!1),L=i()(F,2),j=L[0],w=L[1],U=Object(l.useState)(null),D=i()(U,2),P=D[0],H=D[1],V=y&&null==P?0:P,M=null!=P&&(null===(n=N[P])||void 0===n?void 0:n.title)||m,z=Object(l.useCallback)(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];I(t,n,e,N.indexOf(e))},[N,I]),q=Object(l.useCallback)(function(e){u&&!e||(c&&c(),H(null),R())},[c,u,R]),X=Object(l.useCallback)(function(){u&&(H(null),d&&d())},[u,d]),Z=Object(l.useCallback)(function(e){v(e),H(null),e.length>=1&&q()},[v,q]),$=Object(l.useCallback)(function(e){var t=e.currentTarget,n=e.relatedTarget;null!=n&&oe(t,n)||q()},[q]),ee=Object(l.useCallback)(function(e){var t=e.currentTarget,n=e.relatedTarget;null==n||oe(t,n)||X()},[X]),te=Object(l.useCallback)(function(e){switch(e.keyCode){case 38:u?H(function(e){return null==e?N.length-1:e>0?e-1:null}):q(),e.preventDefault();break;case 40:u?H(function(e){return null==e?0:e<N.length-1?e+1:null}):q(),e.preventDefault();break;case 13:null!=V&&null!=N[V]&&(z(N[V],"enter"),!1===e.defaultPrevented&&(h(N[V].url)&&w(!0),e.preventDefault()));break;case 27:X(),e.preventDefault()}},[h,u,V,N,X,q,z]),ne=Object(l.useCallback)(function(){E(),w(!0)},[E]),ae=Object(l.useCallback)(function(){H(null)},[]),se=Object(l.useCallback)(function(e){z(e,"click"),w(!0)},[z]),de=Object(l.useCallback)(function(e){z(e,"click",!0),w(!0)},[z]),ue=Object(l.useCallback)(function(){w(!0)},[]),ce=Object(l.useCallback)(function(){w(!1)},[]);return{state:{isLoading:j,results:N,selectedIndex:V,displayedQuery:M,hasResponse:O},formCallbacks:{onFocus:$,onBlur:ee,onSubmit:ne},inputCallbacks:{onKeyDown:te,onChange:Z},resultCallbacks:{onResultHovered:ae,onResultClicked:se,onPlaceholderLocationClicked:de},stateCallbacks:{onOpen:q,onClose:X,onStartLoading:ue,onStopLoading:ce},searchSessionId:C}},de={};Object.entries({HOTEL:["Hotels","MobileHotels","Hotel_Review","MobileHotel_Review","HotelHighlight","MobileHotelHighlight","SmartDeals","MobileSmartDeals","HotelsList","MobileHotelsList","HotelsNear","MobileHotelsNear","NearbyHotels","MobileNearbyHotels","HotelSearch","LastMinute","TravelersChoiceHotels","ShowUserReviewsHotels"],ATTRACTION:["Attractions","MobileAttractions","Attractions_Coverpage","Attraction_Review","MobileAttraction_Review","AttractionsNear","AttractionProductReview","MobileAttractionProductReview","MobileAttractionsNear","Attraction_Products","MobileAttraction_Products","AttractionReviewSearch","MobileAttractionReviewSearch","NearbyAttractions","MobileNearbyAttractions","ShowUserReviewsAttractions","TravelersChoiceAttractions"],RESTAURANT:["Restaurants","MobileRestaurants","Restaurant_Review","MobileRestaurant_Review","RestaurantSearch","MobileRestaurantSearch","RestaurantsNear","MobileRestaurantsNear","RestaurantMenu","MobileRestaurantMenu","NearbyRestaurants","MobileNearbyRestaurants","TravelersChoiceRestaurants","ShowUserReviewsRestaurants"]}).forEach(function(e){var t=i()(e,2),n=t[0],a=t[1];return Array.isArray(a)&&a.forEach(function(e){"string"==typeof e&&(de[e]=n)})});var ue=function e(t){var n=null!=t.geo?parseInt(t.geo,10):0,a=n<1?1:n,i=de["".concat(t.page).concat(t.args?t.args:"")];return t.isNearby&&t.latitude&&t.longitude?{geoId:null!=t.geo?parseInt(t.geo,10):1,pageType:i,latitude:parseFloat(t.latitude),longitude:parseFloat(t.longitude)}:{geoId:a,pageType:i}};n.d(t,"getTypeaheadScopeFromRoute",function(){return ue}),n.d(t,"pageToTypeMappings",function(){return de}),n.d(t,"useTypeaheadState",function(){return se}),n.d(t,"TypeaheadPlaceholder",function(){return P}),n.d(t,"useTypeaheadPlaceholderQuery",function(){return D}),n.d(t,"SearchResult",function(){return h}),t.default=Object(l.memo)(function e(t){var n=t.source,a=t.maxItems,o=void 0===a?10:a,s=t.color,d=t.styleVariant,u=t.overlayVariant,c=t.placeholderText,m=t.hidden,v=t.onClose,k=t.scope,g=t.sponsorDataProvider,p=t.searchMode,S=void 0===p?"SingleSearch":p,y=t.isModalOnly,h=void 0!==y&&y,f=t.highlightFirstResult,N=void 0!==f&&f,O=Object(l.useState)(h),_=i()(O,2),T=_[0],R=_[1],I=Object(l.useCallback)(function(){h||R(!1),v&&v()},[v,h]),E=Object(l.useCallback)(function(){h||R(!0)},[h]),C=Object(l.useState)(""),F=i()(C,2),A=F[0],L=F[1],j=se({source:n,maxItems:o,scope:k,searchMode:S,onOpen:E,onClose:I,isOpen:T,query:A,setQuery:L,highlightFirstResult:N}),w=j.state,U=w.isLoading,D=w.results,H=w.selectedIndex,x=w.displayedQuery,G=w.hasResponse,V=j.formCallbacks,M=V.onFocus,z=V.onBlur,Q=V.onSubmit,q=j.inputCallbacks,B=q.onKeyDown,J=q.onChange,Y=j.resultCallbacks,K=Y.onResultHovered,W=Y.onResultClicked,X=Y.onPlaceholderLocationClicked,Z=j.stateCallbacks,$=Z.onOpen,ee=Z.onClose,te=Z.onStartLoading,ne=Z.onStopLoading,ae=j.searchSessionId;return Object(l.useEffect)(function(){h&&$(!0)},[h,$]),m&&!T?null:r.a.createElement(b,{color:s,styleVariant:d,overlayVariant:u,placeholderText:c,query:A,displayedQuery:x,scope:k,resultsPlaceholder:G?null:r.a.createElement(P,{scope:k,onStartLoading:te,onStopLoading:ne,sponsorDataProvider:g,onPlaceholderLocationClicked:X,hideQuickLinks:"GeoPicker"===S,isOpen:T}),onChange:J,onClose:ee,onFocus:M,onBlur:z,onKeyDown:B,onSubmit:Q,onResultHovered:K,onResultClicked:W,onOpen:$,isLoading:U,isOpen:T,selectedIndex:H,results:D,searchSessionId:ae,testAttribute:"typeahead-".concat(n)})})}}});
//# sourceMappingURL=search.typeahead.86a9602622.js.map