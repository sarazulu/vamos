($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/trips.tracking",d:["vendor-babel","vendor-react-libs","vendor-urql","@ta/cpm.tracking","lithium-platform","@ta/trips.impressions","@ta/trips.trip-types"],e:["./packages/trips/tracking/index.jsx"],m:{"./packages/trips/tracking/index.jsx":function(e,t,n){"use strict";n.r(t);var i=n("@babel/runtime/helpers/esm/defineProperty"),r=n.n(i),o=n("@babel/runtime/helpers/esm/slicedToArray"),s=n.n(o),a=n("react"),c=n("urql"),u=n("@ta/cpm.tracking"),l=n.n(u),d=n("@ta/lithium.context"),p=n("@ta/trips.impressions"),v=(n("@ta/trips.trip-types"),n("@ta/common.string")),f={sessionUuid:Object(v.uuid)(),sessionOrder:0,incrementOrder:function e(){},resetSession:function e(){}},m=a.createContext(f),k={sessionUuid:Object(v.uuid)(),sessionOrder:0,incrementOrder:function e(){},resetSession:function e(){}},S=a.createContext(k),O=a.createContext({tripId:0}),w=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"mutation","name":{"kind":"Name","value":"LogInteraction"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"interaction"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"InteractionV4Input"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","alias":{"kind":"Name","value":"logInteraction"},"name":{"kind":"Name","value":"logInteractionV4"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"interaction"},"value":{"kind":"Variable","name":{"kind":"Name","value":"interaction"}}}],"directives":[]}]}}],"loc":{"start":0,"end":133}}');w.__key=19431441965389,w.loc.source={body:"11ac3c32214d"};var g=w;function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(n,!0).forEach(function(t){r()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var h={Home:"HomeFeed",Profile:"ProfileFeed",Attractions:"AttractionList",Attraction_Review:"AttractionDetail",Attraction_Products:"AttractionList",AttractionProductReview:"AttractionProductReview",Hotels:"HotelList",SmartDeals:"HotelList",HotelHighlight:"HotelList",HotelsList:"HotelList",HotelsNear:"HotelList",Vacation_Packages:"HotelList",Hotel_Review:"HotelDetail",Restaurants:"RestaurantList",Restaurant_Review:"RestaurantDetail",ShowUserReviews:"ShowUserReview",ShowUserReviewsHotels:"ShowUserReview",ShowUserReviewsRestaurants:"ShowUserReview",ShowUserReviewsAttractions:"ShowUserReview",Recent:"Recent",Forums:"Forums",ShowTopic:"Forums",ShowForum:"Forums",Trips:"Trips",Map:"Map",MySaves:"MySaves",LastMinute:"HotelList",LocalMaps:"Map",LocalMapsRedesign:"Map",VacationRentalReview:"VacationRentalDetail"},y=function e(t){return t&&h[t]?h[t].toUpperCase():void 0},x=function e(t){return t&&(y(t)||y(t.replace(/^Mobile/,"")))},R=function e(t){var n=t.source,i=t.pageAsContext,o=t.saveObject,u=t.trackingContext,v=t.withSaveSession,f=t.withOrganizeSession,k=a.useContext(d.Route),w=s()(k,1)[0].page,C=a.useContext(m),h=C.sessionUuid,y=C.sessionOrder,R=C.incrementOrder,U=a.useContext(S),P=U.sessionUuid,j=U.sessionOrder,T=U.incrementOrder,A=a.useContext(p.TripTrackingImpression).impressionId||"",H=u||i&&w||void 0,I=o||{},L=I.id,M=I.type,D=a.useContext(l.a).isBoosted,N=a.useContext(O).tripId,E=a.useMemo(function(){return{detailId:L?"".concat(L):void 0,saveType:M,isBoosted:D,tripId:N}},[L,M,D,N]),V=a.useMemo(function(){return v?{sessionType:"SAVE",sessionUuid:h,sessionOrder:y}:f?{sessionType:"ORGANIZE",sessionUuid:P,sessionOrder:j}:null},[j,P,y,h,f,v]),F=Object(c.useMutation)(g),_=s()(F,2)[1];return[a.useCallback(function(e,t){var i;v?R():f&&T();var o=E;t&&(o={detailId:"".concat(t.id),saveType:t.type});var s,a,c=window.location.pathname,u="Unknown"===H?(null===(i=c.match(/^\/([a-zA-Z0-9_]+)/))||void 0===i?void 0:i[1])||"Home":H,l={elementClick:e.elementClick&&b({puid:A},o,{context:u},V,{},e.elementClick),filterClick:e.filterClick&&b({puid:A},e.filterClick),modalSuccess:e.modalSuccess&&b({puid:A},E,{context:u},V,{},e.modalSuccess),overflowClick:e.overflowClick&&b({puid:A},e.overflowClick,{},V),overflowSuccess:e.overflowSuccess&&b({puid:A},V,{},E,{},e.overflowSuccess),linkReferenceClick:e.linkReferenceClick&&b({puid:A},e.linkReferenceClick)};return _({interaction:r()({},n,(s=l,a=s,["elementClick","modalSuccess"].forEach(function(e){a[e]&&a[e].context&&(a[e].context=x(a[e].context)||null),a[e]&&a[e].saveType&&(a[e].saveType=a[e].saveType.toUpperCase()),a[e]&&a[e].action&&(a[e].action=a[e].action.toUpperCase())}),["elementClick","filterClick","modalSuccess","overflowClick","overflowSuccess"].forEach(function(e){a[e]&&a[e].element&&(a[e].element=a[e].element.toUpperCase())}),["modalSuccess"].forEach(function(e){a[e]&&a[e].fields&&(a[e].fields=a[e].fields.map(function(e){return e.toUpperCase()}))}),a))})},[v,f,A,E,H,V,_,n,R,T]),A]},U=function e(t){var n=t.children,i=t.source,r=t.pageAsContext,o=t.saveObject,a=t.trackingContext,c=t.withSaveSession,u=t.withOrganizeSession,l=R({source:i,pageAsContext:r,saveObject:o,trackingContext:a,withSaveSession:c,withOrganizeSession:u}),d=s()(l,2);return n(d[0],d[1])};U.defaultProps={pageAsContext:!1,saveObject:void 0,trackingContext:void 0};var P=U,j=function e(){var t=a.useState({sessionUuid:Object(v.uuid)(),sessionOrder:0}),n=s()(t,2),i=n[0],r=n[1];return a.useMemo(function(){return{sessionUuid:i.sessionUuid,sessionOrder:i.sessionOrder,incrementOrder:function e(){return r(function(e){return{sessionUuid:e.sessionUuid,sessionOrder:e.sessionOrder+1}})},resetSession:function e(){return r({sessionUuid:Object(v.uuid)(),sessionOrder:0})}}},[i])},T=function e(t){var n=t.children,i=j();return a.createElement(m.Provider,{value:i},n)},A=function e(t){var n=t.children,i=j();return a.createElement(S.Provider,{value:i},n)};n.d(t,"TripInteraction",function(){return P}),n.d(t,"getInteractionsContext",function(){return x}),n.d(t,"useTripInteraction",function(){return R}),n.d(t,"SaveSessionTrackingContext",function(){return m}),n.d(t,"SaveSessionProvider",function(){return T}),n.d(t,"OrganizeSessionTrackingContext",function(){return S}),n.d(t,"OrganizeSessionProvider",function(){return A}),n.d(t,"SponsorshipTrackingContext",function(){return O}),n.d(t,"LogInteractionMutation",function(){return g})}}});
//# sourceMappingURL=trips.tracking.07e5339773.js.map