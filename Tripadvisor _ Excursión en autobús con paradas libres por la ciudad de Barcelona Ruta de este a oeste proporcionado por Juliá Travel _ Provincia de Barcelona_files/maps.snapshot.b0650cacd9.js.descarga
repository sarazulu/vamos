($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/maps.snapshot",d:["vendor-babel","vendor-react-libs","@ta/platform.interactions","lithium-platform"],e:["./packages/maps/snapshot/snapshot.jsx"],m:{"./packages/maps/snapshot/snapshot.jsx":function(n,e,t){"use strict";t.r(e);var a=t("@babel/runtime/helpers/esm/slicedToArray"),o=t.n(a),i=t("react"),s=t("@ta/platform.interactions"),r=t("@ta/lithium.context"),c=t("@ta/common.throttle"),m=t.n(c),p=function n(e,t){var a;if((e.width||0)<1||(e.height||0)<1)return console.error("StaticMapSnapshot - Width (".concat(e.width,") and height (").concat(e.height,") params must be positive values")),null;if(e.zoom&&(e.zoom<1||e.zoom>19))return console.error("StaticMapSnapshot - Zoom (".concat(e.zoom,") must be between 1 and 19.")),null;var o=function n(e){var t=[];return Object.keys(e).forEach(function(n){var a=e[n];if(null!=a){var o=a.toString();t.push([encodeURIComponent(n),encodeURIComponent(o)].join("="))}}),t.join("&")}({center:[e.center.lat,e.center.lng].join(","),width:e.width,height:e.height,zoom:e.zoom,geoId:e.geoId,servletName:e.servlet,scale:e.scale,forceMapProvider:e.forceMapProvider});return(null===(a=e.markers)||void 0===a?void 0:a.length)&&(o+="&".concat(function n(e){var t={};return e&&e.length?(e.forEach(function(n){if(n){var e=n.iconUrl,a=[n.position.lat,n.position.lng];t[e]?t[e].push(a):t[e]=[a]}}),Object.keys(t).map(function(n){return"markers=".concat(n,"|").concat(t[n].join("|"))}).join("&")):""}(e.markers))),e.useImageTag&&(o+="&redirectKey=".concat(t)),"/data/1.0/maps/staticmap?".concat(o)},l=function n(e){var t=i.useState(null),a=o()(t,2),c=a[0],l=a[1],u=i.useContext(r.Environment).locale.code,_=i.useContext(r.Device).securityToken,g=Object(s.useGARecorder)(),h=p(e,_),v=i.useState(h),f=o()(v,2),d=f[0],P=f[1],A=i.useCallback(m()(function(n){return P(p(n,_))},100),[_]),C=i.useRef(null);return i.useEffect(function(){e.useImageTag&&A(e)},[e,A]),i.useEffect(function(){if(!e.useImageTag&&h){var n=setTimeout(function(){var n=fetch(h,{credentials:"same-origin"});C.current=n,n.then(function(n){return n.json()}).then(function(e){n===C.current&&(l(e.url),g({module:"staticmap",action:"load",context:e.mapProvider}))}).catch(function(e){n===C.current&&(l(null),g({module:"staticmap",action:"failed",context:h}),console.error("Error loading snapshot",e))})},100);return function(){clearTimeout(n)}}},[e.useImageTag,h,g]),i.useEffect(function(){e.useImageTag&&d&&g({module:"staticmap",action:"load",context:"zh-Hans"===u?"STATIC_MAP_AUTONAVI":"STATIC_MAP_GOOGLE"})},[e.useImageTag,d,u,g]),e.useImageTag&&d?i.createElement("img",{"data-test-target":"staticMapSnapshot",alt:e.alt,className:e.imgClassName,src:d}):i.createElement("span",{"data-test-target":"staticMapSnapshot"},c&&i.createElement("img",{alt:e.alt,className:e.imgClassName,src:c}))};l.defaultProps={imgClassName:null,alt:"",scale:1,zoom:13,forceMapProvider:null,markers:[]};var u=l,_={attractionPin:"img2/maps/icons/component_map_pins_v1/A_Pin_Small.png",miniAttractionPin:"img2/maps/icons/component_map_pins_v1/A_Pin_xs.png",anchorAttractionPin:"img2/maps/icons/responsive_map_pins_v2/AR_Anchor_pin.png",hotelPin:"img2/maps/icons/component_map_pins_v1/H_Pin_Small.png",miniHotelPin:"img2/maps/icons/component_map_pins_v1/H_Pin_xs.png",anchorHotelPin:"img2/maps/icons/responsive_map_pins_v2/H_Anchor_pin.png",restaurantPin:"img2/maps/icons/component_map_pins_v1/R_Pin_Small.png",miniRestaurantPin:"img2/maps/icons/component_map_pins_v1/R_Pin_xs.png",anchorRestaurantPin:"img2/maps/icons/responsive_map_pins_v2/R_Anchor_pin.png",rentalPin:"img2/maps/icons/responsive_map_pins_v1/VR_green_pin.png",anchorRentalPin:"img2/maps/icons/responsive_map_pins_v2/VR_Anchor_pin.png",carPin:"img2/maps/icons/component_map_pins_v1/C_Pin_Small.png",miniCarPin:"img2/maps/icons/component_map_pins_v1/C_Pin_xs.png",anchorCarPin:"img2/maps/icons/responsive_map_pins_v2/C_Anchor_pin.png"};t.d(e,"SnapshotAssetCatalogue",function(){return _}),e.default=u}}});
//# sourceMappingURL=maps.snapshot.b0650cacd9.js.map