($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/attractions.infinity-loader",d:["vendor-babel","vendor-react-libs","@ta/common.features","lithium-platform","@ta/attractions.telesales-number"],e:["./packages/attractions/infinity-loader/infinity-loader.jsx"],m:{"./packages/attractions/infinity-loader/infinity-loader.jsx":function(e,t,n){"use strict";n.r(t);var i=n("@babel/runtime/helpers/esm/slicedToArray"),r=n.n(i),a=n("react"),o=n("@ta/common.features"),s=n("@ta/lithium.context"),u=n("@ta/attractions.telesales-number"),l=function e(){var t=Object(o.featureIsEnabled)("infinity_tracking_iframe"),n=Object(a.useState)(null),i=r()(n,2),s=i[0],u=i[1];return Object(a.useEffect)(function(){var e,n=t?0:6;return function t(){var i,r,a,o;n<6&&(n+=1,(null===(i=window)||void 0===i?void 0:null===(r=i.infinity)||void 0===r?void 0:r.customerServiceNumber)?u(null===(a=window)||void 0===a?void 0:null===(o=a.infinity)||void 0===o?void 0:o.customerServiceNumber):e=setTimeout(t,500))}(),function(){e&&clearTimeout(e)}},[t]),{number:s}};n.d(t,"useInfinityTelesalesNumberLegacy",function(){return l});var c={"en-US":"2627","en-UK":"2628","en-CA":"2629","en-AU":"2630",de:"2631",es:"2632",fr:"2633",it:"3167"};t.default=function e(t){var n=t.children,i=t.staticServiceNumber,l=Object(u.useProminentTelesalesNumber)(),d=a.useState({number:null}),m=r()(d,2),f=m[0],v=m[1],b=a.useState(null),y=r()(b,2),h=y[0],g=y[1],w=a.useContext(s.Environment),p=w.locale.code,E=w.domainName,S=a.useContext(s.Visitor).sessionId,x=a.useContext(s.Route),j=r()(x,1)[0].path,C=c[p],I="DESKTOP"===a.useContext(s.Device).viewportCategory,P=Object(o.featureIsEnabled)("infinity_tracking_iframe_lithium")&&I&&!l;return a.useEffect(function(){var e=function e(t){var n,i;(null==t?void 0:null===(n=t.data)||void 0===n?void 0:n.number)&&"string"==typeof(null==t?void 0:null===(i=t.data)||void 0===i?void 0:i.number)&&(v({number:t.data.number}),window.removeEventListener("message",e))};if(S&&C&&P){var t=new URLSearchParams({igrp:C,vref:document.referrer,href:"https://".concat(E).concat(j),host:E,sessionId:S,title:document.title,phone:i});window.addEventListener("message",e,!1),g("".concat("/js3/lib/infinity_v2/infinity.html?").concat(t.toString()))}return function(){window.removeEventListener("message",e)}},[E,C,P,j,S,i]),a.createElement(a.Fragment,null,a.createElement(u.TelesalesContextProvider,{value:f},n),h&&a.createElement("iframe",{sandbox:"allow-scripts allow-same-origin",title:"Infinity Iframe",src:h,height:0,width:0}))}}}});
//# sourceMappingURL=attractions.infinity-loader.d7785a0f69.js.map