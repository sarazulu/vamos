($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/cpm.consent-mgmt",d:["vendor-babel","vendor-common","@ta/common.features","@ta/cpm.universal-consent-platform-loader"],e:["./packages/cpm/consent-mgmt/consent-mgmt.jsx"],m:{"./packages/cpm/consent-mgmt/consent-mgmt.jsx":function(e,n,t){"use strict";t.r(n);var o=t("@babel/runtime/helpers/esm/typeof"),a=t.n(o),i=t("js-cookie"),r=t.n(i),c=t("@ta/common.features"),s=t("@ta/cpm.universal-consent-platform-loader"),E="TATrkConsent",d={expires:365},m={DISABLED:"disabled",CONSENT_PENDING:"pending",CONSENT_CATEGORIES_RECEIVED:"received",TIMED_OUT:"timeout"},u={ADEXCHANGE:"ad exchange",ADNETWORK:"ad network",ADSERVER:"ad server",ADVERIFICATION:"ad verification",ADVERTISER:"advertiser",AGENCY:"agency",ANALYTICS:"analytics provider",BUSINESSINTEL:"business intelligence",CONSENTMGMT:"content management/saas",ADFORMAT:"creative/ad format technology",DATAAGGREGATOR:"data aggregator/supplier",DATAMGMTPLAT:"data management platform",DEMANDSITEPLAT:"demand side platform",MKTSOLUTIONS:"marketing solutions",MOBILE:"mobile",ONLINEPRIVACYPLAT:"online privacy platform",OPTIMIZER:"optimizer",OTHER:"other",PUBLISHER:"publisher",RESEARCH:"research provider",RETARGETER:"retargeter",SOCIALMEDIA:"social media",SUPPLYSIDEPLAT:"supply side platform",TAGMANAGER:"tag manager",VIDEO:"video",WEBSITEOPT:"website optimization",ALL:"all"},f={"ad exchange":"ADX","ad network":"ADN","ad server":"ADS","ad verification":"AVE",advertiser:"ADV",agency:"AGC","analytics provider":"ANA","business intelligence":"BIN","content management/saas":"CMG","creative/ad format technology":"ADF","data aggregator/supplier":"DAG","data management platform":"DMG","demand side platform":"DSP","marketing solutions":"MKT",mobile:"MOB","online privacy platform":"OPP",optimizer:"OPT",other:"OTH",publisher:"PUB","research provider":"RES",retargeter:"RET","social media":"SOC","supply side platform":"SUP","tag manager":"TAG",video:"VID","website optimization":"WOP",all:"ALL"},l=function e(n){if("function"==typeof n)try{n()}catch(e){}},T=function e(n,t,o){return"function"==typeof n&&(void 0===t||"function"==typeof t)&&"string"==typeof o},A=function e(n){var t=[],o=[];return void 0!==n&&Object.keys(n).forEach(function(e){!0===n[e]?t.push(f[e]):o.push(f[e])}),JSON.stringify({out:o.join(),in:t.join()})};t.d(n,"allCategoriesConsented",function(){return N}),t.d(n,"setTAConsentCookie",function(){return I}),t.d(n,"updateConsentStatus",function(){return y}),t.d(n,"loadTrackerDeferred",function(){return b}),t.d(n,"loadPageMoniker",function(){return h}),t.d(n,"showOptionsDialog",function(){return P}),t.d(n,"CategoriesEnum",function(){return u}),t.d(n,"CategoriesEnumShortCode",function(){return f});var C,p={},D={},O=!1,g=Object(c.featureIsEnabled)("consent_mgmt_enabled")?m.CONSENT_PENDING:m.DISABLED;function N(){return O}function I(e){var n,t=e;void 0===t&&(t=D),n=!0===N()?'{"out":"", "in":"ALL"}':A(t),r.a.set(E,btoa(n),d)}var S,v=function e(){Object.keys(p).forEach(function(e){p[e].forEach(function(e){"Firing ".concat(e.onDenyCB.name),l(e.onDenyCB)})}),C&&(I(),l(C),C=void 0),g=m.TIMED_OUT};function y(e){switch(g){case m.DISABLED:case m.CONSENT_CATEGORIES_RECEIVED:return;case m.TIMED_OUT:case m.CONSENT_PENDING:clearTimeout(S),g=m.CONSENT_CATEGORIES_RECEIVED,O=(D=e).hasOwnProperty(u.ALL)&&!0===D[u.ALL],void 0!==r.a.get(E)&&I(D),C&&(l(C),C=void 0),Object.keys(p).forEach(function(e){!0===D[e]||O?("Consent for ***".concat(e,"*** is received"),p[e].forEach(function(e){"Firing ".concat(e.onConsentCB.name),l(e.onConsentCB)})):("Consent for ***".concat(e,"*** is declined"),p[e].forEach(function(e){"Firing ".concat(e.onDenyCB.name),l(e.onDenyCB)}))})}}var R=function e(n){!1===Object(s.getEvidonReady)()&&g===m.CONSENT_PENDING&&(S=setTimeout(v,5e3),Object(s.setEvidonReady)(!0),Object(s.loadEvidon)(s.taId,n,y))};function b(e,n,t,o){switch(R(o),!0!==T(e,n,t)&&(a()(e),a()(n),a()(t)),g){case m.DISABLED:"consent management disabled, loading on-consent callback immediately: ".concat(e.name),l(e);break;case m.TIMED_OUT:l(n),C&&(l(C),C=void 0);break;case m.CONSENT_CATEGORIES_RECEIVED:!0===D[t]||!0===O?("Consent for ".concat(t," is granted, firing on-consent callback immediately: ").concat(e.name),l(e)):"function"==typeof n&&("Consent for ".concat(t," is declined, firing on-denial callback immediately: ").concat(n.name),l(n));break;case m.CONSENT_PENDING:p.hasOwnProperty(t)&&Array.isArray(p[t])?p[t].push({onConsentCB:e,onDenyCB:n}):p[t]=[{onConsentCB:e,onDenyCB:n}]}}function h(e){switch(g){case m.DISABLED:case m.CONSENT_CATEGORIES_RECEIVED:l(e);break;case m.TIMED_OUT:I(),l(e);break;case m.CONSENT_PENDING:C=e}}function P(e){R(e);try{window.evidon.notice.showOptions()}catch(e){}}}}});
//# sourceMappingURL=cpm.consent-mgmt.109ee5486a.js.map