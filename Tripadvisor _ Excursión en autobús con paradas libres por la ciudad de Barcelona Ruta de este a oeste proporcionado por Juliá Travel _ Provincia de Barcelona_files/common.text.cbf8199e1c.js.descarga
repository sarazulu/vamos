($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/common.text",d:["vendor-babel","vendor-react-libs","lithium-platform","@ta/events.window-resize","@ta/common.text-html"],e:["./packages/common/text/text.jsx"],m:{"./packages/common/text/text.jsx":function(e,t,n){"use strict";n.r(t);var a=n("@babel/runtime/helpers/esm/classCallCheck"),r=n.n(a),i=n("@babel/runtime/helpers/esm/possibleConstructorReturn"),o=n.n(i),l=n("@babel/runtime/helpers/esm/getPrototypeOf"),s=n.n(l),c=n("@babel/runtime/helpers/esm/assertThisInitialized"),p=n.n(c),u=n("@babel/runtime/helpers/esm/inherits"),d=n.n(u),h=n("@babel/runtime/helpers/esm/defineProperty"),m=n.n(h),f=n("@babel/runtime/helpers/esm/createClass"),C=n.n(f),v=n("react"),g=n("@ta/platform.i18n"),S=n.n(g),b=n("@ta/common.classnames"),x=n.n(b),y={readMore:"_2f_ruteS",content:"cPQsENeY",collapsed:"_2uD5bLZZ",ellipsis:"_1QWZ7Alt",variantDefault:"_1bona3Pu",ctaWrapper:"_1FFf_lzK",ctaWrapperNewline:"_36B4Vw6t",cta:"_1i_1cupw",ctaCollapseWrapper:"hw66xH7d",readMoreCtaText:"_1wMVHz9q",readMoreCtaGreen:"Zvb2FkPj",variantFadeOut:"_2qDWkiYp"};function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(n,!0).forEach(function(t){m()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var w=function(e){function t(e){var n;return r()(this,t),n=o()(this,s()(t).call(this,e)),m()(p()(n),"componentDidUpdate",function(e){void 0!==n.props.collapsed&&n.props.collapsed!==e.collapsed&&!!n.props.collapsed!==n.state.collapsed?n.props.collapsed?n.computeState():n.revealHiddenContent():n.props.numLinesToShow===e.numLinesToShow&&n.props.alwaysShowReadMore===e.alwaysShowReadMore||n.computeState()}),m()(p()(n),"setStateCallback",function(){n.props.onStateChange&&n.props.onStateChange(n.state)}),m()(p()(n),"getContentDiv",function(){return n.contentRef.current}),m()(p()(n),"computeState",function(){var e=n.findFirstTextNodeParent(n.getContentDiv());if(e){var t=window.getComputedStyle(e),a=t.getPropertyValue("line-height"),r=t.getPropertyValue("font-size");a&&"normal"!==a?a=a.replace("px",""):(r=r?r.replace("px",""):14,a=Math.floor(1.2*parseFloat(r)));var i={scrollHeight:n.getScrollHeight(),fontSize:r,lineHeight:a},o=n.computeStateFromStyles(i);n.hasCollapsibleContent=i.scrollHeight>a*n.props.numLinesToShow,n.setState(T({},o),n.setStateCallback)}else n.revealHiddenContent()}),m()(p()(n),"findFirstTextNodeParent",function(e){if(!e||!e.childNodes)return null;for(var t=0;t<e.childNodes.length;t++){var a=e.childNodes.item(t);if(a.nodeType===Node.TEXT_NODE)return e;var r=n.findFirstTextNodeParent(a);if(r)return r}return null}),m()(p()(n),"revealHiddenContent",function(){n.setState(T({},n.contentRevealedState),n.setStateCallback)}),m()(p()(n),"collapseContent",function(){n.computeState()}),m()(p()(n),"handleClick",function(e){if(n.props.clickCallback(e))switch(e){case t.CTA:n.revealHiddenContent();break;case t.CTA_COLLAPSE:n.collapseContent();break;case t.CONTENT:n.state.collapsed&&n.revealHiddenContent()}}),m()(p()(n),"contentRevealedState",{collapsed:!1,divHeight:"none"}),m()(p()(n),"contentRef",null),m()(p()(n),"ctaStyles",void 0),m()(p()(n),"collapsedCtaStyles",void 0),m()(p()(n),"variantCssClass",""),m()(p()(n),"hasCollapsibleContent",!1),m()(p()(n),"computeStateFromStyles",function(e){return console.error("".concat(n.constructor.name," did not provide its own implementation of computeStateFromStyles()")),"computedStyles = {scrollHeight: ".concat(e.scrollHeight,", fontSize: ").concat(e.fontSize,", lineHeight: ").concat(e.lineHeight),n.state}),m()(p()(n),"defaultCTA",function(){return v.createElement("div",{className:y.cta},v.createElement("span",{className:y.ellipsis}),v.createElement("span",null,v.createElement("a",{className:x()(y.readMoreCtaText,m()({},y.readMoreCtaGreen,n.props.greenCta))},n.props.ctaText?n.props.ctaText:v.createElement(S.a,{id:"common_Read_more"}))))}),m()(p()(n),"defaultCollapseCTA",function(){return v.createElement("div",null,v.createElement("a",{className:x()(y.readMoreCtaText,m()({},y.readMoreCtaGreen,n.props.greenCta))},n.props.ctaCollapseText?n.props.ctaCollapseText:v.createElement(S.a,{id:"common_Readless"})))}),n.state=!1!==e.collapsed?{collapsed:!0,divHeight:e.initialDivHeight}:{collapsed:!1,divHeight:"none"},n.contentRef=v.createRef(),n.ctaStyles={},n}return d()(t,e),C()(t,[{key:"componentDidMount",value:function e(){this.state.collapsed&&this.computeState()}},{key:"getScrollHeight",value:function e(){return this.getContentDiv().scrollHeight}},{key:"render",value:function e(){var n,a=this,r=function e(){return a.handleClick(t.CTA)},i=this.props.cta;return n=i?"function"==typeof i?function(){return i(r)}:function(){return i}:this.defaultCTA,v.createElement("div",{className:"".concat(y.readMore," ").concat(this.variantCssClass," ").concat(this.props.customCssClass," ").concat(this.state.collapsed?y.collapsed:"")},v.createElement("div",{ref:this.contentRef,className:y.content,style:{maxHeight:this.state.divHeight},onClick:function e(){return a.handleClick(t.CONTENT)}},this.props.children),v.createElement("div",{className:this.props.ctaNewline?y.ctaWrapperNewline:y.ctaWrapper,style:this.ctaStyles,onClick:function e(){return"function"!=typeof i&&r()}},v.createElement(n,null)),this.props.collapsible&&!this.state.collapsed&&(this.props.alwaysShowReadMore||this.hasCollapsibleContent)&&v.createElement("div",{className:y.ctaCollapseWrapper,style:this.collapsedCtaStyles||this.ctaStyles,onClick:function e(){return a.handleClick(t.CTA_COLLAPSE)}},this.props.ctaCollapse?this.props.ctaCollapse:this.defaultCollapseCTA()))}}]),t}(v.Component);m()(w,"defaultProps",{cta:null,ctaText:null,numLinesToShow:4,initialDivHeight:16,customCssClass:"",clickCallback:function e(t){return!0},collapsible:!1,ctaNewline:!1,alwaysShowReadMore:!1,collapsed:void 0}),m()(w,"CONTENT","CONTENT"),m()(w,"CTA","CTA"),m()(w,"CTA_COLLAPSE","CTA_COLLAPSE");var k=w,z=function(e){function t(e){var n;return r()(this,t),n=o()(this,s()(t).call(this,e)),m()(p()(n),"computeStateFromStyles",function(e){var t=e.lineHeight*n.props.numLinesToShow;return n.ctaStyles={fontSize:"".concat(e.fontSize,"px"),lineHeight:"".concat(e.lineHeight,"px")},e.scrollHeight<=t?n.props.alwaysShowReadMore?{collapsed:!0,divHeight:"initial"}:n.contentRevealedState:n.state.divHeight!==t?{collapsed:!0,divHeight:t}:n.state}),n.variantCssClass=y.variantDefault,n}return d()(t,e),t}(k),E=function(e){function t(e){var n;return r()(this,t),n=o()(this,s()(t).call(this,e)),m()(p()(n),"computeStateFromStyles",function(e){if(e.scrollHeight<=e.lineHeight*n.props.numLinesToShow)return n.contentRevealedState;var t=e.lineHeight*(n.props.numLinesToShow+1);return n.state.divHeight!==t?(n.ctaStyles={fontSize:"".concat(e.fontSize,"px"),lineHeight:"".concat(e.lineHeight,"px"),backgroundImage:"linear-gradient(rgba(255, 255, 255, 0) 0px, white ".concat(e.lineHeight,"px)"),paddingTop:"".concat(e.lineHeight,"px")},n.collapsedCtaStyles={fontSize:"".concat(e.fontSize,"px"),lineHeight:"".concat(e.lineHeight,"px"),backgroundImage:"linear-gradient(rgba(255, 255, 255, 0) 0px, white ".concat(e.lineHeight,"px)")},{collapsed:!0,divHeight:t}):n.state}),n.variantCssClass=y.variantFadeOut,n}return d()(t,e),t}(k),N=function e(t){var n=t.text,a=t.max;if(n.length<a)return n;var r=a-3,i=n.lastIndexOf(" ",r);return"".concat(i<0?n.substring(0,r):n.substring(0,i),"...")},F=function(e){function t(){var e,n;r()(this,t);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return n=o()(this,(e=s()(t)).call.apply(e,[this].concat(i))),m()(p()(n),"state",{expanded:!1}),m()(p()(n),"toggle",function(){return n.setState({expanded:!n.state.expanded})}),n}return d()(t,e),C()(t,[{key:"render",value:function e(){var t=this.props,n=t.text,a=t.max;return this.state.expanded||n.length<a?n:v.createElement(v.Fragment,null,v.createElement(N,{text:n,max:a}),v.createElement("a",{className:"_3oxJ_I9s",onClick:this.toggle},v.createElement(S.a,{id:"more_link"})))}}]),t}(v.Component),P=n("@ta/events.window-resize"),O=n.n(P),R=function(e){function t(e){var n;return r()(this,t),n=o()(this,s()(t).call(this,e)),m()(p()(n),"resizeCallback",function(){n.setState({resizedFontSize:n.props.defaultFontSizePx,numIters:0},n.makeFit)}),m()(p()(n),"containerRef",{}),n.state={resizedFontSize:e.defaultFontSizePx,numIters:0},n}return d()(t,e),C()(t,[{key:"componentDidMount",value:function e(){this.makeFit()}},{key:"makeFit",value:function e(){if(this.containerRef&&!(this.state.numIters>=4)){var t=this.containerRef,n=t.scrollWidth,a=void 0===n?0:n,r=t.clientWidth,i=void 0===r?0:r,o=t.style,l=o.paddingLeft,s=o.paddingRight,c=o.fontSize,p=parseFloat(c);if(!(i>=a||i<=0||p<=this.props.minFontSizePx)){var u=(parseFloat(l)||0)+(parseFloat(s)||0),d=(i-u)/(a-u);3===this.state.numIters&&(d=.9);var h=Math.max(p*d,this.props.minFontSizePx);this.setState({resizedFontSize:h,numIters:this.state.numIters+1},this.makeFit)}}}},{key:"render",value:function e(){var t=this;return v.createElement("div",{style:{fontSize:this.state.resizedFontSize},ref:function e(n){t.containerRef=n},className:this.props.className},this.props.children,this.props.resizeOnScreenResize?v.createElement(O.a,{callback:this.resizeCallback,useDebounce:!0}):null)}}]),t}(v.Component);m()(R,"defaultProps",{minFontSizePx:8,defaultFontSizePx:14,resizeOnScreenResize:!1});var _=n("@ta/common.text-html"),A=n("@ta/lithium.context"),D=function e(t){var n=t.children,a=t.contentLanguage,r=t.truncate,i=function e(t){return t?t.match(/^(ar|iw)/i)?"rtl":"ltr":"auto"}(a),o=v.useContext(A.Environment).locale.isRtl;return"auto"===i||r||"rtl"===i!==o?v.createElement("span",{className:x()(m()({},"_3_UdEQrA",r)),dir:i},n):n},M=function e(t){return v.createElement("span",{className:"_2Ti9ZpDu"},v.createElement("u",null,t.children))};n.d(t,"ReadMore",function(){return z}),n.d(t,"ReadMoreFadeOut",function(){return E}),n.d(t,"Abbreviate",function(){return N}),n.d(t,"AbbreviateWithMore",function(){return F}),n.d(t,"AutoResizer",function(){return R}),n.d(t,"EscapeHtml",function(){return _.escapeHtml}),n.d(t,"unescapeHtml",function(){return _.unescapeHtml}),n.d(t,"DirectionalText",function(){return D}),n.d(t,"DottedUnderline",function(){return M})}}});
//# sourceMappingURL=common.text.cbf8199e1c.js.map