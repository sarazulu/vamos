($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/platform.sentry",d:["vendor-babel","lithium-platform","vendor-react-libs"],e:["./packages/platform/sentry/sentry.jsx"],m:{"./packages/platform/sentry/sentry.jsx":function(e,t,n){"use strict";n.r(t),n.d(t,"sendSentryRequest",function(){return l}),n.d(t,"LOGGER_COMMON_LOGGING",function(){return f}),n.d(t,"installSentry",function(){return g}),n.d(t,"useSentry",function(){return _}),n.d(t,"Sentry",function(){return v});var r=n("@babel/runtime/helpers/esm/typeof"),i=n.n(r),a=n("@babel/runtime/helpers/esm/slicedToArray"),o=n.n(a),s=n("@ta/lithium.context"),u=n("@ta/platform.tti"),c=n("react"),l=function e(t,n){t.withScope(function(e){Object.entries(n.tags).forEach(function(t){var n=o()(t,2),r=n[0],i=n[1];e.setTag(r,i)}),n.extraData&&Object.entries(n.extraData).forEach(function(t){var n=o()(t,2),r=n[0],i=n[1];e.setExtra(r,i)}),t.captureException(n.error)})},f="commonLogging",d=!1,m=10,p=null,g=function e(t,r,a){var s=t.serverName,u=t.drsInfo,c=a.version,g=a.domainName,_=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"tripadvisor-web-app";return Promise.all([n.e("@ta/platform.sentry/@sentry/browser.demand").then(n.bind(null,"./node_modules/@sentry/browser/esm/index.js")),n.e("@ta/platform.sentry/@sentry/integrations.demand").then(n.bind(null,"./node_modules/@sentry/integrations/esm/index.js"))]).then(function(e){var t=o()(e,2),n=t[0],a=t[1];if(!d){d=!0;var v={dsn:"https://sentry@".concat(g,"/SentryProxy"),release:c,environment:"www.tripadvisor.com"===s||"www.tripadvisor.cn"===s?"live":"hare.tripadvisor.com"===s?"hare":"webml.dev.tripadvisor.com"===s?"webml":"dev",includePaths:["rutabaga_cyclone"],integrations:[new a.CaptureConsole({levels:["error"]})],beforeSend:function e(t){return m===Math.ceil(5)&&null===p&&(p=setTimeout(function(){m=10,p=null},6e4)),0===m?null:(m--,t&&t.exception&&t.exception.values&&t.exception.values.forEach(function(e){e&&e.stacktrace&&e.stacktrace.frames&&e.stacktrace.frames.forEach(function(e){e&&e.filename&&e.filename.includes("t1.tacdn.com")&&(e.filename=e.filename.replace(/session_id(.*)(?=&)/,"session_id=STRIPPED_BY_SENTRY"))})}),t)}};n.init(v),n.configureScope(function(e){e.setTag("hostName",g),e.setTag("runMode","production"),e.setTag("serverName",s),e.setTag("logger","jsDefault"),e.setExtra("drsInfo",u),e.setExtra("sentryProject",_)}),"undefined"!=typeof __PRE_SENTRY_ERRORS__&&__PRE_SENTRY_ERRORS__&&__PRE_SENTRY_ERRORS__.forEach(function(e){l(n,{error:1===e.length&&"object"===i()(e[0])?e[0]:new Error(e.join(" ")),tags:{logger:f}})}),__PRE_SENTRY_ERRORS__=null}return n.configureScope(function(e){e.setTag("page",r)}),n})},_=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.installer,r=t.fallbackPageName,i=t.project,a=void 0===i?"tripadvisor-web-app":i,l=n||g,f=c.useContext(s.Debug),d=c.useContext(s.Route),m=o()(d,1)[0],p=c.useContext(s.Environment),_=c.useRef({status:"uninitialized"});c.useEffect(function(){"uninitialized"===_.current.status?_.current={status:"initializing",done:new Promise(function(e){Object(u.requestTTICallback)(function(){return requestIdleCallback(function(){l(f,m.page||r,p,a).then(function(){e(),_.current={status:"initialized"}})})})})}:"initializing"===_.current.status?_.current={status:"initializing",done:_.current.done.then(function(){return l(f,m.page,p,a)})}:l(f,m.page,p,a)},[f,m,p,l,r,a])},v=function e(t){return _(t),null}}}});
//# sourceMappingURL=platform.sentry.15381b023f.js.map