($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/attractions.product-detail-data-loader",d:["vendor-babel","vendor-react-libs","vendor-urql","lithium-platform","vendor-common","@ta/common.client","@ta/common.features","@ta/attractions.util-decode","@ta/platform.base64","@ta/platform.impressions","@ta/attractions.service-number"],e:["./packages/attractions/product-detail-data-loader/product-detail-data-loader.jsx"],m:{"./packages/attractions/product-detail-data-loader/CommonUtils.jsx":function(e,n,i){"use strict";i.d(n,"h",function(){return a}),i.d(n,"g",function(){return r}),i.d(n,"i",function(){return l}),i.d(n,"c",function(){return d}),i.d(n,"j",function(){return o}),i.d(n,"d",function(){return u}),i.d(n,"k",function(){return s}),i.d(n,"e",function(){return c}),i.d(n,"l",function(){return m}),i.d(n,"b",function(){return v}),i.d(n,"f",function(){return k}),i.d(n,"a",function(){return g});var t=i("react"),a=function e(n,i,t){if(!n)return null;var a=Math.floor(n/60),r=n%60;if(a>24){var l=Math.floor(a/24);return i.string("attraction_product_duration_days_round_v1",{num:l})}if(a>0&&r>0){var d={hours:a,minutes:r};return t?i.string("nsp.duration.hoursminutes.v2",d):i.string("flight_search_results_duration_hour_and_minute",d)}return a>0?t?i.string("nsp.duration.hours.v2",{hours:a}):i.string("flight_search_results_duration_hour_only",{hours:a}):r>0?t?i.string("nsp.duration.minutes.v2",{minutes:r}):i.string("flights_app_minutes_and_class_ffffdca8",{minutes:r}):null},r=function e(n,i){return function e(n,i){if(!n||!n.from||!n.to)return null;var t={numFrom:n.from,numTo:n.to};switch(n.timeUnit){case"DAYS":return i.string("attraction_product_duration_days_range_v1",t);case"HOURS":return i.string("attraction_product_duration_hours_range_v1",t);case"MINUTES":return i.string("attraction_product_duration_minutes_range_v1",t);default:return null}}(null==n?void 0:n.flexibleDuration,i)||a(null==n?void 0:n.durationInMinutes,i)||""},l=function e(n,i){var t=r(n,i);return t?i.string("attractions.merchandising.duration",{sDuration:t}):""},d=function e(n){var i={supplierUrlIsObfuscated:!1},t=null==n?void 0:n.name;if(t){i.supplierName=t;var a=null==n?void 0:n.url;a&&(i.supplierUrl=a)}return i},o=function e(n,i){switch(n){case"MOBILE_ONLY":return i.string("my_bookings_a_mobile_ticket_accepted_short");case"PAPER":return i.string("my_bookings_a_paper_ticket_required_short");default:return null}},u=function e(n,i){switch(n){case"PICKUP_EVERYONE":case"PICKUP_AND_MEET_AT_START_POINT":return i.string("attraction_booking_hotel_pickup");default:return""}},s=function e(n){switch(n){case"INSTANT":case"INSTANT_THEN_MANUAL":return!0;default:return!1}},c=function e(n,i){return s(n)?i.string("shopping_cart_instant_confirmation"):""},m=function e(n,i){return"en"===n||i===n},v=function e(n){return function(e,i){if(e===i)return 0;if(!e)return 1;if(!i)return-1;if(e.language===i.language)return 0;if(e.language===n)return-1;if(i.language===n)return 1;if("en"===e.language)return-1;if("en"===i.language)return 1;var t=e.displayLanguage||"",a=i.displayLanguage||"";return t<a?-1:t>a?1:0}},k=function e(n,i){return n.filter(Boolean).sort(v(i)).map(function(e){return e.displayLanguage}).filter(Boolean).join(", ")},g=function e(n){var i=n.items;return i.length?t.createElement("ul",null,i.map(function(e){return t.createElement("li",{key:e},e)})):null}},"./packages/attractions/product-detail-data-loader/product-detail-data-loader.jsx":function(e,n,i){"use strict";i.r(n);var t=i("@babel/runtime/helpers/esm/defineProperty"),a=i.n(t),r=i("@babel/runtime/helpers/esm/slicedToArray"),l=i.n(r),d=i("react"),o=i("urql"),u=i("@ta/lithium.context"),s=JSON.parse('{"kind":"Document","definitions":[{"kind":"FragmentDefinition","name":{"kind":"Name","value":"InclusionExclusionFields"},"typeCondition":{"kind":"NamedType","name":{"kind":"Name","value":"ExpPresentationService_InclusionExclusion"}},"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"category"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"type"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"description"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"text"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"otherText"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"text"},"arguments":[],"directives":[]}]}}]}}],"loc":{"start":0,"end":165}}');s.__key=0xbc86c28ade37,s.loc.source={body:"bc86c28ade37"};var c=s,m=JSON.parse('{"kind":"Document","definitions":[{"kind":"FragmentDefinition","name":{"kind":"Name","value":"TextValueFields"},"typeCondition":{"kind":"NamedType","name":{"kind":"Name","value":"ExpPresentationService_TextValue"}},"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"text"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"translationInfo"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"source"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"vendor"},"arguments":[],"directives":[]}]}}]}}],"loc":{"start":0,"end":126}}');m.__key=0xd60a3223f1f1,m.loc.source={body:"d60a3223f1f1"};var v=m,k=JSON.parse('{"kind":"Document","definitions":[{"kind":"FragmentDefinition","name":{"kind":"Name","value":"EncodedTextValueFields"},"typeCondition":{"kind":"NamedType","name":{"kind":"Name","value":"ExpPresentationService_TextValue"}},"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"text"},"arguments":[],"directives":[{"kind":"Directive","name":{"kind":"Name","value":"encode"},"arguments":[]}]},{"kind":"Field","name":{"kind":"Name","value":"translationInfo"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"source"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"vendor"},"arguments":[],"directives":[]}]}}]}}],"loc":{"start":0,"end":141}}');k.__key=0xae7d1eb294f1,k.loc.source={body:"ae7d1eb294f1"};var g=k,p=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"FullProductQuery"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"activityId"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]},{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"currency"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"String"}}},"directives":[]},{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"language"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"String"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","alias":{"kind":"Name","value":"fullProduct"},"name":{"kind":"Name","value":"ExpPresentationService_getFullProductDetailsBulk"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"activityIds"},"value":{"kind":"ListValue","values":[{"kind":"Variable","name":{"kind":"Name","value":"activityId"}}]}},{"kind":"Argument","name":{"kind":"Name","value":"currency"},"value":{"kind":"Variable","name":{"kind":"Name","value":"currency"}}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"active"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"activityId"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"productCode"},"arguments":[],"directives":[{"kind":"Directive","name":{"kind":"Name","value":"encode"},"arguments":[]}]},{"kind":"Field","name":{"kind":"Name","value":"locale"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"supplierCode"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"title"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"text"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"description"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"FragmentSpread","name":{"kind":"Name","value":"TextValueFields"},"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"uniqueContent"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"briefDescription"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"FragmentSpread","name":{"kind":"Name","value":"TextValueFields"},"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"longDescription"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"FragmentSpread","name":{"kind":"Name","value":"TextValueFields"},"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"highlights"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"text"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"text"},"arguments":[],"directives":[]}]}}]}}]}},{"kind":"Field","name":{"kind":"Name","value":"fallbackUniqueContent"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"briefDescription"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"FragmentSpread","name":{"kind":"Name","value":"EncodedTextValueFields"},"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"longDescription"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"FragmentSpread","name":{"kind":"Name","value":"EncodedTextValueFields"},"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"highlights"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"text"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"text"},"arguments":[],"directives":[{"kind":"Directive","name":{"kind":"Name","value":"encode"},"arguments":[]}]}]}}]}}]}},{"kind":"Field","name":{"kind":"Name","value":"pricingInfo"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"fromPrice"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"currency"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"maxTravelersPerUnit"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"isTieredPricing"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"comparisonPrice"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"specialsDescription"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"text"},"arguments":[],"directives":[]}]}}]}},{"kind":"Field","name":{"kind":"Name","value":"bookingConfirmationSettings"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"confirmationType"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"cancellationConditions"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"cancellationPolicyType"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"supplierCanCancelOnBadWeather"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"supplierCanCancelOnSmallGroup"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"cancelConditions"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"feePercentage"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"fromDays"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"toDays"},"arguments":[],"directives":[]}]}}]}},{"kind":"Field","name":{"kind":"Name","value":"languageServices"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"languageInfoMap"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"language"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"displayLanguage"},"arguments":[],"directives":[]}]}}]}},{"kind":"Field","name":{"kind":"Name","value":"socialProofData"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"totalBookings"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"reviewSummary"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"aggregateAvgRating"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"aggregateRatingCount"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"tripAdvisorRatingCount"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"tripAdvisorRatingCounts"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"viatorRatingCount"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"taSupplierLocationId"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"taSupplierInfo"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"name"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"url"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"reviewSummary"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"count"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"rating"},"arguments":[],"directives":[]}]}}]}},{"kind":"Field","name":{"kind":"Name","value":"supplierReviews"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"activityId"},"value":{"kind":"Variable","name":{"kind":"Name","value":"activityId"}}},{"kind":"Argument","name":{"kind":"Name","value":"page"},"value":{"kind":"ObjectValue","fields":[{"kind":"ObjectField","name":{"kind":"Name","value":"offset"},"value":{"kind":"IntValue","value":"0"}},{"kind":"ObjectField","name":{"kind":"Name","value":"limit"},"value":{"kind":"IntValue","value":"15"}}]}},{"kind":"Argument","name":{"kind":"Name","value":"reviewListOptions"},"value":{"kind":"ObjectValue","fields":[{"kind":"ObjectField","name":{"kind":"Name","value":"language"},"value":{"kind":"Variable","name":{"kind":"Name","value":"language"}}}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"reviews"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"id"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"locationId"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"productName"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"rating"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"title"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"text"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"language"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"helpfulVotes"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"photos"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"photo"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"photoSizes"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"url"},"arguments":[],"directives":[]}]}}]}}]}},{"kind":"Field","name":{"kind":"Name","value":"publishedDate"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"tripInfo"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"stayDate"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"publishPlatform"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"username"},"arguments":[],"directives":[]}]}}]}},{"kind":"Field","name":{"kind":"Name","value":"ticket"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"ticketType"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"travelerPickupData"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"additionalInfo"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"text"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"pickupOptionType"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"endsAtStartPoint"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"itinerary"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"maxTravellersInSharedTour"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"skipTheLine"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"privateTour"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"durationInMinutes"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"flexibleDuration"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"from"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"to"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"timeUnit"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"itineraryItems"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"order"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"groupNum"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"itineraryItemType"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"durationInMinutes"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"descriptionContent"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"text"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"admissionInclusionType"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"poiLocation"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"tALocationId"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"centre"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"latitude"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"longitude"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"name"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"description"},"arguments":[],"directives":[]}]}}]}},{"kind":"Field","name":{"kind":"Name","value":"legacyLongDescription"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"FragmentSpread","name":{"kind":"Name","value":"EncodedTextValueFields"},"directives":[]}]}}]}},{"kind":"Field","name":{"kind":"Name","value":"startEndPoints"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"type"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"locationInstructions"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"text"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"location"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"description"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"tALocationId"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"name"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"address"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"readableFormat"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"centre"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"latitude"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"longitude"},"arguments":[],"directives":[]}]}}]}}]}},{"kind":"Field","name":{"kind":"Name","value":"detailedItineraryDto"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"activityItineraryDto"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"activityItem"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"description"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"text"},"arguments":[],"directives":[]}]}}]}}]}},{"kind":"Field","name":{"kind":"Name","value":"legacyItineraryDto"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"longDescription"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"FragmentSpread","name":{"kind":"Name","value":"EncodedTextValueFields"},"directives":[]}]}}]}},{"kind":"Field","name":{"kind":"Name","value":"mdtItinerary"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"days"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"groupNumber"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"title"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"text"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"foodAndDrinks"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"inclusion"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"type"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"description"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"text"},"arguments":[],"directives":[]}]}}]}}]}},{"kind":"Field","name":{"kind":"Name","value":"accommodations"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"description"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"text"},"arguments":[],"directives":[]}]}}]}},{"kind":"Field","name":{"kind":"Name","value":"pois"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"durationInMinutes"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"admissionInclusionType"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"description"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"text"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"location"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","alias":{"kind":"Name","value":"TALocationId"},"name":{"kind":"Name","value":"tALocationId"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"centre"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"latitude"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"longitude"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"name"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"description"},"arguments":[],"directives":[]}]}}]}}]}}]}}]}},{"kind":"Field","name":{"kind":"Name","value":"inclusions"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"FragmentSpread","name":{"kind":"Name","value":"InclusionExclusionFields"},"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"exclusions"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"FragmentSpread","name":{"kind":"Name","value":"InclusionExclusionFields"},"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"paymentOptions"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"crowdfundingUrl"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"photos"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"order"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"imageSource"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"filteredCaption"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"text"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"sizes"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"size"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"width"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"height"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"url"},"arguments":[],"directives":[]}]}}]}},{"kind":"Field","name":{"kind":"Name","value":"videoLinks"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"title"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"text"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"externalSourceType"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"externalSourceId"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"tagIds"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"additionalInfo"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"type"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"value"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"freeText"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"text"},"arguments":[],"directives":[]}]}}]}},{"kind":"Field","name":{"kind":"Name","value":"passengerInfo"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"ageBands"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"ageBand"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"endAge"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"maxTravelersPerBooking"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"minTravelersPerBooking"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"startAge"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"maxTravellersForBooking"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"requiresAdultForBooking"},"arguments":[],"directives":[]}]}}]}},{"kind":"Field","alias":{"kind":"Name","value":"legacyFullProduct"},"name":{"kind":"Name","value":"TAC_getAttractionProductInformationByActivityId"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"activityIds"},"value":{"kind":"ListValue","values":[{"kind":"Variable","name":{"kind":"Name","value":"activityId"}}]}},{"kind":"Argument","name":{"kind":"Name","value":"currencyCode"},"value":{"kind":"Variable","name":{"kind":"Name","value":"currency"}}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"currencyCode"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"priceFromNoRounding"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"locations"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"locationIds"},"value":{"kind":"ListValue","values":[{"kind":"Variable","name":{"kind":"Name","value":"activityId"}}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"writeUserReviewUrl"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"thumbnail"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"caption"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"photoSizes"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"width"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"height"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"url"},"arguments":[],"directives":[]}]}}]}}]}},{"kind":"Field","name":{"kind":"Name","value":"travelersChoice"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"locationIds"},"value":{"kind":"ListValue","values":[{"kind":"Variable","name":{"kind":"Name","value":"activityId"}}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"winnerId"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"url"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"year"},"arguments":[],"directives":[]}]}}]}}],"loc":{"start":0,"end":5706}}');p.__key=0x95ea42b9b3f4,p.loc.source={body:"95ea42b9b3f4"};var f={};function S(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!f[n]&&(f[n]=!0,!0)})}p.definitions=p.definitions.concat(S(c.definitions)),p.definitions=p.definitions.concat(S(v.definitions)),p.definitions=p.definitions.concat(S(g.definitions));var N=p;function y(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,t)}return i}function F(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?y(i,!0).forEach(function(n){a()(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):y(i).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}var I=function e(){var n=d.useContext(u.Route),i=l()(n,1)[0],t=d.useContext(u.Preference).currency,a=d.useContext(u.Environment).locale,r={query:"",pause:!0};if("AttractionProductReview"===i.page){var s=i.params.detailId;s&&(r={query:N,variables:{activityId:s,currency:t,language:a.language||"en"}})}var c=Object(o.useQuery)(r),m=l()(c,1)[0];return d.useMemo(function(){var e,n,i,t,a=null===(e=m.data)||void 0===e?void 0:e.fullProduct,r=a&&a.length>0&&a[0]||null,l=null===(n=m.data)||void 0===n?void 0:n.locations,d=l&&l.length>0&&l[0]||null,o=null===(i=m.data)||void 0===i?void 0:i.travelersChoice,u=o&&o.length>0&&o[0]||{},s=null===(t=m.data)||void 0===t?void 0:t.legacyFullProduct,c=s&&s.length>0&&s[0]||null,v=u.url,k=u.year,g=v&&k?{url:v,year:k}:null;if(r&&c){var p=F({currency:c.currencyCode,maxTravelersPerUnit:null,isTieredPricing:null,comparisonPrice:null,specialsDescription:null},r.pricingInfo||null,{fromPrice:c.priceFromNoRounding});r=F({},r,{pricingInfo:p})}return{fetching:m.fetching,fullProduct:r,travelersChoice:g,location:d}},[m.fetching,m.data])},_=i("@ta/platform.i18n"),h=i("./packages/attractions/product-detail-data-loader/CommonUtils.jsx"),b=function e(){var n=I().fullProduct,i=Object(_.useLocalize)().localize;return d.useMemo(function(){var e,t,a,r,l,o=[];Object(h.k)(null==n?void 0:null===(e=n.bookingConfirmationSettings)||void 0===e?void 0:e.confirmationType)&&o.push(i.string("nsp.additionalInfo.other.confirmationAtBooking")),((null==n?void 0:n.additionalInfo)||[]).map(function(e){return function e(n,i){var t,a=null==n?void 0:n.type;if(null==n?void 0:n.value)switch(a){case"INFANTS_MUST_SIT_ON_LAPS":return i.string("nsp.additionalInfo.infant.lap");case"INFANT_SEATS_AVAILABLE":return i.string("nsp.additionalInfo.infant.seats");case"NO_BACK_PROBLEMS":return i.string("nsp.additionalInfo.health.noBackProblems");case"NO_HEART_PROBLEMS":return i.string("nsp.additionalInfo.health.noHeartProblems");case"NO_PREGNANT":return i.string("nsp.additionalInfo.no.pregnant");case"PETS_WELCOME":return i.string("nsp.additionalInfo.accessibility.petsWelcome");case"PHYSICAL_EASY":return i.string("nsp.additionalInfo.physical.easy");case"PHYSICAL_HARD":return i.string("nsp.additionalInfo.physical.hard");case"PHYSICAL_MEDIUM":return i.string("nsp.additionalInfo.physical.medium");case"PUBLIC_TRANSPORTATION_NEARBY":return i.string("nsp.additionalInfo.near.transport");case"STROLLER_ACCESSIBLE":return i.string("nsp.additionalInfo.stroller.accessible");case"SURFACES_WHEELCHAIR_ACCESSIBLE":return i.string("nsp.additionalInfo.surface.wheelChair.accessible");case"TRANSPORTATION_WHEELCHAIR_ACCESSIBLE":return i.string("nsp.additionalInfo.wheelChair.accessible");case"WHEELCHAIR_ACCESSIBLE":return i.string("nsp.additionalInfo.wheel.chair")}else switch(a){case"WHEELCHAIR_ACCESSIBLE":return i.string("nsp.additionalInfo.not.wheel.chair")}return"FREE_TEXT"===a||"HEALTH_FREE_TEXT"===a?null==n?void 0:null===(t=n.freeText)||void 0===t?void 0:t.text:null}(e,i)}).filter(Boolean).forEach(function(e){return o.push(e)}),(null==n?void 0:null===(t=n.cancellationConditions)||void 0===t?void 0:t.supplierCanCancelOnBadWeather)&&o.push(i.string("nsp.additionalInfo.other.cancelWeather")),(null==n?void 0:null===(a=n.cancellationConditions)||void 0===a?void 0:a.supplierCanCancelOnSmallGroup)&&o.push(i.string("nsp.additionalInfo.other.cancelMinTravelers"));var u=null==n?void 0:null===(r=n.itinerary)||void 0===r?void 0:r.maxTravellersInSharedTour;return u&&o.push(i.string("nsp.additionalInfo.other.maxTravelers",{numTravelers:u})),(null==n?void 0:null===(l=n.itinerary)||void 0===l?void 0:l.privateTour)&&o.push(i.string("nsp.additionalInfo.other.privateTour")),o.length?d.createElement(h.a,{items:o}):null},[n,i])},T=i("fast-deep-equal"),P=i.n(T),O=[{fromDays:-1,toDays:2,feePercentage:0},{fromDays:1,toDays:0,feePercentage:100}],x=function e(n,i){if(!n||n.length<1)return"";var t=n[0];if(!t)return"";var a=t.feePercentage,r=t.fromDays,l=t.toDays;return 0===a&&l&&l>1?-1===r&&2===l?i.string("attractions.booking.cancellation.short.free_cancellation_standard"):i.string("attractions.booking.cancellation.short.free_cancellation_up_to_2",{nNumDays:l}):""},E=function e(n,i){return n&&n.includes("RESERVE_NOW_PAY_LATER")?i.string("attractions.booking.reserve.now.pay.later"):""},D=function e(){var n=I().fullProduct,i=Object(_.useLocalize)().localize;return d.useMemo(function(){var e,t;if(!n)return null;var a=null===(e=n.cancellationConditions)||void 0===e?void 0:e.cancellationPolicyType;if("ALL_SALES_FINAL"===a)return i.string("attractions.booking.salesfinal",{0:100});var r=(null===(t=n.cancellationConditions)||void 0===t?void 0:t.cancelConditions)||O,l=[];return"STANDARD"===a||P()(r,O)?i.string("attractions.booking.section.standard_cancellation_policy_description"):(r.forEach(function(e){if(e){var t=e.fromDays||0,a=e.toDays||0,r=e.feePercentage||0;if(-1===t&&0===a){var d=i.string("attractions.booking.salesfinal",{0:r});l.push(d)}else if(-1===t&&a>0)if(0===r){var o=i.string("attractions.booking.cancel.atleast.nocancellationfee.pluralized",{0:a});l.push(o)}else{var u=i.string("attractions.booking.cancel.atleast.withcancellationfee.pluralized",{0:a,1:r});l.push(u)}else if(t>0&&a>0){var s=i.string("attractions.booking.cancel.between.withcancellationfee",{0:a,1:t,2:r});l.push(s)}else if(t>0&&0===a){var c=i.string("attractions.booking.cancel.within.withcancellationfee.pluralized",{0:t,1:r});l.push(c)}else"Failed to generate cancellation conditions due to unsupported cancellation condition ".concat(JSON.stringify(e)||""," for product with code '").concat(n.productCode||"","'")}}),l.length<1?null:l.join(" "))},[n,i])},A=i("@ta/common.client"),C=function e(){var n=I().fullProduct,i=Object(A.useIsMounted)();return d.useMemo(function(){var e;if(!n)return null;var t,a=(null===(e=n.uniqueContent)||void 0===e?void 0:e.highlights)||[],r=!1;return i&&!a.length&&(r=!0,a=(null===(t=n.fallbackUniqueContent)||void 0===t?void 0:t.highlights)||[]),a.map(function(e){var n;return null==e?void 0:null===(n=e.text)||void 0===n?void 0:n.text}).filter(Boolean).map(function(e){return r?{encodedValue:e}:{originalValue:e}})},[n,i])},L=i("@babel/runtime/helpers/esm/toConsumableArray"),w=i.n(L),j=function e(n,i){return n.filter(Boolean).filter(i).map(function(e){var n;return null===(n=e.location)||void 0===n?void 0:n.description}).filter(Boolean).map(function(e){return e.trim().replace(/\n\n/g,"\n")}).join("\n\n")},R=function e(n){return(n||[]).map(function(e){return(null==e?void 0:e.description)||(null==e?void 0:e.otherText)}).map(function(e){return null==e?void 0:e.text}).filter(Boolean).map(function(e){return e.trim()})},M=function e(){var n=I().fullProduct,i=Object(_.useLocalize)().localize;return d.useMemo(function(){var e;if(!n)return null;var t=function e(n){return j(n,function(e){return"START"===e.type||"START_AND_END"===e.type})}(n.startEndPoints||[]),a=Object(h.g)(n.itinerary,i),r=function e(n,i){var t;if(null===(t=n.travelerPickupData)||void 0===t?void 0:t.endsAtStartPoint)return i.string("nsp.startEndPoint.returnToDeparturePoint");var a=n.startEndPoints||[];return j(a,function(e){return"START_AND_END"===e.type})?i.string("nsp.startEndPoint.returnToDeparturePoint"):j(n.startEndPoints||[],function(e){return"END"===e.type})}(n,i),o=i.string("nsp.inclusionexclusion.entry.or.admission.v2"),u=function e(n,i){var t=new Set,a=new Set;return((null==n?void 0:n.itineraryItems)||[]).forEach(function(e){var n,r=null==e?void 0:null===(n=e.poiLocation)||void 0===n?void 0:n.name;if(r)switch(null==e?void 0:e.admissionInclusionType){case"YES":t.add("".concat(i," - ").concat(r));break;case"NO":a.add("".concat(i," - ").concat(r))}}),[t,a]}(n.itinerary,o),s=l()(u,2),c=s[0],m=s[1],v=[].concat(w()(R(n.inclusions)),w()(c)),k=[].concat(w()(R(n.exclusions)),w()(m));return(null===(e=n.itinerary)||void 0===e?void 0:e.skipTheLine)&&v.push(i.string("nsp.inclusionexclusion.skip.the.line.v2")),{departurePoint:t,duration:a,returnDetails:r,inclusions:d.createElement(h.a,{items:v}),exclusions:d.createElement(h.a,{items:k})}},[n,i])},U=i("@ta/common.features"),B=i("@ta/attractions.util-decode");function V(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,t)}return i}var H,z={GOOGLE:{machineTranslation:!0,providerName:"Google",providerImageUrl:"/img2/google/powered_by_google_translate.png"}},q=function e(){var n=I().fullProduct,i=d.useContext(u.Environment),t=i.cdnPrefix,r=i.locale.language,l=Object(_.useLocalize)().localize,o=Object(A.useIsMounted)();return d.useMemo(function(){var e,i;if(!n)return null;var d,u,s,c,m=null===(e=n.uniqueContent)||void 0===e?void 0:e.briefDescription,v=null===(i=m)||void 0===i?void 0:i.text;v||((null===(d=n.fallbackUniqueContent)||void 0===d?void 0:d.briefDescription)?o&&(m=null===(u=n.fallbackUniqueContent)||void 0===u?void 0:u.briefDescription,v=Object(B.decodeStringWithJSBase64)((null===(s=m)||void 0===s?void 0:s.text)||"")):v=(null===(c=n.description)||void 0===c?void 0:c.text)||"");var k=function e(n,i){var t=(null==n?void 0:n.translationInfo)||{},r=t.source,l=t.vendor,d=Object(U.featureIsEnabled)("attractions_machine_translations")&&"MACHINE_TRANSLATION"===r?function o(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?V(i,!0).forEach(function(n){a()(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):V(i).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}({},z[l]):null;return d&&d.providerImageUrl&&(d.providerImageUrl=i+d.providerImageUrl),d}(m,t),g=function e(n,i,t,a){var r,l,d,o,u,s=Object(h.e)(null===(r=n.bookingConfirmationSettings)||void 0===r?void 0:r.confirmationType,a),c=x(null===(l=n.cancellationConditions)||void 0===l?void 0:l.cancelConditions,a),m=Object(h.i)(n.itinerary,a),v=(null===(d=n.languageServices)||void 0===d?void 0:d.languageInfoMap)||[],k=v.filter(function(e){return Object(h.l)(null==e?void 0:e.language,t)}),g=v.filter(function(e){return!Object(h.l)(null==e?void 0:e.language,t)}),p=Object(h.f)(k,t),f=g.length,S=Object(h.f)(g,t),N=Object(h.c)(n.taSupplierInfo);return{voucher:Object(h.j)(null===(o=n.ticket)||void 0===o?void 0:o.ticketType,a),instantConfirmation:s,freeCancellation:c,primaryLanguages:p,additionalLanguages:S,additionalLanguagesCount:f,duration:m,hotelPickup:Object(h.d)(null===(u=n.travelerPickupData)||void 0===u?void 0:u.pickupOptionType,a),locale:n.locale||"",translationAttribution:i,supplierName:N.supplierName||"",supplierUrl:N.supplierUrl||"",supplierUrlisObfuscated:N.supplierUrlIsObfuscated}}(n,k,r,l);return{locale:n.locale,productText:v,translationAttribution:k,amenities:g}},[t,n,r,l,o])},W=i("@ta/platform.base64"),Y=i("@ta/platform.impressions"),G={SUPPLIER_PROVIDED:"SUPPLIER_PHOTO",PROFESSIONAL:"PROFESSIONAL_PHOTO"},J=function e(n){if(!n)return null;var i=n.imageSource,t=n.filteredCaption,a=function e(n,i){return n&&n.find(function(e){return i===(null==e?void 0:e.size)})||null}(n.sizes,"SIZE_540x360");return a&&a.url&&i&&t?{mediaType:"PHOTO",mediaSource:G[i],mediaUrl:a.url,mediaWidth:a.width,mediaHeight:a.height,title:t.text}:null},K=function e(n,i){if((null==n?void 0:n.imageSource)!==(null==i?void 0:i.imageSource)){if("PROFESSIONAL"===(null==n?void 0:n.imageSource))return-1;if("PROFESSIONAL"===(null==i?void 0:i.imageSource))return 1}return((null==n?void 0:n.order)||0)-((null==i?void 0:i.order)||0)},Q=function e(){var n=I(),i=n.fullProduct,t=n.travelersChoice,a=n.location,r=d.useContext(Y.AddPageProperty);return d.useMemo(function(){if(!i||!a)return null;var e=[],n=function e(n){var i=n.videoLinks;if(i&&i.length&&i.length>0&&i[0]){var t=i[0],a=t.externalSourceType,r=t.externalSourceId,l=t.title;if(a&&r&&l&&l.text){var d=function e(n,i){switch(n){case"YOUTUBE":return"".concat("https://www.youtube.com/embed/").concat(i,"?showinfo=0&rel=0&modestbranding=1&enablejsapi=1");default:return null}}(a,r);if(d)return{mediaType:"VIDEO",mediaSource:"PRODUCT_VIDEO",mediaUrl:Object(W.encode)("____".concat(d,"____")),title:l.text}}}return null}(i);n&&(r("apd_videos_tatoo_1"),e.push(n));var l=function e(n,i){var t=n.photos,a=t&&w()(t).sort(K).map(J).filter(Boolean);if(a&&a.length>0)return a;var r=function e(n){if(!n||!n.photoSizes)return null;var i=function e(n,i){return n&&n.find(function(e){return e&&e.width&&e.width>=i})}(n.photoSizes,540);return i&&i.url?{mediaType:"PHOTO",mediaSource:"PRODUCT_PHOTO",mediaUrl:i.url,title:n.caption||""}:null}(i.thumbnail);return r?[r]:[]}(i,a);return l?(l.length>=2?(r("APDPhotoCarouselEligible:true"),n||(r("second_photo_swapping_eligible"),Object(U.featureIsEnabled)("attraction_cover_photo_swapping_apd")&&(r("second_photo_swapped"),e.push(l[1]),e.push(l[0]),l=l.slice(2)))):r("APDPhotoCarouselEligible:false"),r("APDSupplierPhotosEligible:true"),l.forEach(function(n){return e.push(n)}),l.some(function(e){return"PHOTO"===e.mediaType&&"PROFESSIONAL_PHOTO"===e.mediaSource})?r("APDProfessionalPhotosEligible:true"):r("APDProfessionalPhotosEligible:false")):r("APDSupplierPhotosEligible:false"),{mediaList:e,isTravelersChoice:!!t}},[i,a,t,r])},$=function e(n,i){var t,a="",r="",l={promoText:null==n?void 0:null===(t=n.specialsDescription)||void 0===t?void 0:t.text},d=null==n?void 0:n.fromPrice;if(d){a=i.formatCurrency(d);var o=null==n?void 0:n.comparisonPrice;if(o&&o>0){var u=o-d;u>0&&(r=i.formatCurrency(u),l.strikeThruPrice=i.formatCurrency(o),l.savings=r)}}return[a,r,l]},X=function e(n,i,t,a){var r=[];return function e(n){return n&&n.promoText&&n.savings&&n.strikeThruPrice}(t)&&r.push(a.string("attractions.booking.flag.special_offer")),n&&(function e(n){return n&&n.includes(21859)}(i)&&r.push(a.string("attractions.booking.flag.best_seller")),function e(n){return n&&n.includes(20757)}(i)&&r.push(a.string("attractions.booking.flag.likely_to_sell_out"))),r},Z=function e(){var n=d.useContext(u.Route),i=l()(n,1)[0],t="AttractionProductReview"===i.page?i.params.detailId:null,a=I(),r=a.fullProduct,o=a.location,s=Object(_.useLocalize)().localize,c=Object(_.useIntlFormatter)();return d.useMemo(function(){var e,n,i,a,d,u,m,v,k=(null==r?void 0:null===(e=r.title)||void 0===e?void 0:e.text)||"",g=$(null==r?void 0:r.pricingInfo,c),p=l()(g,3),f=p[0],S=p[1],N=p[2],y=x(null==r?void 0:null===(n=r.cancellationConditions)||void 0===n?void 0:n.cancelConditions,s),F=E(null==r?void 0:r.paymentOptions,s),I=null==r?void 0:null===(i=r.pricingInfo)||void 0===i?void 0:i.maxTravelersPerUnit,_=r||{},b=_.active,T=_.tagIds,P=X(b,T,N,s),O=(null==r?void 0:null===(a=r.socialProofData)||void 0===a?void 0:a.totalBookings)||0,D=null==r?void 0:r.reviewSummary,A=D&&D.tripAdvisorRatingCount?((null==D?void 0:null===(d=D.tripAdvisorRatingCounts)||void 0===d?void 0:d[3])+(null==D?void 0:null===(u=D.tripAdvisorRatingCounts)||void 0===u?void 0:u[4]))/(null==D?void 0:D.tripAdvisorRatingCount):0,C=(null==D?void 0:D.aggregateRatingCount)||0,L=function e(n){return Math.floor(2*(n||0))/2}(null==D?void 0:D.aggregateAvgRating),w=Object(h.c)(null==r?void 0:r.taSupplierInfo),j=function e(n){if(!n||n.length<1)return null;var i=n[0];if(!i)return null;var t=i.feePercentage,a=i.fromDays,r=i.toDays;return 0===t&&-1===a&&r?r:null}(null==r?void 0:null===(m=r.cancellationConditions)||void 0===m?void 0:m.cancelConditions);return{activityId:(null==r?void 0:r.activityId)||t||0,productTitle:k,productTitleMobile:k,freeCancellationMessage:y,reserveNowPayLaterMessage:F,fromPricing:f,maxTravelersPerUnit:I,isTieredPricing:(null==r?void 0:null===(v=r.pricingInfo)||void 0===v?void 0:v.isTieredPricing)||!1,savings:S,productPromo:N,productTags:P,totalBookings:O,recommendedTravelerRating:A,reviewCount:C,reviewRating:L,supplierLink:w,isInactive:!!r&&!r.active,freeCancellationDurationInDays:j,crowdfundingUrl:null==r?void 0:r.crowdfundingUrl,writeUserReviewUrl:null==o?void 0:o.writeUserReviewUrl}},[r,o,c,s,t])},ee=i("@ta/attractions.service-number"),ne={ADULT:1,CHILD:2,INFANT:3,YOUTH:4,SENIOR:5},ie={ADULT:1,CHILD:4,INFANT:5,YOUTH:3,SENIOR:2},te={ADULT:"Adult",CHILD:"Child",INFANT:"Infant",YOUTH:"Youth",SENIOR:"Senior"},ae=function e(n){var i;return((null===(i=n.passengerInfo)||void 0===i?void 0:i.ageBands)||[]).filter(Boolean).sort(function(e,n){return e.ageBand&&n.ageBand?ie[e.ageBand]-ie[n.ageBand]:0}).map(function(e){return{ageBandId:e.ageBand?ne[e.ageBand]:1,ageFrom:e.startAge||0,ageTo:e.endAge||99,description:e.ageBand?te[e.ageBand]:"Adult",adult:"ADULT"===e.ageBand||"SENIOR"===e.ageBand?1:0,minPaxCount:e.minTravelersPerBooking||0,maxPaxCount:e.maxTravelersPerBooking||10}})},re=function e(n,i){var t,a=null===(t=n.languageServices)||void 0===t?void 0:t.languageInfoMap;return a?a.filter(function(e){return!!e&&e.displayLanguage&&e.language}).sort(Object(h.b)(i)).map(function(e){return{value:(null==e?void 0:e.language)||"",label:(null==e?void 0:e.displayLanguage)||""}}):[]},le=function e(){var n=I().fullProduct,i=Object(_.useLocalize)().localize,t=Object(_.useIntlFormatter)(),a=d.useContext(u.Environment).locale,r=a.code,o=a.language;return d.useMemo(function(){var e,a,d,u,s;if(!n)return null;var c=$(n.pricingInfo,t),m=l()(c,3),v=m[0],k=m[2],g=n.active,p=n.tagIds;return{freeCancellationMessage:x(null===(e=n.cancellationConditions)||void 0===e?void 0:e.cancelConditions,i),reserveNowPayLaterMessage:E(null==n?void 0:n.paymentOptions,i),fromPricing:v,numericPrice:(null===(a=n.pricingInfo)||void 0===a?void 0:a.fromPrice)||0,ageBands:ae(n),maxPax:(null===(d=n.passengerInfo)||void 0===d?void 0:d.maxTravellersForBooking)||10,partner:"Viator",tourGrades:[],productCode:n.productCode?{encodedValue:n.productCode}:{},productTitle:(null===(u=n.title)||void 0===u?void 0:u.text)||"",attractionId:0,productPromo:k,productTags:X(g,p,k,i),serviceNumber:Object(ee.getServiceNumberForLocale)(r)||"",isInactive:!1,productLanguages:re(n,o),doesNotRequireAdultForBooking:!1===(null===(s=n.passengerInfo)||void 0===s?void 0:s.requiresAdultForBooking)}},[t,n,o,r,i])},de=i("@ta/platform.import"),oe=de.component.onUsage(((H=function e(){return i.e("@ta/attractions.product-detail-data-loader/ItineraryText.demand").then(i.bind(null,"./packages/attractions/product-detail-data-loader/ItineraryText.jsx"))}).__PACKAGE__="@ta/attractions.product-detail-data-loader",H.__MODULE_ID__="./packages/attractions/product-detail-data-loader/ItineraryText.jsx",H.__MODULE_NAME__="ItineraryText",H.__BUNDLE_NAME__="@ta/attractions.product-detail-data-loader/ItineraryText.demand",H.__GET_SYNC__=function(){return i.m["./packages/attractions/product-detail-data-loader/ItineraryText.jsx"]?i("./packages/attractions/product-detail-data-loader/ItineraryText.jsx"):null},H.__IS_LOADED__=function(){return void 0!==i.m["./packages/attractions/product-detail-data-loader/ItineraryText.jsx"]},H),"ItineraryText"),ue=de.component.onUsage(function(){var e=function e(){return i.e("@ta/attractions.product-detail-data-loader/ItineraryText.demand").then(i.bind(null,"./packages/attractions/product-detail-data-loader/ItineraryText.jsx"))};return e.__PACKAGE__="@ta/attractions.product-detail-data-loader",e.__MODULE_ID__="./packages/attractions/product-detail-data-loader/ItineraryText.jsx",e.__MODULE_NAME__="ItineraryText",e.__BUNDLE_NAME__="@ta/attractions.product-detail-data-loader/ItineraryText.demand",e.__GET_SYNC__=function(){return i.m["./packages/attractions/product-detail-data-loader/ItineraryText.jsx"]?i("./packages/attractions/product-detail-data-loader/ItineraryText.jsx"):null},e.__IS_LOADED__=function(){return void 0!==i.m["./packages/attractions/product-detail-data-loader/ItineraryText.jsx"]},e}(),"ActivityItineraryText"),se=function e(n){var i,t,a,r,l,o,u,s,c,m,v,k,g=n.fullProduct,p=(null===(i=g.fallbackUniqueContent)||void 0===i?void 0:null===(t=i.longDescription)||void 0===t?void 0:t.text)||(null===(a=g.detailedItineraryDto)||void 0===a?void 0:null===(r=a.legacyItineraryDto)||void 0===r?void 0:null===(l=r.longDescription)||void 0===l?void 0:l.text)||(null===(o=g.itinerary)||void 0===o?void 0:null===(u=o.legacyLongDescription)||void 0===u?void 0:u.text)||"",f=Object(B.decodeStringWithJSBase64)(p);if(f)return f;var S=null===(s=g.detailedItineraryDto)||void 0===s?void 0:null===(c=s.activityItineraryDto)||void 0===c?void 0:null===(m=c.activityItem)||void 0===m?void 0:null===(v=m.description)||void 0===v?void 0:v.text;if(S)return d.createElement(ue,{text:S});var N=null===(k=g.itinerary)||void 0===k?void 0:k.itineraryItems;return(null==N?void 0:N.length)?d.createElement(oe,{items:N}):null},ce=function e(){var n=I().fullProduct,i=Object(A.useIsMounted)();return d.useMemo(function(){var e,t;if(!n)return null;var a=null===(e=n.uniqueContent)||void 0===e?void 0:null===(t=e.longDescription)||void 0===t?void 0:t.text;return{introductionText:a,itineraryText:!a&&i&&d.createElement(se,{fullProduct:n})}},[n,i])},me=new Set([].concat([11878,11921,11922,11934,12004,12005,12006,12007,12008,12083],[11875,11910,11916,11937,11958,11972,11983,11984,11985,11986,11987,11988,11989,12044,12045,12059,12060,20238,20248,20256])),ve=function e(n){var i=n.startEndPoints;return i?i.flatMap(function(e){var n,i,t,a;if(!e)return[];var r=e.location;return r?"START"!==e.type&&"END"!==e.type&&"START_AND_END"!==e.type?[]:[{name:r.name,instruction:null===(n=e.locationInstructions)||void 0===n?void 0:n.text,address:null===(i=r.address)||void 0===i?void 0:i.readableFormat,startEndPointTypeEnum:e.type,latitude:null===(t=r.centre)||void 0===t?void 0:t.latitude,longitude:null===(a=r.centre)||void 0===a?void 0:a.longitude}]:[]}):null},ke=function e(){var n=d.useContext(Y.AddPageProperty),i=I().fullProduct;return d.useMemo(function(){if(!i)return null;var e=function e(n){if(!function e(n){var i,t=n.tagIds;if(t&&t.filter(function(e){return e&&me.has(e)}).length>0)return!1;var a=null==n?void 0:null===(i=n.itinerary)||void 0===i?void 0:i.itineraryItems;if(!a)return!1;var r=a.filter(function(e){return!!e}).filter(function(e){return"NO_STOP"!==e.admissionInclusionType});return 0===r.length||r.filter(function(e){return!!e.durationInMinutes}).length>0}(n))return null;var i=ve(n);if(!i)return null;var t=function e(n){var i,t=null==n?void 0:null===(i=n.itinerary)||void 0===i?void 0:i.itineraryItems;return t?t.flatMap(function(e){var n;if(!e)return[];var i=e.poiLocation;return i&&e.admissionInclusionType&&("NO"!==e.admissionInclusionType||e.durationInMinutes)&&e.descriptionContent&&i.name&&i.centre&&"number"==typeof i.centre.latitude&&"number"==typeof i.centre.longitude?[{taLocationId:i.tALocationId,admissionInclusionTypeEnum:e.admissionInclusionType,durationInMinutes:e.durationInMinutes,name:i.name,description:null===(n=e.descriptionContent)||void 0===n?void 0:n.text,latitude:i.centre.latitude,longitude:i.centre.longitude}]:[]}):null}(n);if(!t||!t.length)return null;var a=null==n?void 0:n.travelerPickupData;if(!a)return null;var r=a.pickupOptionType,l=a.additionalInfo,d=a.endsAtStartPoint;return r?{productItineraryItems:t,pickupTypeEnum:r,pickupAdditionalInfo:null==l?void 0:l.text,startEndPoints:i,endsAtStartPoint:!!d}:null}(i);if(e){n("Itinerary:eligible");var t=e.productItineraryItems.filter(function(e){return"NO_STOP"!==e.admissionInclusionTypeEnum}).length;n(t<=1?"itinerary_stops:one":t<=10?"itinerary_stops:two_to_ten":"itinerary_stops:ten_plus")}else n("Itinerary:ineligible");return e},[i,n])},ge=function e(){var n=d.useContext(Y.AddPageProperty),i=I().fullProduct,t=d.useMemo(function(){return i?function e(n){var i=ve(n);if(!i)return null;var t=function e(n){var i,t,a=null==n?void 0:null===(i=n.detailedItineraryDto)||void 0===i?void 0:null===(t=i.mdtItinerary)||void 0===t?void 0:t.days;return a?a.flatMap(function(e){var n;if(!e)return[];var i=function e(n){var i=null==n?void 0:n.accommodations;return i?i.flatMap(function(e){return e&&e.description?[{description:e.description.text}]:[]}):null}(e);if(!i)return[];var t=function e(n){var i=null==n?void 0:n.foodAndDrinks;return i?i.flatMap(function(e){if(!e)return[];var n=e.inclusion;return n&&n.description&&n.type?[{inclusion:{description:n.description.text,inclusionTypeEnum:n.type}}]:[]}):null}(e);if(!t)return[];var a=function e(n){var i=null==n?void 0:n.pois;return i?i.flatMap(function(e){var n;if(!e)return[];var i=e.location;return i&&e.admissionInclusionType&&e.description&&i.name&&i.centre&&"number"==typeof i.centre.latitude&&"number"==typeof i.centre.longitude?[{taLocationId:i.TALocationId,admissionInclusionTypeEnum:e.admissionInclusionType,durationInMinutes:e.durationInMinutes,name:i.name,description:null===(n=e.description)||void 0===n?void 0:n.text,latitude:i.centre.latitude,longitude:i.centre.longitude}]:[]}):null}(e);return a?[{groupNumber:e.groupNumber,title:null===(n=e.title)||void 0===n?void 0:n.text,accommodations:i,foodAndDrinks:t,productItineraryItems:a}]:[]}):null}(n);if(!t||!t.length)return null;var a=null==n?void 0:n.travelerPickupData;if(!a)return null;var r=a.pickupOptionType,l=a.additionalInfo,d=a.endsAtStartPoint;return r?{mdtProductItineraryDays:t,pickupTypeEnum:r,pickupAdditionalInfo:null==l?void 0:l.text,startEndPoints:i,endsAtStartPoint:!!d}:null}(i):null},[i]);return d.useEffect(function(){t?(n("MDTItinerary:eligible"),t.mdtProductItineraryDays.length<=5?n("itinerary_days:two_to_five"):n("itinerary_days:five_plus")):n("MDTItinerary:ineligible")},[t,n]),t},pe=function e(){var n=I().fullProduct,i=Object(_.useLocalize)().localize,t=d.useContext(u.Environment).locale.language;return d.useMemo(function(){var e,a,r,l,d;if(!n)return null;var o=function e(n){var i,t=null==n?void 0:null===(i=n.itinerary)||void 0===i?void 0:i.itineraryItems;return t&&t.flatMap(function(e){var n,i,t=null==e?void 0:e.poiLocation;return t&&t.name&&t.tALocationId?[{name:t.name,locationId:t.tALocationId,latitude:(null===(n=t.centre)||void 0===n?void 0:n.latitude)||0,longitude:(null===(i=t.centre)||void 0===i?void 0:i.longitude)||0}]:[]})}(n),u=Object(h.j)(null===(e=n.ticket)||void 0===e?void 0:e.ticketType,i),s=Object(h.e)(null===(a=n.bookingConfirmationSettings)||void 0===a?void 0:a.confirmationType,i),c=x(null===(r=n.cancellationConditions)||void 0===r?void 0:r.cancelConditions,i),m=Object(h.i)(n.itinerary,i),v=Object(h.f)((null===(l=n.languageServices)||void 0===l?void 0:l.languageInfoMap)||[],t),k="";if(v.length>0){var g=i.string("attractions.filters.languages_offered_title"),p=i.string("common_colon");k="".concat(g).concat(p," ").concat(v)}return{locations:o,voucher:u,instantConfirmation:s,freeCancellation:c,languages:k,duration:m,hotelPickup:Object(h.d)(null===(d=n.travelerPickupData)||void 0===d?void 0:d.pickupOptionType,i)}},[n,i,t])},fe=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"ReviewDetailsQuery"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"reviewId"}},"type":{"kind":"NonNullType","type":{"kind":"ListType","type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"reviews"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"reviewIds"},"value":{"kind":"Variable","name":{"kind":"Name","value":"reviewId"}}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"userProfile"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"contributionCounts"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"sumReview"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"helpfulVote"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"avatar"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"photoSizes"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"url"},"arguments":[],"directives":[]}]}}]}},{"kind":"Field","name":{"kind":"Name","value":"hometown"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"location"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"additionalNames"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"long"},"arguments":[],"directives":[]}]}}]}}]}}]}}]}}]}}],"loc":{"start":0,"end":371}}');fe.__key=0x6f1bc8f10ca0,fe.loc.source={body:"6f1bc8f10ca0"};var Se=fe,Ne=function e(n,i){return n.map(function(e,n){var t,a,r,l,d,o,u,s,c,m,v=null==i?void 0:null===(t=i.reviews)||void 0===t?void 0:null===(a=t[n])||void 0===a?void 0:a.userProfile,k=new Date((null==e?void 0:null===(r=e.tripInfo)||void 0===r?void 0:r.stayDate)||"").toDateString().split(" "),g="".concat(k[1]," ").concat(k[3]),p=((null==e?void 0:e.photos)||[]).map(function(e){var n,i,t;return(null==e?void 0:null===(n=e.photo)||void 0===n?void 0:null===(i=n.photoSizes)||void 0===i?void 0:null===(t=i[0])||void 0===t?void 0:t.url)||""});return{reviewId:(null==e?void 0:e.id)||0,rating:(null==e?void 0:e.rating)||0,relativePublishedDate:"",dateText:new Date((null==e?void 0:e.publishedDate)||"").toDateString().split(" ").slice(1).join(" ")||"",mobile:"MOBILE"===(null==e?void 0:e.publishPlatform),experienceDate:g||"",displayTitle:(null==e?void 0:e.title)||"",displayText:(null==e?void 0:e.text)||"",location:(null==v?void 0:null===(l=v.hometown)||void 0===l?void 0:null===(d=l.location)||void 0===d?void 0:null===(o=d.additionalNames)||void 0===o?void 0:o.long)||"",screenName:(null==e?void 0:e.username)||"",helpfulVotes:(null==v?void 0:null===(u=v.contributionCounts)||void 0===u?void 0:u.helpfulVote)||0,publishedReviews:(null==v?void 0:null===(s=v.contributionCounts)||void 0===s?void 0:s.sumReview)||0,productName:(null==e?void 0:e.productName)||"",avatarUrl:(null===(c=((null==v?void 0:null===(m=v.avatar)||void 0===m?void 0:m.photoSizes)||[]).slice().shift())||void 0===c?void 0:c.url)||"",photoUrls:p}})},ye=function e(){var n,i=I().fullProduct,t=(null==i?void 0:i.taSupplierInfo)||null,a=(null==i?void 0:i.reviewSummary)||null,r=(null==a?void 0:a.tripAdvisorRatingCount)||0,u=(null==a?void 0:a.viatorRatingCount)||0,s=(null==i?void 0:null===(n=i.supplierReviews)||void 0===n?void 0:n.reviews)||[],c={query:Se,variables:{reviewId:s.map(function(e){return(null==e?void 0:e.id)||0})||[]}},m=Object(o.useQuery)(c),v=l()(m,1)[0],k=null==v?void 0:v.data;return d.useMemo(function(){var e,n;return{supplierId:(null==i?void 0:i.taSupplierLocationId)||0,supplierName:(null==t?void 0:t.name)||"",totalReviewCount:(null==t?void 0:null===(e=t.reviewSummary)||void 0===e?void 0:e.count)||0,overallRating:(null==t?void 0:null===(n=t.reviewSummary)||void 0===n?void 0:n.rating)||0,productReviewCount:r+u,hasOnlyViatorReviews:0===r&&0!==u,hasCertificateOfExcellence:!1,supplierReviews:Ne(s,k)}},[i,s,k,t,r,u])};i.d(n,"useFullProductData",function(){return I}),i.d(n,"useAdditionalInfo",function(){return b}),i.d(n,"useCancellationConditions",function(){return D}),i.d(n,"useHighlights",function(){return C}),i.d(n,"useImportantInformationModel",function(){return M}),i.d(n,"useOverviewModel",function(){return q}),i.d(n,"useProductCarouselModel",function(){return Q}),i.d(n,"useProductHeaderModel",function(){return Z}),i.d(n,"useTourPlannerModel",function(){return le}),i.d(n,"useWhatToExpectModel",function(){return ce}),i.d(n,"useProductItineraryModel",function(){return ke}),i.d(n,"useMDTProductItineraryModel",function(){return ge}),i.d(n,"useKeyDetailsModel",function(){return pe}),i.d(n,"useSupplierTrustData",function(){return ye})}}});
//# sourceMappingURL=attractions.product-detail-data-loader.490d493a33.js.map