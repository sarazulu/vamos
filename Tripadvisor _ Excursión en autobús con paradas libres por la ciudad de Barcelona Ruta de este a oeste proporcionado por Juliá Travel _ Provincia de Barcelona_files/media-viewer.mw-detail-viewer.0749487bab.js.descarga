($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/media-viewer.mw-detail-viewer",d:["vendor-babel","vendor-react-libs","@ta/media-viewer.detail-view-controls","lithium-common","@ta/media-viewer.tracking","lithium-platform","@ta/media-viewer.types","@ta/common.features","@ta/media-viewer.detail-viewer-attribution-avatar","@ta/media-viewer.layout-hooks","@ta/social.share-cta","@ta/trips.trip-flow-selector","@ta/trips.bookmark-icon","@ta/trips.trip-types"],e:["./packages/media-viewer/mw-detail-viewer/MWDetailViewerContainer.jsx"],m:{"./packages/media-viewer/mw-detail-viewer/MWDetailViewerContainer.jsx":function(e,i,t){"use strict";t.r(i);var a=t("@babel/runtime/helpers/esm/slicedToArray"),r=t.n(a),n=t("react"),l=t("@ta/media-viewer.detail-view-controls"),o=t("@ta/styleguide.loading"),d=t("@ta/media-viewer.tracking"),c=t("@ta/media.image"),m=t("@ta/common.classnames"),s=t.n(m),u=t("@ta/common.is-visible"),v=t("@ta/common.image-preloader"),w=t("@ta/platform.import"),_=t("@ta/media-viewer.types"),p=t("@ta/platform.i18n"),E=t("@ta/core-ui.icon"),f=t.n(E),D=t("@ta/lithium.context"),h=t("@ta/common.features"),V=t("@ta/media-viewer.detail-viewer-attribution-avatar"),M=t.n(V),g=function e(i){var t=i.supplierCategory,a=i.provider,r=i.userPhotoUrl,l=i.userName,o=i.uploadedDate,d=i.hometown,c=i.contributionCount,m=i.type,s=i.attributionUrl,u=i.businessContact,v=t,w=Object(p.useIntlFormatter)(),E="TRAVELER"===t,D=o?"".concat(w.formatDate("date_medium_month_year",new Date(o))):"",h=Object(p.useLocalize)().localize,V=l||h("mediaviewer_a_tripadvisor_member_capitalized"),g=!1;if("OWNER"===v){g=!0;var W=null==a?void 0:a.name;if(W&&_.externalProviders.has(W)){if("BOOKINGCOM"===W)return n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewerUploaderDetails__wrapper--1FyeP"},n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewerUploaderDetails__details--4TaO4"},n.createElement("a",{href:s,target:"_blank"},n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewerUploaderDetails__providerAttributionUrl--ZQamT"},n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewerUploaderDetails__uploaderName--fK-CP"},h("Photoviewer_dmoPhotoCaption_v2",{0:String(_.externalProviders.get(W)),1:""}),n.createElement(f.a,{name:"external-link-no-box"})))),n.createElement("span",{className:"media-viewer-mw-detail-viewer-MWDetailViewerUploaderDetails__date--wMhGE"},D)));V=h("Photoviewer_mgmtFilter")}else V=h("Photoviewer_mgmtFilter")}else"STAFF"===v&&(V=n.createElement(p.UnsafeLocalize,{id:"mediaviewer_tripadvisor_provider",args:{spanClassName:"media-viewer-mw-detail-viewer-MWDetailViewerUploaderDetails__bold--N_4FO"}}));return"pano"===m&&(V=n.createElement(p.UnsafeLocalize,{id:"mediaviewer_tripadvisor_provider",args:{spanClassName:"media-viewer-mw-detail-viewer-MWDetailViewerUploaderDetails__bold--N_4FO"}}),g=!1),n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewerUploaderDetails__wrapper--1FyeP"},n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewerUploaderDetails__avatar--2Kj0T"},n.createElement(M.a,{iconType:v,avatarUrl:r})),n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewerUploaderDetails__details--4TaO4"},n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewerUploaderDetails__uploaderWrapper--1drsk"},n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewerUploaderDetails__verticalCenterer--19xre"},n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewerUploaderDetails__uploaderName--fK-CP"},V,D&&n.createElement(n.Fragment,null," • ",n.createElement("span",{className:"media-viewer-mw-detail-viewer-MWDetailViewerUploaderDetails__date--wMhGE"},D))),g&&u&&n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewerUploaderDetails__businessContactLink--1i70o"},u()),E&&n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewerUploaderDetails__additionalDetails--17NmD"},!!d&&n.createElement("span",null,n.createElement(f.a,{name:"map-pin-fill"})," ",d),!!d&&!!c&&n.createElement("span",null,"  •  "),!!c&&n.createElement(p.UnsafeLocalize,{id:"hotels_n_contributions_plural",args:{0:"media-viewer-mw-detail-viewer-MWDetailViewerUploaderDetails__bold--N_4FO",1:c}}))))))},W=t("@ta/core-ui.bubble-rating"),N=t("@ta/media-viewer.layout-hooks"),C=function e(i){var t=i.caption,a=i.isPhotoOnly,l=i.review,o=i.userPhotoUrl,c=i.userName,m=i.uploadedDate,u=i.contributionCount,v=i.showOverlay,w=i.provider,E=i.parentHeight,D=Object(d.useMVTracking)(),h=n.useState(!1),V=r()(h,2),g=V[0],C=V[1],y=n.useState("hidden"),I=r()(y,2),b=I[0],T=I[1],P=Object(p.useLocalize)().localize,k=Object(p.useIntlFormatter)(),A=null==w?void 0:w.name,S=A&&_.explicitlyCreditedProviders.get(A),O=!a&&!!l&&!!(null==l?void 0:l.title),R=!!t,L=O&&!!(null==l?void 0:l.text),U=n.useRef(null);n.useEffect(function(){L||T("hidden")},[l,L]),n.useEffect(function(){return T("hidden")},[v]);var x=n.useCallback(function(){C(!0),T("down"),D(d.trackedPageActions.DETAIL_VIEW_REVIEW_CLICK)},[D]),B=n.useCallback(function(){T("hidden"),U.current&&(U.current.scrollTop=0),C(!1)},[]),H=n.useState(!1),j=r()(H,2),z=j[0],F=j[1],Y=n.useRef(null),G=n.useState(0),K=r()(G,2),q=K[0],Q=K[1],X=n.useState(0),J=r()(X,2),$=J[0],Z=J[1],ee=Object(N.useViewport)(),ie=Object(N.useTouchEnabled)(),te=ee.width>=768&&!ie,ae=null==l?void 0:l.rating;if(R&&!O)return n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewerReview__caption--2jRQ1"},n.createElement("div",null,t),S?n.createElement("span",{className:"media-viewer-mw-detail-viewer-MWDetailViewerReview__source--34Poy"},P("mediaviewer_mediasource",{sourceName:S})):null);var re=Y.current?function e(i,t,a){switch(a){case"hidden":return"translateY(".concat(i+t,"px)");case"down":return"translateY(".concat(i/2+t,"px)");case"up":return"translateY(".concat(t,"px)");default:return"translateY(100%)"}}(Y.current.clientHeight,$,b):"translateY(100%)",ne=Y.current?function e(i,t,a){return"".concat("down"===a&&t>=0?i/2-104:i-104,"px")}(Y.current.clientHeight,$,b):"auto",le=function e(i){return"hidden"===i?"0":"1"}(b);return n.createElement("div",{className:s()("media-viewer-mw-detail-viewer-MWDetailViewerReview__wrapper--2vGdu",g?"media-viewer-mw-detail-viewer-MWDetailViewerReview__slideoutUp--3T2bV":null),onClick:x},!!ae&&n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewerReview__rating--2joVA"},n.createElement(W.BubbleRating,{rating:ae})),L?n.createElement(n.Fragment,null,n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewerReview__partialReview--39D0H"},null==l?void 0:l.text),n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewerReview__readReview--nr_aA"},"".concat(P.string("mediaviewer_read_review"))),n.createElement("div",{className:s()("media-viewer-mw-detail-viewer-MWDetailViewerReview__reviewParentContainer--1lC7N",g?null:"media-viewer-mw-detail-viewer-MWDetailViewerReview__noPointerEvents--bYkgD"),onClick:function e(i){i.stopPropagation(),B()},onTouchStart:function e(i){return i.stopPropagation()},onTouchMove:function e(i){return i.stopPropagation()},onTouchEnd:B,style:{height:E}},n.createElement("div",{className:s()("media-viewer-mw-detail-viewer-MWDetailViewerReview__reviewSlideoutContainer--17-OA"),ref:function e(i){Y.current=i},onTouchStart:function e(i){return i.stopPropagation()},onClick:function e(i){return i.stopPropagation()},style:{transform:re,opacity:le}},n.createElement("div",{className:s()("media-viewer-mw-detail-viewer-MWDetailViewerReview__topArea--3Y2Ek",te?"media-viewer-mw-detail-viewer-MWDetailViewerReview__noDrag--3eS0U":null),onTouchStart:function e(i){i.stopPropagation(),1===i.touches.length&&(F(!0),Q(i.touches[0].clientY))},onTouchMove:function e(i){if(z&&Y.current){var t=i.touches[0].clientY-q;(t>=0||!te)&&(Y.current.style.transitionDuration="0.1s",function e(i,t){t&&(t.style.transitionDuration="0.1s",Z(i))}(t,Y.current))}},onTouchEnd:function e(i){i.stopPropagation(),F(!1),Y.current&&(Y.current.style.transitionDuration="0.3s"),$>100?B():$<0&&!te&&(T("up"),D(d.trackedPageActions.DETAIL_VIEW_REVIEW_TRAY_EXPANSION)),function e(){Q(0)}(),Z(0)}},!te&&n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewerReview__dragIndicator--3oJKS"}),n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewerReview__avatar--2dOyq"},n.createElement(M.a,{iconType:"TRAVELER",avatarUrl:o})),n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewerReview__details--2JNab"},n.createElement("span",{className:"media-viewer-mw-detail-viewer-MWDetailViewerReview__uploaderName--1kYct"},c||P("mediaviewer_a_tripadvisor_member_capitalized")),n.createElement("span",{className:"media-viewer-mw-detail-viewer-MWDetailViewerReview__reviewWroteDate--1UCnE"},"".concat(P.string("mediaviewer_wrote_a_review",{date:m?"".concat(k.formatDate("date_medium_month_year",new Date(m))):""}))),n.createElement("span",{className:"media-viewer-mw-detail-viewer-MWDetailViewerReview__contributionCount--1KyEs"},!!u&&n.createElement(p.UnsafeLocalize,{id:"hotels_n_contributions_plural",args:{0:"",1:u}}))),n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewerReview__closeButton--3L0O7",onClick:function e(i){i&&i.stopPropagation(),B()}},n.createElement(f.a,{name:"times"}))),n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewerReview__reviewTextArea--2iszO",ref:function e(i){U.current=i},onTouchEnd:function e(i){i&&i.stopPropagation(),D(d.trackedPageActions.DETAIL_VIEW_REVIEW_SCROLL)},style:{height:ne}},!!ae&&n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewerReview__reviewTextAreaRating--3vSeg"},n.createElement(W.BubbleRating,{rating:ae})),n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewerReview__reviewText--hOm2B"},n.createElement("span",{className:"media-viewer-mw-detail-viewer-MWDetailViewerReview__reviewTitle--3y32Y"},null==l?void 0:l.title),n.createElement("p",null,null==l?void 0:l.text)))))):n.createElement(n.Fragment,null,n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewerReview__partialReview--39D0H"},null==l?void 0:l.title)))},y=t("@ta/social.share-cta"),I=t.n(y),b=t("@ta/trips.trip-flow-selector"),T=t("@ta/trips.bookmark-icon"),P=(t("@ta/trips.trip-types"),"media-viewer-mw-detail-viewer-SaveAction__social_action--184O6"),k=function e(i){var t=i.object,a=i.displayStyle,r=i.bookmarkSize,l=i.onClick,o=i.preventInteractionPropagation,d=i.bookmarkTextStyle,c=i.trip;return n.createElement("div",{className:P},n.createElement(b.QueriedTripFlowSelector,{object:t,preventInteractionPropagation:o,trip:c},function(e,i){return n.createElement(T.BookmarkIcon,{active:i,bookmarkStyle:"flat",bookmarkSize:r||(Object(h.featureIsEnabled)("trips_saves_heart")?"20":"18"),lineHeight:20,bookmarkTextStyle:d,onClick:function i(){l&&l(),e()}},function(e){return a.includes("text")?e:""})}))};k.defaultProps={onClick:void 0,preventInteractionPropagation:!1,placement:void 0};var A,S=k,O=function e(i){var t=i.helpfulCount,a=i.mediaId,r=i.locationId,o=i.mediaWithHelpfulVote,c=i.providerName,m=i.shareUrl,s=i.reviewId,u=i.mediaType,v=i.displayReportBtn,w=void 0===v||v,_=i.displayHelpfulBtn,p=void 0===_||_,E=i.displaySaveButton,f=void 0===E||E,h=i.displayShareBtn,V=void 0===h||h,M=Object(d.useMVTracking)(),g=n.useContext(D.Device).securityToken,W=n.useCallback(function(){var e="/VideoController?a=vt&ff=".concat(a,"&vote=5&detail=").concat(r);fetch(e,{method:"POST",headers:{"Content-Type":"application/json","X-Requested-By":encodeURIComponent(g)},credentials:"same-origin"}),o&&o.add(a),M(d.trackedPageActions.HELPFUL_VOTE_CLICK,{providerName:c})},[g,r,a,o,c,M]),N=function e(i,t,a){return i?{__typename:"Review",id:i}:"p"===a?{__typename:"Photo",id:t}:"v"===a&&{__typename:"Video",id:t}}(s,a,u),C=!1;"p"===u?C="Photo":"v"===u&&(C="Video");var y=n.useCallback(function(){M(d.trackedPageActions.REPORT_PANEL_SHOWN)},[M]);return n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewerActionButtons__wrapper--1UI0Q"},n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewerActionButtons__separator--ko0Lp"}),n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewerActionButtons__buttonContainer--2CGMU"},p?n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewerActionButtons__helpfulButton--3tokA",onClick:W},n.createElement(l.HelpfulButton,{count:t,alreadyVoted:o&&o.has(a),onClick:W})):null,f&&N?n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewerActionButtons__likeButton--hMLyf"},n.createElement(S,{displayStyle:"icon",object:N})):null,V&&m?n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewerActionButtons__shareButton--2-D4Q"},n.createElement(I.a,{url:m,alignEdge:"right",darkMode:!0,styleAsSocialAction:!0,itemId:"".concat(r),itemType:"media",above:!0,shiftY:-2,hideText:!0})):null,w&&C?n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewerActionButtons__reportButton--1xZoo"},n.createElement(l.ReportButton,{contentId:a,contentType:C,onClick:y,hideTitle:!0})):null))},R=function e(){return n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewer__imageLoading--2yQek"},n.createElement(o.LoadingSpinner,{size:"large",inverted:Object(h.featureIsEnabled)("cx_brand_refresh_degreen")}))},L=w.component.onUsage(((A=function e(){return t.e("@ta/media-viewer.pano")}).__PACKAGE__="@ta/media-viewer.mw-detail-viewer",A.__MODULE_ID__="@ta/media-viewer.pano",A.__MODULE_NAME__="@ta/media-viewer.pano",A.__BUNDLE_NAME__="@ta/media-viewer.pano",A.__GET_SYNC__=function(){return t.m["@ta/media-viewer.pano"]?t("@ta/media-viewer.pano"):null},A.__IS_LOADED__=function(){return void 0!==t.m["@ta/media-viewer.pano"]},A),"KRPano"),U=w.component.onUsage(function(){var e=function e(){return t.e("@ta/media-viewer.pano")};return e.__PACKAGE__="@ta/media-viewer.mw-detail-viewer",e.__MODULE_ID__="@ta/media-viewer.pano",e.__MODULE_NAME__="@ta/media-viewer.pano",e.__BUNDLE_NAME__="@ta/media-viewer.pano",e.__GET_SYNC__=function(){return t.m["@ta/media-viewer.pano"]?t("@ta/media-viewer.pano"):null},e.__IS_LOADED__=function(){return void 0!==t.m["@ta/media-viewer.pano"]},e}(),"PanoIcon"),x=w.component.onUsage(function(){var e=function e(){return t.e("@ta/media-viewer.video")};return e.__PACKAGE__="@ta/media-viewer.mw-detail-viewer",e.__MODULE_ID__="@ta/media-viewer.video",e.__MODULE_NAME__="@ta/media-viewer.video",e.__BUNDLE_NAME__="@ta/media-viewer.video",e.__GET_SYNC__=function(){return t.m["@ta/media-viewer.video"]?t("@ta/media-viewer.video"):null},e.__IS_LOADED__=function(){return void 0!==t.m["@ta/media-viewer.video"]},e}(),"VideoPlayer"),B=function e(i){var t,a,l,o,m,w,E,h,V,M,W,N,y,I,b,T,P,k,A=i.media,S=i.onSwipeLeft,B=i.onSwipeRight,H=i.onFullscreenMedia,j=i.totalMediaInfo,z=i.goBackNode,F=i.locationId,Y=i.mediaWithHelpfulVote,G=i.exit,K=i.shareUrl,q=i.innateTranslations,Q=void 0===q||q,X=i.businessContact,J=n.useContext(D.Device).browser.family,$=n.useContext(D.Device).os.family,Z=Object(d.useMVTracking)(),ee=n.useState(!1),ie=r()(ee,2),te=ie[0],ae=ie[1],re=n.useRef(null),ne=n.useState(!0),le=r()(ne,2),oe=le[0],de=le[1],ce=n.useState(!1),me=r()(ce,2),se=me[0],ue=me[1],ve=n.useState(!1),we=r()(ve,2),_e=we[0],pe=we[1],Ee=n.useState(!1),fe=r()(Ee,2),De=fe[0],he=fe[1],Ve=n.useState(!1),Me=r()(Ve,2),ge=Me[0],We=Me[1],Ne=n.useState(window?window.innerHeight:0),Ce=r()(Ne,2),ye=Ce[0],Ie=Ce[1],be=n.useState(window?window.innerWidth:0),Te=r()(be,2),Pe=Te[0],ke=Te[1],Ae=Object(p.useLocalize)().localize;n.useEffect(function(){var e=function e(){if(re.current){var i=re.current;Ie(i.clientHeight),ke(i.clientWidth)}};return document&&document.addEventListener("transitionend",e),function(){document&&document.removeEventListener("transitionend",e)}},[]);var Se="pano"===A.type,Oe="p360"===A.type,Re="v"===A.type,Le=n.useRef(function(){}),Ue=function e(i){Le.current=i},xe=n.useCallback(function(e){H&&H(e)},[H]),Be=n.useCallback(function(){xe(!1),Z(d.trackedPageActions.DETAIL_VIEW_PANO_DETAIL,{panoWasOpened:!1}),se&&ue(!1)},[xe,se,Z]),He=n.useCallback(function(){xe(!1),Z(d.trackedPageActions.DETAIL_VIEW_PHOTO_360_DETAIL,{photo360WasOpened:!1}),_e&&pe(!1)},[xe,_e,Z]),je=Object(u.useVisibleEffect)(function(e){We(e)},-20);n.useEffect(function(){!ge&&Se&&se?Be():!ge&&Oe&&_e?He():!ge&&Re&&Le.current()},[ge,Se,Oe,Re,se,Be,_e,He]);var ze=null===(t=A.provider)||void 0===t?void 0:t.name;n.useEffect(function(){Z(d.trackedPageActions.DETAIL_VIEW,{compoundMediaId:{id:A.mediaId,type:A.type},providerName:ze})},[A.mediaId,ze,A.type,Z]);var Fe=n.useRef(!1),Ye=n.useCallback(function(){Fe.current=!0},[]),Ge=n.useCallback(function(){Fe.current=!1},[]),Ke=n.useMemo(function(){return function(e){e.preventDefault(),Fe.current&&(Fe.current=!1,de(function(e){return!e}))}},[]);n.useEffect(function(){Z(d.trackedPageActions.DETAIL_VIEW_IMAGE_TAP_HIDE,{isMWRedesign:!0,detailsWereShown:oe})},[oe,Z]);var qe=n.useRef(!1),Qe=n.useCallback(function(){qe.current=!0},[]),Xe=n.useCallback(function(){qe.current=!1},[]),Je=n.useMemo(function(){return function(e){e&&e.preventDefault(),"IE"!==J&&qe.current&&(qe.current=!1,ue(function(e){return xe(!e),!e}))}},[J,xe]);n.useEffect(function(){Z(d.trackedPageActions.DETAIL_VIEW_PANO_DETAIL,{panoWasOpened:se})},[se,Z]);var $e,Ze,ei,ii=n.useRef(!1),ti=n.useCallback(function(){ii.current=!0},[]),ai=n.useCallback(function(){ii.current=!1},[]),ri=n.useMemo(function(){return function(e){e&&e.preventDefault(),ii.current&&(ii.current=!1,pe(function(e){return Z(d.trackedPageActions.DETAIL_VIEW_PHOTO_360_DETAIL,{photo360WasOpened:!e}),xe(!e),!e}))}},[xe,Z]),ni=A.supplierCategory?A.supplierCategory:"OWNER",li=null===(a=A.userProfile)||void 0===a?void 0:null===(l=a.avatar)||void 0===l?void 0:null===(o=l.photoSizes)||void 0===o?void 0:o[1].url;!li&&(null===(m=A.userProfile)||void 0===m?void 0:null===(w=m.avatar)||void 0===w?void 0:null===(E=w.photoSizes)||void 0===E?void 0:E[0].url)&&(li=null===($e=A.userProfile)||void 0===$e?void 0:null===(Ze=$e.avatar)||void 0===Ze?void 0:null===(ei=Ze.photoSizes)||void 0===ei?void 0:ei[0].url);var oi=A.uploadDate,di=null===(h=A.userProfile)||void 0===h?void 0:null===(V=h.hometown)||void 0===V?void 0:null===(M=V.location)||void 0===M?void 0:M.additionalNames.long,ci=null===(W=A.userProfile)||void 0===W?void 0:null===(N=W.contributionCounts)||void 0===N?void 0:N.sumAllUgc,mi=n.createElement("div",{className:s()("media-viewer-mw-detail-viewer-MWDetailViewer__detailContainer--akvCf",oe?null:"media-viewer-mw-detail-viewer-MWDetailViewer__hidden--2YOw1")},n.createElement(g,{supplierCategory:ni,provider:A.provider,userPhotoUrl:li,userName:null===(y=A.userProfile)||void 0===y?void 0:y.displayName,uploadedDate:oi,hometown:di,contributionCount:ci,type:A.type,attributionUrl:A.providerAttributionUrl,businessContact:X}),A.review||A.caption?n.createElement(C,{caption:A.caption,isPhotoOnly:null===(I=A.review)||void 0===I?void 0:I.isPhotoOnly,review:A.review,userPhotoUrl:li,userName:null===(b=A.userProfile)||void 0===b?void 0:b.displayName,uploadedDate:oi,contributionCount:ci,showOverlay:oe,provider:A.provider,parentHeight:ye}):n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewer__reviewPlaceholder--2TO3C"}),A.mediaId>0&&n.createElement(O,{helpfulCount:A.thumbsUpVotes||0,locationId:F,mediaId:A.mediaId,mediaWithHelpfulVote:Y,providerName:null===(T=A.provider)||void 0===T?void 0:T.name,reviewId:null===(P=A.review)||void 0===P?void 0:P.id,shareUrl:K,mediaType:A.type,displayReportBtn:!(Se||Oe||ze&&_.noReportBtnProviders.has(ze)),displayHelpfulBtn:!(Se||Oe)&&void 0!==A.thumbsUpVotes&&null!==A.thumbsUpVotes,displaySaveButton:"BOOKINGCOM"!==(null===(k=A.provider)||void 0===k?void 0:k.name)})),si=n.createElement("div",{className:s()("media-viewer-mw-detail-viewer-MWDetailViewer__indexInfo--CGjL_",oe?null:"media-viewer-mw-detail-viewer-MWDetailViewer__hidden--2YOw1")},n.createElement("span",{className:"media-viewer-mw-detail-viewer-MWDetailViewer__indexInfoText--2I2I_"},Ae("hotels_mobile_xofy",{0:j.selectedIndex+1,1:j.totalCount}))),ui=z&&n.createElement("div",{className:s()("media-viewer-mw-detail-viewer-MWDetailViewer__goBackNode--3Ov4D",oe?null:"media-viewer-mw-detail-viewer-MWDetailViewer__hidden--2YOw1")},z),vi=n.useState(null),wi=r()(vi,2),_i=wi[0],pi=wi[1];n.useEffect(function(){te&&re.current&&pi(Object(c.getSource)(Pe,ye,A.photoSizes,{getImageBasedOnClientInfo:!0,allowedStretch:.1}))},[te,ye,Pe,A.photoSizes]);var Ei=n.useMemo(function(){return n.createElement(v.ImagePreloaderRenderer,{url:null==_i?void 0:_i.url,delay:250,loadingRenderer:R})},[_i]),fi=n.useState(!1),Di=r()(fi,2),hi=Di[0],Vi=Di[1],Mi={x:0,y:0},gi=n.useState(Mi),Wi=r()(gi,2),Ni=Wi[0],Ci=Wi[1],yi=n.useState(Mi),Ii=r()(yi,2),bi=Ii[0],Ti=Ii[1],Pi=n.useState(null),ki=r()(Pi,2),Ai=ki[0],Si=ki[1],Oi=function e(i){1===i.touches.length&&(Vi(!0),Ci({x:i.touches[0].clientX,y:i.touches[0].clientY}))},Ri=function e(i){if(Ge(),Xe(),ai(),hi){var t=i.touches[0].clientX-Ni.x,a=i.touches[0].clientY-Ni.y;Ai||(Math.abs(t)+5>=Math.abs(a)?Si("x"):Si("y")),Q&&function e(i,t,a,r){if(r)if("x"===i){var n=0;t>0&&j.selectedIndex>0?n=Math.min(t,60):t<=0&&j.selectedIndex+1<j.totalCount&&(n=Math.max(t,-60)),r.style.transform="translateX(".concat(n,"px")}else{var l;l=a>0?Math.min(a,60):Math.max(a,-60),r.style.transform="translateY(".concat(l,"px")}}(Ai,t,a,re.current),Ti("x"===Ai?{x:t,y:0}:{x:0,y:a})}},Li=function e(){Vi(!1),"x"===Ai?(bi.x<-50&&S(),bi.x>50&&B()):"y"===Ai&&Math.abs(bi.y)>80&&G&&G(),re.current&&(re.current.style.transform=""),function e(){Ci(Mi)}(),Si(null)},Ui=function e(){return"IOS"===$?A.photoSizes[0].url:""};return n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewer__visibilityContainer--2cf3V",ref:function e(i){je.current=i}},function e(i){return Se?function e(i){var t=i.mediaId,a=i.cdnPath;return se&&a?n.createElement(L,{uniqueId:"MediaViewer_MWRedesign",oysterCdnPath:a,format:"OYSTER_LEGACY",mediaId:t,className:"media-viewer-mw-detail-viewer-MWDetailViewer__panoViewerOverlay--1GkFQ"},n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewer__panoViewerTopArea--1oOLJ"},n.createElement("span",{className:"media-viewer-mw-detail-viewer-MWDetailViewer__backFromPanoViewer--1Ezae",onClick:function e(){xe(!1),Z(d.trackedPageActions.DETAIL_VIEW_PANO_DETAIL,{panoWasOpened:!1}),ue(!1)}},n.createElement(f.a,{name:"single-chevron-down"})))):n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewer__mainContainer--3e78p"},n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewer__imageParentContainer--2_69g",onTouchStart:Ye,onTouchEnd:Ke,onMouseDown:Ye,onMouseUp:Ke},n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewer__swipeContainer--3qC6X",onTouchStart:Oi,onTouchEnd:Li,onTouchMove:Ri},n.createElement(u.HasBeenVisible,{node:re,onVisible:function e(){return ae(!0)}},n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewer__imageViewer--1kyV7",ref:function e(i){re.current=i}},n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewer__imageLayoutContainer--2wyVQ"},Ei,n.createElement(U,null),n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewer__panoContainer--15Evf",onTouchStart:function e(){Qe(),Ge()},onTouchEnd:function e(i){Je(i),Li()},onClick:function e(i){qe.current=!0,Je(i),Li()}},n.createElement("img",{className:"".concat("media-viewer-mw-detail-viewer-MWDetailViewer__image--1qNFK"," ").concat("media-viewer-mw-detail-viewer-MWDetailViewer__panoViewerImage--1pjtU"),src:null==_i?void 0:_i.url}))))))),si,mi,ui)}(i):Oe?function e(i){var t=i.mediaId,a=i.photoSizes,r=i.photo360Format;if(_e&&t&&a&&a.length&&r&&"SPHERE"===r){var l,o="ICE"!==(null===(l=A.provider)||void 0===l?void 0:l.name);return n.createElement(L,{uniqueId:"MediaViewer_MWRedesign",photo360Sizes:a,format:"PHOTO_360_SPHERE",displayLogo:o,mediaId:t,className:"media-viewer-mw-detail-viewer-MWDetailViewer__panoViewerOverlay--1GkFQ"},n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewer__panoViewerTopArea--1oOLJ"},n.createElement("span",{className:"media-viewer-mw-detail-viewer-MWDetailViewer__backFromPanoViewer--1Ezae",onClick:function e(){xe(!1),Z(d.trackedPageActions.DETAIL_VIEW_PHOTO_360_DETAIL,{photo360WasOpened:!1}),pe(!1)}},n.createElement(f.a,{name:"single-chevron-left"}))))}return n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewer__mainContainer--3e78p"},n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewer__imageParentContainer--2_69g",onTouchStart:Ye,onTouchEnd:Ke},n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewer__swipeContainer--3qC6X",onTouchStart:Oi,onTouchEnd:Li,onTouchMove:Ri},n.createElement(u.HasBeenVisible,{node:re,onVisible:function e(){return ae(!0)}},n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewer__imageViewer--1kyV7",ref:function e(i){re.current=i}},n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewer__imageLayoutContainer--2wyVQ"},Ei,n.createElement(U,null),n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewer__photo360Container--3i1NA",onTouchStart:function e(){ti(),Ge()},onTouchEnd:function e(i){ri(i),Li()},onClick:function e(i){ii.current=!0,ri(i),Li()}},n.createElement("img",{className:"".concat("media-viewer-mw-detail-viewer-MWDetailViewer__image--1qNFK"," ").concat("media-viewer-mw-detail-viewer-MWDetailViewer__panoViewerImage--1pjtU"),src:null==_i?void 0:_i.url}))))))),si,mi,ui)}(i):Re?n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewer__mainContainer--3e78p"},n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewer__imageParentContainer--2_69g"},n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewer__swipeContainer--3qC6X",onTouchStart:Oi,onTouchEnd:Li,onTouchMove:Ri},n.createElement(u.HasBeenVisible,{node:re,onVisible:function e(){return ae(!0)}},n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewer__imageViewer--1kyV7"},Ei,n.createElement(x,{selectedMedia:A,autoplay:!1,inactivityTimeout:0,userIsActive:De,onPlay:function e(){he(!0),de(!1)},onPause:function e(){he(!1),de(!0)},onFullscreenChange:function e(i){return xe(i)},showControls:!oe,videoPauseSetCallback:Ue,poster:Ui()}))))),si,mi,ui):n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewer__mainContainer--3e78p"},n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewer__imageParentContainer--2_69g",onTouchStart:Ye,onTouchEnd:Ke,onMouseDown:Ye,onMouseUp:Ke},n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewer__swipeContainer--3qC6X",onTouchStart:Oi,onTouchEnd:Li,onTouchMove:Ri},n.createElement(u.HasBeenVisible,{node:re,onVisible:function e(){return ae(!0)}},n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewer__imageViewer--1kyV7",ref:function e(i){re.current=i}},n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewer__imageLayoutContainer--2wyVQ"},Ei,n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewer__imageContainer--2rrH-"},n.createElement("img",{className:"media-viewer-mw-detail-viewer-MWDetailViewer__image--1qNFK",src:null==_i?void 0:_i.url}))))))),si,mi,ui)}(A))};t.d(i,"MWDetailViewer",function(){return B}),i.default=function e(i){var t,a,c=i.media,m=i.startingIndex,s=i.initialSelectedIndex,u=i.locationId,v=i.totalCount,w=i.onGalleryClick,_=i.getNextPage,p=i.dispatchMVAction,E=i.mediaWithHelpfulVote,f=i.getShareUrlForMedia,D=i.businessContact,h=Object(d.useMVTracking)(),V=n.useState(s),M=r()(V,2),g=M[0],W=M[1],N=n.useState(s),C=r()(N,2),y=C[0],I=C[1],b=g-m;b>=c.length&&(b=c.length-1),b<0&&(b=0);var T=c[b];n.useEffect(function(){p({type:"UPDATE_MEDIA_OBJECT",media:T})},[null==T?void 0:null===(t=T.media)||void 0===t?void 0:t.mediaId]);var P=n.useMemo(function(){return function(e){var i=y+5*e*2;i<v&&(Math.max(0,i)<m||i>m+c.length-1)&&_(e)}},[y,m,_,c.length,v]);if(n.useEffect(function(){var e=g<y?-1:1,i=e<0?Math.max(0,g-5+1):g;P(e),I(i)},[P,y,g]),!(null==T?void 0:T.media)||"v"===(null===(a=T.media)||void 0===a?void 0:a.type))return n.createElement(function e(){return n.createElement("div",{className:"media-viewer-mw-detail-viewer-MWDetailViewerContainer__loading--2Vg2o"},n.createElement(o.LoadingSpinner,{size:"large"}))},null);var k={selectedIndex:g,totalCount:v},A=n.createElement(l.GalleryButton,{onClick:w,isButton:!0});return n.createElement(B,{media:T.media,onSwipeLeft:function e(){W(function(e){var i=Math.min(e+1,v-1),t=c[i];return p({type:"UPDATE_MEDIA",media:t,selectedIndex:i}),h(d.trackedPageActions.DETAIL_VIEW_IMAGE_SWIPE),i})},onSwipeRight:function e(){W(function(e){var i=Math.max(e-1,0),t=c[i];return p({type:"UPDATE_MEDIA",media:t,selectedIndex:i}),h(d.trackedPageActions.DETAIL_VIEW_IMAGE_SWIPE),i})},totalMediaInfo:k,goBackNode:A,shareUrl:f?f(T.media):null,mediaWithHelpfulVote:E,exit:w,innateTranslations:!0,businessContact:D,locationId:u})}}}});
//# sourceMappingURL=media-viewer.mw-detail-viewer.0749487bab.js.map