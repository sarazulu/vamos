($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/cpm.sky-ad",d:["vendor-babel","vendor-react-libs","lithium-platform","vendor-urql","@ta/cpm.gpt-ad"],e:["./packages/cpm/sky-ad/SkyAd.jsx"],m:{"./packages/cpm/sky-ad/SkyAd.jsx":function(e,a,i){"use strict";i.r(a);var n=i("@babel/runtime/helpers/esm/slicedToArray"),t=i.n(n),d=i("react"),l=i("@ta/lithium.context"),o=i("@ta/platform.import"),r=i("urql"),u=i("@ta/cpm.gpt-ad"),m=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"SponsoredGeoQuery"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"geo"}},"type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}},"directives":[]},{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"locale"}},"type":{"kind":"NamedType","name":{"kind":"Name","value":"String"}},"directives":[]},{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"date"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"LocalDate"}}},"directives":[]},{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"platform"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"PlatformEnumInput"}}},"directives":[]},{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"servlet"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"ServletEnumInput"}}},"directives":[]},{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"tracking"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"SponsorshipTrackingInput"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"sponsoredHome"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"sponsorshipRequest"},"value":{"kind":"ObjectValue","fields":[{"kind":"ObjectField","name":{"kind":"Name","value":"geo"},"value":{"kind":"Variable","name":{"kind":"Name","value":"geo"}}},{"kind":"ObjectField","name":{"kind":"Name","value":"locale"},"value":{"kind":"Variable","name":{"kind":"Name","value":"locale"}}},{"kind":"ObjectField","name":{"kind":"Name","value":"date"},"value":{"kind":"Variable","name":{"kind":"Name","value":"date"}}},{"kind":"ObjectField","name":{"kind":"Name","value":"platform"},"value":{"kind":"Variable","name":{"kind":"Name","value":"platform"}}},{"kind":"ObjectField","name":{"kind":"Name","value":"servlet"},"value":{"kind":"Variable","name":{"kind":"Name","value":"servlet"}}},{"kind":"ObjectField","name":{"kind":"Name","value":"tracking"},"value":{"kind":"Variable","name":{"kind":"Name","value":"tracking"}}},{"kind":"ObjectField","name":{"kind":"Name","value":"fields"},"value":{"kind":"ListValue","values":[]}}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"profile"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"id"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"username"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"destination"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"locationId"},"arguments":[],"directives":[]}]}}]}}]}}],"loc":{"start":0,"end":483}}');m.__key=0xee255422bcee,m.loc.source={body:"ee255422bcee"};var s,k=m,c=new Map([["au",[255064,256203,1192207,297441,297442,1,255066,256202,255062,256205,255063]],["ca",[297442,1192207,256202,2277882,255064,256203,256205,255065,255062,256206,255063,255066,34515]],["ch_de",[1192207,256202,2277882,255064,256203,256205,255065,255062,256206,255063,255066,1]],["co.uk",[1192207,256202,2277882,255064,256203,256205,255065,255062,256206,255063,255066,297441,297442,1,34515]],["com",[658437,297442,494934,1192207,256202,2277882,255064,256203,256205,255065,255062,256206,255063,255066,297441,34515]],["cz",[1]],["dd",[1192207,256202,2277882,255064,256203,256205,255065,255062,256206,255063,255066]],["de",[1192207,256202,2277882,255064,256205,256203,255065,255062,256206,255066,255063,297441,297442,1]],["dk",[1,1192207,256202,2277882,255064,256203,256205,255065,255062,256206,255063,255066]],["es",[1]],["fr",[297441,1,1192207,256202,2277882,255064,256203,256205,255065,255062,256206,255063,255066,297442]],["gcc",[1]],["hk_cn",[658437]],["hu",[1]],["in",[1192207,256202,2277882,255064,256205,256203,255065,255062,256206,255066,255063,1]],["it",[1192207,256202,2277882,255064,256203,256205,255065,255062,256206,255063,255066,1]],["jp",[658437,297442,494934,1192207,256202,2277882,255064,256203,256205,255065,255062,256206,255063,255066,297441]],["kr",[494934]],["my",[1]],["nl",[1,1192207,256202,2277882,255064,256203,256205,255065,255062,256206,255063,255066]],["pl",[1]],["ru",[1]],["se",[1192207,256202,2277882,255064,256203,256205,255065,255062,256206,255063,255066]],["sg",[1192207,256202,2277882,255064,256203,256205,255065,255062,256206,255063,255066,297441,297442]],["tw",[297442,658437,494934]]]),v=o.component.onUsage(((s=function e(){return i.e("@ta/cpm.gpt-ad")}).__PACKAGE__="@ta/cpm.sky-ad",s.__MODULE_ID__="@ta/cpm.gpt-ad",s.__MODULE_NAME__="@ta/cpm.gpt-ad",s.__BUNDLE_NAME__="@ta/cpm.gpt-ad",s.__GET_SYNC__=function(){return i.m["@ta/cpm.gpt-ad"]?i("@ta/cpm.gpt-ad"):null},s.__IS_LOADED__=function(){return void 0!==i.m["@ta/cpm.gpt-ad"]},s),"GptAd"),p={pos:"sky",fluidType:"sky",platform:"desktop"};a.default=function e(a){var i=a.slotTargeting,n=void 0===i?{}:i,o=function e(){var a=d.useState(!1),i=t()(a,2),n=i[0],o=i[1],m=d.useState(),s=t()(m,2),v=s[0],p=s[1],g=d.useContext(l.Visitor),N=g.userId,b=g.sessionId,f=!N,y=d.useContext(l.Route),_=t()(y,2),S=_[0],I=S.page,O=S.params,D=_[1].uid,V=O.geoId?O.geoId:1,E=O.detailId?O.detailId:0,T=new Set(["Home","Tourism"]).has(I),h=d.useCallback(function(){if(v){var e=v.match(/ta\.ta\.([\w.]+)\.s/),a=e&&e.length>1?e[1]:"",i=a&&c.get(a);return!!i&&i.indexOf(V)>-1}return!1},[v,V]),j=d.useContext(l.Environment).locale,x=new Date(Date.now()).toISOString().slice(0,10),C=d.useContext(l.Device),F=C.id,A="MOBILE"===C.viewportCategory?"MOBILE_WEB":"DESKTOP",B={sessionId:b,uniqueId:F,puid:D},L=Object(r.useQuery)({query:k,variables:{geo:V,locale:j.code.replace(/-/,"_"),servlet:"HOME",date:x,platform:A,tracking:B}}),M=t()(L,1)[0],w=d.useState(!1),P=t()(w,2),q=P[0],G=P[1];d.useEffect(function(){var e,a;(null==M?void 0:null===(e=M.data)||void 0===e?void 0:null===(a=e.sponsoredHome)||void 0===a?void 0:a.destination)&&G(!0)},[M]);var H=Object(r.useQuery)({query:u.GptInfoQuery,variables:{locationId:E||V,pageType:I}}),R=t()(H,1)[0],U=d.useRef({});return d.useEffect(function(){var e,a;if(null==R?void 0:null===(e=R.data)||void 0===e?void 0:null===(a=e.gptInfo)||void 0===a?void 0:a.length){var i=t()(R.data.gptInfo,1)[0];if((null==i?void 0:i.adBase)&&(null==i?void 0:i.pageConfig)){p(i.adBase),U.current=i.pageConfig;var n=h();o(T&&(q||f&&n))}}},[R,R.data,f,U,T,q,h]),n}(),m=d.useContext(l.Route),s=t()(m,1)[0],g=s.page,N=s.params;g&&(p.PageType=g);var b=N.geoId?N.geoId.toString():"1";p.geo=b;var f="MOBILE"===d.useContext(l.Device).viewportCategory;f&&(p.platform="mobile");var y=Object.assign(p,n),_={disableSlotRefresh:!0,disableSlotPrebid:!0,animationHeight:f?"100px":"200px"};return o?d.createElement(v,{size:"5x1",position:"sky",slotTargeting:y,slotConfig:_,className:"_1zUBeWB3"}):null}}}});
//# sourceMappingURL=cpm.1lp1s-.39285c62e7.js.map