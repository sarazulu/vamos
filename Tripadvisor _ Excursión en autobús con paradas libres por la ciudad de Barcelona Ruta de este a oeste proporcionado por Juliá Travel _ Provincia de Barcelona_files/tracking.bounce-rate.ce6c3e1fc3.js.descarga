($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/tracking.bounce-rate",d:["vendor-react-libs","@ta/common.sessionstorage","@ta/common.localstorage","@ta/platform.interactions"],e:["./packages/tracking/bounce-rate/bounce-rate.jsx"],m:{"./packages/tracking/bounce-rate/bounce-rate.jsx":function(t,e,n){"use strict";n.r(e);var a=n("react"),r=n("@ta/common.sessionstorage"),o=n.n(r),i=n("@ta/common.localstorage"),c=n.n(i),u=n("@ta/platform.interactions"),s=[0,15,30,60],d=[],f=/^https?:\/\/[a-z\-\.]+\.tripadvisor\.[a-z\-\.]+/,l=function t(){return document.hidden},g=function t(e){return"brHasSentTimeRecord"+e},m=function t(e){for(var n=0;n<e.length;n++)if(!o.a.get(g(e[n])))return!1;return!0},b=function t(e,n){var a={};a.brLandingId=o.a.get("brLandingId"),a[e]=n,c.a.set("brLandingInfo",a,1)},v=function t(e,n){if(e&&!m(s))try{var a=e.brLandingId,r=o.a.get("brLandingId");a&&r&&a===r&&Object.entries(e).filter(function(t){return 2===(null==t?void 0:t.length)&&"brLandingId"!==t[0]}).forEach(function(t){o.a.set(t[0],t[1])})}catch(t){console.error(t)}},p=function t(e,n,a){var r=setTimeout(function(){if(!l()){var t=g(e),r=o.a.get(t),i=o.a.get("brStartTimeStamp"),c=i?(n+(Date.now()-i))/1e3:n;r||(a({module:"landingBounceRate",action:"".concat(e,"s"),context:"actualTime : ".concat(c,"s")}),o.a.set(t,!0),b(t,!0))}},Math.max(1e3*e-n,0));d.push(r)},h=function t(e,n,a){if(!l())for(var r=0;r<e.length;r++){var i=e[r];o.a.get(g(i))||p(i,n,a)}},S=function t(){var e=a.useRef(Object(u.useGARecorder)());a.useEffect(function(){var t=function t(e){return function(){document.hidden?function t(){if(!m(s)){for(var e=0;e<d.length;e++)clearTimeout(d[e]);d=[];var n=o.a.get("brStartTimeStamp"),a=o.a.get("brTimeElapsed");if(null!=n&&null!=a){var r=a+(Date.now()-n);o.a.set("brTimeElapsed",r),b("brTimeElapsed",r)}}}():function t(e){if(!m(s)){o.a.set("brStartTimeStamp",Date.now());var n=o.a.get("brTimeElapsed")||0;h(s,n,e)}}(e)}}(e.current),n=!1;try{if(c.a.canUseLocalStorage()&&o.a.canUseSessionStorage()&&void 0!==document.hidden){var a,r,i=function t(e){for(var n=0;n<e.length;n++)if(null===o.a.get(g(e[n])))return!1;return null!==o.a.get("brLandingId")&&null!==o.a.get("brStartTimeStamp")&&null!==o.a.get("brTimeElapsed")}(s),u=document.referrer,l=!!u,p=l&&!f.test(u),S=!(null===(a=window)||void 0===a?void 0:null===(r=a.performance)||void 0===r?void 0:r.navigation)||0===window.performance.navigation.type;if(!l&&S||p||!i)(function t(e){o.a.set("brLandingId",function t(){return Date.now()+Math.floor(1e3*Math.random()).toString()}()),o.a.set("brStartTimeStamp",Date.now()),o.a.set("brTimeElapsed",0);for(var n=0;n<e.length;n++)o.a.set(g(e[n]),!1)})(s),h(s,0,e.current);else if(!m(s)){var T=o.a.get("brTimeElapsed");if(null===T||0===T){var L=o.a.get("brStartTimeStamp");T=L?Date.now()-L:0}o.a.set("brStartTimeStamp",Date.now()),h(s,T,e.current)}m(s)||(n=!0,document.addEventListener("visibilitychange",t),c.a.onValueChange("brLandingInfo",v))}}catch(t){console.error(t)}return function(){n&&document.removeEventListener("visibilitychange",t)}},[])};n.d(e,"useBounceRateTracking",function(){return S}),e.default=function t(){return S(),null}}}});
//# sourceMappingURL=tracking.bounce-rate.ce6c3e1fc3.js.map