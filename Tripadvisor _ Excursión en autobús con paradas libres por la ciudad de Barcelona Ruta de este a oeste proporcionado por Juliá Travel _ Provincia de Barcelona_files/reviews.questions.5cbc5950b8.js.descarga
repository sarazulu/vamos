($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/reviews.questions",d:["vendor-react-libs","@ta/modal.styleguide","@ta/modal.headers","lithium-platform","vendor-babel","vendor-urql","@ta/common.features","@ta/core-ui.avatar","lithium-common","@ta/input.text-area","@ta/login.login","@ta/reviews.posting-guidelines-link","@ta/reviews.questions-ajax","@ta/reviews.context","@ta/attractions.scroll-util","@ta/platform.interactions","@ta/reviews.skeletons","@ta/core-ui.pagination","@ta/common.text","@ta/core-ui.card","@ta/iap-reporting.topics","@ta/social.overflow-menu","@ta/reviews.answer-provider","@ta/styleguide.skeleton"],e:["./packages/reviews/questions/index.jsx"],m:{"./packages/reviews/questions/index.jsx":function(e,n,i){"use strict";i.r(n);var t=i("react"),a=i("@ta/modal.styleguide"),o=i.n(a),r=i("@ta/modal.headers"),l=i("@ta/platform.i18n"),d=i.n(l),s=i("@babel/runtime/helpers/esm/defineProperty"),u=i.n(s),c=i("@babel/runtime/helpers/esm/slicedToArray"),m=i.n(c),v=i("urql"),k=i("@ta/common.classnames"),f=i.n(k),g=i("@ta/common.features"),p=i("@ta/core-ui.avatar"),N=i("@ta/core-ui.button"),b=i.n(N),_=i("@ta/input.text-area"),S=i("@ta/lithium.context"),y=i("@ta/login.login"),E=i.n(y),F=i("@ta/reviews.posting-guidelines-link"),h=i.n(F),I=i("@ta/reviews.questions-ajax"),w=i.n(I),D=i("@ta/styleguide.loading"),O=JSON.parse('{"kind":"Document","definitions":[{"kind":"FragmentDefinition","name":{"kind":"Name","value":"Questions_PhotoSizes"},"typeCondition":{"kind":"NamedType","name":{"kind":"Name","value":"PhotoSize"}},"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"url"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"width"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"height"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"isHorizontal"},"arguments":[],"directives":[]}]}}],"loc":{"start":0,"end":93}}');O.__key=54959661849808,O.loc.source={body:"31fc4b1f1cd0"};var V=O,T=JSON.parse('{"kind":"Document","definitions":[{"kind":"FragmentDefinition","name":{"kind":"Name","value":"Questions_MemberFields"},"typeCondition":{"kind":"NamedType","name":{"kind":"Name","value":"MemberProfile"}},"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","alias":{"kind":"Name","value":"userId"},"name":{"kind":"Name","value":"id"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"isMe"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"isVerified"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"isFollowing"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"displayName"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"username"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"avatar"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"id"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"photoSizes"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"FragmentSpread","name":{"kind":"Name","value":"Questions_PhotoSizes"},"directives":[]}]}}]}},{"kind":"Field","name":{"kind":"Name","value":"hometown"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"locationId"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"fallbackString"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"location"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"locationId"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"additionalNames"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"long"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"name"},"arguments":[],"directives":[]}]}}]}},{"kind":"Field","name":{"kind":"Name","value":"contributionCounts"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"sumAllUgc"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"helpfulVote"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"route"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"url"},"arguments":[],"directives":[]}]}}]}}],"loc":{"start":0,"end":469}}');T.__key=0x6d7317aac510,T.loc.source={body:"6d7317aac510"};var C={};T.definitions=T.definitions.concat(function P(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!C[n]&&(C[n]=!0,!0)})}(V.definitions));var A=T,q=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"QuestionFormQuery"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"locationId"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]},{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"loggedIn"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Boolean"}}},"directives":[]},{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"loggedInUserId"}},"type":{"kind":"NamedType","name":{"kind":"Name","value":"String"}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","alias":{"kind":"Name","value":"currentMember"},"name":{"kind":"Name","value":"memberProfile"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"userId"},"value":{"kind":"ObjectValue","fields":[{"kind":"ObjectField","name":{"kind":"Name","value":"id"},"value":{"kind":"Variable","name":{"kind":"Name","value":"loggedInUserId"}}}]}}],"directives":[{"kind":"Directive","name":{"kind":"Name","value":"include"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"if"},"value":{"kind":"Variable","name":{"kind":"Name","value":"loggedIn"}}}]}],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"FragmentSpread","name":{"kind":"Name","value":"Questions_MemberFields"},"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"locations"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"locationIds"},"value":{"kind":"ListValue","values":[{"kind":"Variable","name":{"kind":"Name","value":"locationId"}}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"locationId"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"name"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"geoName"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"parentGeoId"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"topicCount"},"arguments":[],"directives":[]}]}}]}}],"loc":{"start":0,"end":387}}');q.__key=0x88d8cdbb813b,q.loc.source={body:"88d8cdbb813b"};var j={};q.definitions=q.definitions.concat(function x(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!j[n]&&(j[n]=!0,!0)})}(A.definitions));var M=q;function L(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,t)}return i}var Q=function e(n){var i=t.useContext(S.Device).securityToken,a=t.useContext(S.Visitor).userId,o=E()(),r=t.useState(""),s=m()(r,2),c=s[0],k=s[1],N=t.useState([]),y=m()(N,2),F=y[0],I=y[1],O=t.useState(!1),V=m()(O,2),T=V[0],C=V[1],P=t.useContext(S.Route),A=m()(P,1)[0].params.detailId||0,q=function e(){var i=Object(l.useLocalize)().localize;switch(n.placeType){case null:return"";case"ATTRACTION":return i.string("qaa_form_placeholder_no_name");case"ACTIVITY":case"TOUR":return i.string("qaa_form_placeholder_product_no_name");case"EATERY":return i.string("qa_q_placeholder_restaurant_no_name");default:return i.string("qa_q_placeholder_lo")}}();if(!A)return null;var j=function e(n){return k(n.currentTarget.value)},x=function e(i){C(!1),i.ok?n.onSubmit(i):i.json().then(function(e){I(Array.from(e.errors))})},Q=function e(n){if(c){C(!0);var i=function t(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?L(i,!0).forEach(function(n){u()(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):L(i).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}({},n);w.a.submitQuestion({locationId:A,text:c,requestValidation:i,onResponse:x})}};return t.createElement(v.Query,{query:M,variables:{locationId:A,loggedInUserId:a,loggedIn:!!a}},function(e){var a,r,l,s,m=e.data;if(e.fetching||!m)return null;var v=m.currentMember,k=null===(a=m.locations)||void 0===a?void 0:a[0];return k?t.createElement(t.Fragment,null,t.createElement("div",{className:"bMzL1UvU"},t.createElement(d.a,{id:"qa_get_quick_answers_56a",args:{0:k.name}})),t.createElement("form",{className:"_1DkVqw7O",onSubmit:function e(n){o({}).then(function(){Q({csrfToken:i,altSessionId:""})}),n.preventDefault()}},t.createElement("div",null,t.createElement("a",{href:null==v?void 0:null===(r=v.route)||void 0===r?void 0:r.url},t.createElement(p.Avatar,{sources:(null==v?void 0:null===(l=v.avatar)||void 0===l?void 0:l.photoSizes)||[],size:"xtra-small"}))),t.createElement("div",{className:"_2j0_R0Qc"},t.createElement(_.TextArea,{value:c,onChange:j,className:f()("_17bwhq_i",(s={},u()(s,"p60w6e5a",T),u()(s,"l7E3G2cJ",Object(g.featureIsEnabled)("cx_brand_refresh_degreen")),s)),placeholder:q,name:"answer",rows:6,disabled:T}),F&&t.createElement("ul",{className:"jcEFDZfv"},F.map(function(e){return t.createElement("li",{key:e},e)})),t.createElement(d.a,{id:"qa_question_overlay_note_56a"}),t.createElement("div",{className:"Yfqs8TYR"},t.createElement(h.a,{location:k,theme:"community",inlineExpansion:!0})),t.createElement("div",{className:"_2397T6GN"},t.createElement("span",{className:"GLjJYUHU"},t.createElement(b.a,{onClick:function e(n){o({}).then(function(){Q({csrfToken:i,altSessionId:""})}),n.preventDefault()},disabled:T},T?t.createElement(D.LoadingBubbles,{size:"small"}):t.createElement(d.a,{id:"common_Submit"}))),t.createElement(b.a,{onClick:function e(i){i.preventDefault(),n.onCancel()},theme:"secondary",disabled:T},t.createElement(d.a,{id:"btn_cancel"})," "))))):null})},z=function e(n){return t.createElement(o.a,{onClose:n.onCancel,header:t.createElement(r.TitleBar,{iconName:"forums",displayType:"LEFT_ALIGN_GRAY"},t.createElement(d.a,{id:"hr_ask_a_question"})," ")},t.createElement("div",{className:"ZQrYTKdL"},t.createElement(Q,n)))},U=i("@ta/reviews.context"),G=i("@babel/runtime/helpers/esm/toConsumableArray"),R=i.n(G),Y=i("@ta/attractions.scroll-util"),B=i.n(Y),H=i("@ta/platform.interactions"),J=i("@ta/reviews.skeletons"),K=i.n(J),W=i("@ta/core-ui.pagination"),Z=i.n(W),X=JSON.parse('{"kind":"Document","definitions":[{"kind":"FragmentDefinition","name":{"kind":"Name","value":"Questions_PostingFields"},"typeCondition":{"kind":"NamedType","name":{"kind":"Name","value":"ApiTopicPosting"}},"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"id"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"locationTopicId"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"content"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"isOwner"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"isReviewer"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"upvotes"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"contentLanguage"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"timePublished"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"timeSubmitted"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"userProfile"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"FragmentSpread","name":{"kind":"Name","value":"Questions_MemberFields"},"directives":[]}]}}]}}],"loc":{"start":0,"end":279}}');X.__key=82391240618282,X.loc.source={body:"4aef34a1312a"};var $={};X.definitions=X.definitions.concat(function ee(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!$[n]&&($[n]=!0,!0)})}(A.definitions));var ne=X,ie=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"QuestionSectionQuery"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"locationId"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]},{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"offset"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]},{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"limit"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]},{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"loggedIn"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Boolean"}}},"directives":[]},{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"loggedInUserId"}},"type":{"kind":"NamedType","name":{"kind":"Name","value":"String"}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","alias":{"kind":"Name","value":"currentMember"},"name":{"kind":"Name","value":"memberProfile"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"userId"},"value":{"kind":"ObjectValue","fields":[{"kind":"ObjectField","name":{"kind":"Name","value":"id"},"value":{"kind":"Variable","name":{"kind":"Name","value":"loggedInUserId"}}}]}}],"directives":[{"kind":"Directive","name":{"kind":"Name","value":"include"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"if"},"value":{"kind":"Variable","name":{"kind":"Name","value":"loggedIn"}}}]}],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"FragmentSpread","name":{"kind":"Name","value":"Questions_MemberFields"},"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"locations"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"locationIds"},"value":{"kind":"ListValue","values":[{"kind":"Variable","name":{"kind":"Name","value":"locationId"}}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"locationId"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"name"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"geoName"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"parentGeoId"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"topicCount"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"locationTopics"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"page"},"value":{"kind":"ObjectValue","fields":[{"kind":"ObjectField","name":{"kind":"Name","value":"offset"},"value":{"kind":"Variable","name":{"kind":"Name","value":"offset"}}},{"kind":"ObjectField","name":{"kind":"Name","value":"limit"},"value":{"kind":"Variable","name":{"kind":"Name","value":"limit"}}}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"id"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"locationId"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"mcid"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"content"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"timeSubmitted"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"postCount"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"url"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"contentLanguage"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"userProfile"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"FragmentSpread","name":{"kind":"Name","value":"Questions_MemberFields"},"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"topPosting"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"FragmentSpread","name":{"kind":"Name","value":"Questions_PostingFields"},"directives":[]}]}}]}}]}}]}}],"loc":{"start":0,"end":778}}');ie.__key=0xe21d1e561922,ie.loc.source={body:"e21d1e561922"};var te={};function ae(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!te[n]&&(te[n]=!0,!0)})}ie.definitions=ie.definitions.concat(ae(A.definitions)),ie.definitions=ie.definitions.concat(ae(ne.definitions));var oe=ie,re=i("@ta/common.text"),le=i("@ta/core-ui.card"),de=i("@ta/iap-reporting.topics"),se=i.n(de),ue=i("@ta/social.overflow-menu"),ce=i.n(ue);function me(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,t)}return i}var ve=function e(n){var i,a,o,r,s,c=E()(),v=t.useContext(S.Device).securityToken,k=t.useState(""),N=m()(k,2),y=N[0],F=N[1],I=t.useState([]),O=m()(I,2),V=O[0],T=O[1],C=t.useState(!1),P=m()(C,2),A=P[0],q=P[1],j=t.useState(!1),x=m()(j,2),M=x[0],L=x[1],Q=Object(l.useLocalize)().localize,z=Object(H.useGARecordCallback)({module:"faq",action:"click",context:"answers_faq_answer_form"}),U=t.useCallback(function(){z(),L(!0)},[z]),G=t.useCallback(function(e){return F(e.currentTarget.value)},[]),R=t.useCallback(function(){F(""),T([]),L(!1),q(!1)},[]),Y=function e(i){q(!1),i.ok?(n.onSubmit&&n.onSubmit(i),R()):i.json().then(function(e){T(Array.from(e.errors))})},B=function e(i){if(y){q(!0);var t=n.topic,a=t.locationId,o=t.id,r=function l(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?me(i,!0).forEach(function(n){u()(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):me(i).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}({},i);w.a.submitAnswer({locationId:a,topicId:o,text:y,requestValidation:r,onResponse:Y})}};return t.createElement("form",{className:"mWgFiYro",onSubmit:function e(n){c({}).then(function(){B({csrfToken:v,altSessionId:""})}),n.preventDefault()}},t.createElement("a",{href:null===(i=n.currentMember)||void 0===i?void 0:null===(a=i.route)||void 0===a?void 0:a.url},t.createElement(p.Avatar,{sources:(null===(o=n.currentMember)||void 0===o?void 0:null===(r=o.avatar)||void 0===r?void 0:r.photoSizes)||[],size:"xtra-small"})),t.createElement("div",{className:"_1jo6bqUz"},t.createElement(_.TextArea,{value:y,onChange:G,onFocus:U,className:f()("_3EHIb-q4",(s={},u()(s,"w-cqhCq_",A),u()(s,"_2wS0zNsz",Object(g.featureIsEnabled)("cx_brand_refresh_degreen")),s)),placeholder:n.topic.postCount?Q.string("hr_community_qa_answer_question"):Q.string("hr_community_qa_answer_question_first"),name:"answer",rows:M?3:1,disabled:A}),M&&t.createElement("div",{className:"_2VXkOn1a"},t.createElement("div",{className:"_3zK5DWBH"},t.createElement(h.a,{location:n.location,theme:"community"})),t.createElement("div",null,V&&t.createElement("ul",{className:"_33_Xbkug"},V.map(function(e){return t.createElement("li",{key:e},e)})),t.createElement("div",{className:"_2JQz4Wi-"},t.createElement("span",{className:"_2U5PNj3A"},t.createElement(b.a,{onClick:function e(n){c({}).then(function(){B({csrfToken:v,altSessionId:""})}),n.preventDefault()},disabled:A},A?t.createElement(D.LoadingBubbles,{size:"small"}):t.createElement(d.a,{id:"common_Submit"}))),t.createElement(b.a,{onClick:function e(n){n.preventDefault(),A||R()},theme:"secondary",disabled:A},t.createElement(d.a,{id:"btn_cancel"})," "))))))},ke=i("@ta/reviews.answer-provider"),fe=i.n(ke),ge=i("@ta/styleguide.skeleton"),pe=i.n(ge),Ne=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"QuestionSectionPostingQuery"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"fetchTopic"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Boolean"}}},"directives":[]},{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"fetchPosting"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Boolean"}}},"directives":[]},{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"topicId"}},"type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}},"directives":[]},{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"postingId"}},"type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"topics"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"topicIds"},"value":{"kind":"ListValue","values":[{"kind":"Variable","name":{"kind":"Name","value":"topicId"}}]}}],"directives":[{"kind":"Directive","name":{"kind":"Name","value":"include"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"if"},"value":{"kind":"Variable","name":{"kind":"Name","value":"fetchTopic"}}}]}],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"postings"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"FragmentSpread","name":{"kind":"Name","value":"Questions_PostingFields"},"directives":[]}]}}]}},{"kind":"Field","name":{"kind":"Name","value":"postings"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"postingIds"},"value":{"kind":"ListValue","values":[{"kind":"Variable","name":{"kind":"Name","value":"postingId"}}]}}],"directives":[{"kind":"Directive","name":{"kind":"Name","value":"include"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"if"},"value":{"kind":"Variable","name":{"kind":"Name","value":"fetchPosting"}}}]}],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"FragmentSpread","name":{"kind":"Name","value":"Questions_PostingFields"},"directives":[]}]}}]}}],"loc":{"start":0,"end":393}}');Ne.__key=0xc261f94327c3,Ne.loc.source={body:"c261f94327c3"};var be={};Ne.definitions=Ne.definitions.concat(function _e(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!be[n]&&(be[n]=!0,!0)})}(ne.definitions));var Se,ye=Ne,Ee=i("@ta/platform.import"),Fe=Ee.component.onUsage(((Se=function e(){return i.e("@ta/common.text")}).__PACKAGE__="@ta/reviews.questions",Se.__MODULE_ID__="@ta/common.text",Se.__MODULE_NAME__="@ta/common.text",Se.__BUNDLE_NAME__="@ta/common.text",Se.__GET_SYNC__=function(){return i.m["@ta/common.text"]?i("@ta/common.text"):null},Se.__IS_LOADED__=function(){return void 0!==i.m["@ta/common.text"]},Se),"DirectionalText"),he=Ee.component.onUsage(function(){var e=function e(){return i.e("@ta/reviews.questions/VotingForm.demand").then(i.bind(null,"./packages/reviews/questions/VotingForm.jsx"))};return e.__PACKAGE__="@ta/reviews.questions",e.__MODULE_ID__="./packages/reviews/questions/VotingForm.jsx",e.__MODULE_NAME__="VotingForm",e.__BUNDLE_NAME__="@ta/reviews.questions/VotingForm.demand",e.__GET_SYNC__=function(){return i.m["./packages/reviews/questions/VotingForm.jsx"]?i("./packages/reviews/questions/VotingForm.jsx"):null},e.__IS_LOADED__=function(){return void 0!==i.m["./packages/reviews/questions/VotingForm.jsx"]},e}(),"default"),Ie=function e(n){var i,a,o,r,l,d,s,u,c=n.posting,m=Object(le.useActorEventLocalize)({isVerified:(null===(i=c.userProfile)||void 0===i?void 0:i.isVerified)||!1,href:(null===(a=c.userProfile)||void 0===a?void 0:null===(o=a.route)||void 0===o?void 0:o.url)||"",displayName:(null===(r=c.userProfile)||void 0===r?void 0:r.displayName)||"",contentCount:(null===(l=c.userProfile)||void 0===l?void 0:null===(d=l.contributionCounts)||void 0===d?void 0:d.sumAllUgc)||0}).localize;return t.createElement(t.Fragment,null,t.createElement(le.CardHeader,{overflowMenu:t.createElement(ce.a,{id:"".concat(c.id),useReportModal:se.a.useLocationPosting}),thumbnail:t.createElement(p.Avatar,{sources:null===(s=c.userProfile)||void 0===s?void 0:null===(u=s.avatar)||void 0===u?void 0:u.photoSizes,size:"small"}),event:t.createElement("div",{className:"_1E3GDbzj"},t.createElement("div",null,t.createElement(le.ActorEventMessage,null,m("member_event_on_topic_posting"))))}),t.createElement("div",{className:"A0FYWiEe"},t.createElement(Fe,{contentLanguage:c.contentLanguage},c.content),t.createElement(he,{postingId:c.id,numVotes:c.upvotes})))},we=function e(n){var i=n.topic,a=n.topPostingOverride,o=n.location,r=n.currentMember,l=t.useState(!1),s=m()(l,2),u=s[0],c=s[1],v=t.useState([]),k=m()(v,2),f=k[0],g=k[1],p=Object(H.useGARecorder)(),N=function e(n){n.preventDefault(),u||p({module:"faq",action:"click",context:"show_all_answers"}),c(!u)},b=function e(n){return function(){return g([].concat(R()(f),[n]))}};return t.createElement(fe.a,{query:ye,topic:i,expanded:u,newPostingId:a},function(e){var n=e.filter(function(e){return!(e&&f.includes(e.id))}),a=n.length;return n.map(function(e,n){return t.createElement("div",{className:"J2Zf5LdC",key:e?e.id:-1*n},e?t.createElement(Ie,{locationId:o.locationId,posting:e,currentMember:r,onAnswerDeleted:b(e.id)}):t.createElement(pe.a,{width:"100%",height:"100px"}),n===a-1&&function e(n){return n>1&&t.createElement("a",{href:i.url,onClick:N,className:"_39is0HXp"},u?t.createElement(d.a,{id:"hr_community_qa_show_top_answer"}):t.createElement(d.a,{id:"hr_community_qa_show_all_answers"}))}(u?a:i.postCount))})})},De=function e(n){var i,a,o,r,l,d,s,u,c,m,v,k,f,g,N,b,_,S,y,E,F=n.topic,h=n.currentMember,I=n.location,w=n.onAnswerPosted,D=n.topPostingOverride,O=Object(le.useActorEventLocalize)({isVerified:(null===(i=F.userProfile)||void 0===i?void 0:i.isVerified)||!1,href:(null===(a=F.userProfile)||void 0===a?void 0:null===(o=a.route)||void 0===o?void 0:o.url)||"",displayName:(null===(r=F.userProfile)||void 0===r?void 0:r.displayName)||"",displayDate:F.timeSubmitted?new Date(F.timeSubmitted).toISOString():"",contentCount:(null===(l=F.userProfile)||void 0===l?void 0:null===(d=l.contributionCounts)||void 0===d?void 0:d.sumAllUgc)||0}).localize;return t.createElement("div",{className:"HFKnKsNr"},t.createElement("div",{className:"_2H7QwnZh"},t.createElement(le.CardHeader,{overflowMenu:t.createElement(ce.a,{id:"".concat(F.id),useReportModal:se.a.useLocationTopic}),thumbnail:t.createElement(p.Avatar,{sources:null===(s=F.userProfile)||void 0===s?void 0:null===(u=s.avatar)||void 0===u?void 0:u.photoSizes}),event:t.createElement(t.Fragment,null,t.createElement(le.ActorEventMessage,null,O("member_event_on_question_with_date")),t.createElement(le.MemberContribution,{helpfulVotes:(null===(c=F.userProfile)||void 0===c?void 0:null===(m=c.contributionCounts)||void 0===m?void 0:m.helpfulVote)||0,sumAllUgc:(null===(v=F.userProfile)||void 0===v?void 0:null===(k=v.contributionCounts)||void 0===k?void 0:k.sumAllUgc)||0,hometown:{locationId:null===(f=n.currentMember)||void 0===f?void 0:null===(g=f.hometown)||void 0===g?void 0:g.locationId,fallbackString:null===(N=n.currentMember)||void 0===N?void 0:null===(b=N.hometown)||void 0===b?void 0:b.fallbackString,name:null===(_=n.currentMember)||void 0===_?void 0:null===(S=_.hometown)||void 0===S?void 0:null===(y=S.location)||void 0===y?void 0:null===(E=y.additionalNames)||void 0===E?void 0:E.long}}))}),t.createElement("a",{href:F.url,className:"_3j9mztQx"},t.createElement(re.DirectionalText,{contentLanguage:F.contentLanguage},F.content))),t.createElement(we,{topic:F,topPostingOverride:D,location:I,currentMember:h}),t.createElement("div",{className:"_2H7QwnZh"},t.createElement(ve,{topic:F,currentMember:h,location:I,onSubmit:w})))},Oe=function e(n){return(n||[]).filter(Boolean).map(function(e){return{url:(null==e?void 0:e.url)||"",height:(null==e?void 0:e.height)||0,width:(null==e?void 0:e.width)||0}})},Ve=function e(n){var i,t,a,o,r,l;return{route:{url:(null===(i=n.route)||void 0===i?void 0:i.url)||""},contributionCounts:{sumAllUgc:(null===(t=n.contributionCounts)||void 0===t?void 0:t.sumAllUgc)||0,helpfulVote:(null===(a=n.contributionCounts)||void 0===a?void 0:a.helpfulVote)||0},avatar:{photoSizes:Oe(null===(o=n.avatar)||void 0===o?void 0:o.photoSizes)||[]},isVerified:n.isVerified||!1,displayName:n.displayName||"",hometown:n.hometown&&{locationId:n.hometown.locationId,fallbackString:n.hometown.fallbackString,location:{additionalNames:{long:null===(r=n.hometown.location)||void 0===r?void 0:null===(l=r.additionalNames)||void 0===l?void 0:l.long}}}}},Te=function e(n){var i=n.totalQuestionsCount,a=n.scrollToIdOnPaginationClick,o=n.scrollOffset,r=t.useState([]),l=m()(r,2),d=l[0],s=l[1],u=t.useState(new Map),c=m()(u,2),k=c[0],f=c[1],g=t.useState(0),p=m()(g,2),N=p[0],b=p[1],_=t.useContext(S.Visitor).userId,y=Object(H.useGARecorder)(),E=t.useCallback(function(e,n){return y({module:"faq",action:"click",context:"pagination_".concat(e),value:n})},[y]),F=function e(n){E(n.buttonType,n.pageNumber),b(function e(n){return 5*(n-1)}(n.pageNumber));var i=document.querySelector("#".concat(a));B()(i,o)},h=t.useContext(S.Route),I=m()(h,1)[0].params.detailId||0;if(!I)return null;var w=0,D=I<0;return t.createElement(v.Query,{query:oe,variables:{offset:N,locationId:I,limit:5,loggedInUserId:_,loggedIn:!!_},pause:D},function(e){var n=e.data,a=e.fetching,o=function e(n,i){if(n||!(i&&i.locations&&i.locations[0]))return{location:{locationId:-1,name:"",geoName:"",parentGeoId:-1},topicCount:0,locationTopics:[],currentMember:void 0};var t=i.currentMember,a=i.locations;a=void 0===a?[]:a;var o=m()(a,1)[0],r=(o=void 0===o?{}:o).topicCount,l=o.locationTopics,d=void 0===l?[]:l;return{location:{locationId:o.locationId,name:o.name,geoName:o.geoName,parentGeoId:o.parentGeoId},topicCount:r,locationTopics:d,currentMember:t?Ve(t):void 0}}(a,n),r=o.topicCount,l=o.locationTopics,u=o.currentMember,c=o.location;if(!a&&!r)return null;a||(w=r);var v=function e(n){return function(){return s([].concat(R()(d),[n]))}},g=function e(n){return function(e){e.json().then(function(e){k.set(n,e.postingId),f(new Map(k))})}};return i?t.createElement(t.Fragment,null,a?R()(Array(5)).map(function(e,n){return t.createElement(K.a,{key:n})}):l.filter(function(e){return!d.includes(e.id)}).map(function(e){return t.createElement(De,{topic:e,location:c,key:e.id,currentMember:u,topPostingOverride:k.get(e.id),onAnswerPosted:g(e.id),onQuestionDeleted:v(e.id)})}),r>5&&t.createElement("div",{className:"_11gY_2Lc"},t.createElement(Z.a,{offset:N,limit:5,total:r||w,onClick:F}))):null})},Ce=function e(n){var i,a=Object(U.useLocationCommunityContent)({locationId:n.locationId}),o=m()(a,1)[0],r=o.fetching,l=o.data;if(r)return null;var s=null==l?void 0:null===(i=l.locations)||void 0===i?void 0:i[0];if(!s||!s.topicCount)return null;var c=s.topicCount||0;return c>5&&t.createElement("a",{href:s.topicsUrl,className:f()("mNceixHb",u()({},"_3PmCKQXK",Object(g.featureIsEnabled)("cx_brand_refresh_degreen"))),target:"_blank"},t.createElement(d.a,{id:"qa_see_all_n_questions",args:{nQuestions:c}}))};i.d(n,"QuestionFormModal",function(){return z}),i.d(n,"SeeAllQuestionsLink",function(){return Ce}),i.d(n,"QuestionsTabContent",function(){return Te})}}});
//# sourceMappingURL=reviews.questions.5cbc5950b8.js.map