($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/trips.trip-toasts",d:["vendor-babel","vendor-react-libs","@ta/trips.trip-types","lithium-platform","@ta/core-ui.toast","vendor-urql","@ta/trips.graphql","@ta/trips.trip-errors","@ta/common.text-html","@ta/trips.impressions"],e:["./packages/trips/trip-toasts/use-trip-toasts.jsx"],m:{"./packages/trips/trip-toasts/use-trip-toasts.jsx":function(e,t,a){"use strict";a.r(t);var r=a("@babel/runtime/helpers/esm/slicedToArray"),n=a.n(r),i=a("react"),o=(a("@ta/trips.trip-types"),a("@ta/platform.i18n")),l=a.n(o),s=a("@ta/core-ui.toast"),c=a("urql"),d=a("@ta/trips.graphql"),u=a("@ta/trips.trip-errors"),m=a.n(u),p=a("@ta/common.text-html"),v=a("@ta/trips.impressions"),_=function e(t){var a,r=t.trip,n=t.messageType,c=t.onCtaClick,d=i.useCallback(function(){var e,t;c&&c(),(null===(e=r.route)||void 0===e?void 0:e.url)&&(window.location=null===(t=r.route)||void 0===t?void 0:t.url)},[c,r]),u=i.createElement("div",{onClick:d},i.createElement(l.a,{id:"stat_modal_view_trip_v2"}));switch(n){case"CREATED":a=i.createElement(o.UnsafeLocalize,{id:"create_trip_success_toast_with_bold",args:{TripName:Object(p.escapeHtml)((null==r?void 0:r.title)||"")}});break;case"SAVED":a=i.createElement(o.UnsafeLocalize,{id:"stat_modal_saved_to_tripname_with_bold",args:{TripName:Object(p.escapeHtml)((null==r?void 0:r.title)||"")}});break;default:a=null}return i.createElement(s.ToastItem,{cta:u},i.createElement(v.TripsImpression,{element:"savedToast",trip:r},i.createElement("span",{className:"IG_1KSi_"},a)))},T=function e(t){var a,r=t.trip,n=t.onUndo,c=i.createElement("div",{onClick:n},i.createElement(l.a,{id:"stat_modal_undo"}));return i.createElement(s.ToastItem,{cta:c},i.createElement(v.TripsImpression,{element:"unsaveToast",trip:r},i.createElement("span",{className:"IG_1KSi_"},i.createElement(o.UnsafeLocalize,{id:"stat_modal_removed_from_tripname_with_bold_v3",args:{TripName:Object(p.escapeHtml)(null==r?void 0:r.title),TripLink:(null===(a=r.route)||void 0===a?void 0:a.url)||"",TripClass:"_-0lxWGBX"}}))))},E=function e(t){var a,r=t.trip,n=t.onCtaClick,c=i.useCallback(function(){n()},[n]),d=i.createElement("div",{onClick:c},i.createElement(l.a,{id:"stat_modal_change"}));return i.createElement(s.ToastItem,{cta:d},i.createElement(v.TripsImpression,{element:"savedToast",trip:r},i.createElement("span",{className:"IG_1KSi_"},i.createElement(o.UnsafeLocalize,{id:"stat_modal_saved_to_tripname_with_bold_v3",args:{TripName:Object(p.escapeHtml)(null==r?void 0:r.title),TripLink:(null===(a=r.route)||void 0===a?void 0:a.url)||"",TripClass:"_-0lxWGBX"}}))))},f=function e(t){var a=t.onUndo,r=i.createElement("div",{onClick:a},i.createElement(l.a,{id:"stat_modal_undo"}));return i.createElement(s.ToastItem,{cta:r},i.createElement(l.a,{id:"stat_modal_removed_from_tripname",args:{sTripName:i.createElement(l.a,{id:"m1_trips_my_saves_header"})}}))};t.default=function e(){var t=i.useContext(s.Toast),a=n()(t,2),r=a[0],o=a[1],u=Object(c.useMutation)(d.AddItemToTrip),p=n()(u,2)[1],v=i.useCallback(function(e,t){return p({tripId:e,referenceId:"".concat(t.id),referenceType:t.type,allowDuplicates:!1}).then(function(e){var t,a,r,n,i,o,l,s=null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.addItemToTrip,c=null==e?void 0:null===(a=e.data)||void 0===a?void 0:null===(r=a.addItemToTrip)||void 0===r?void 0:r.trip,d=null==e?void 0:null===(n=e.data)||void 0===n?void 0:null===(i=n.addItemToTrip)||void 0===i?void 0:null===(o=i.errors)||void 0===o?void 0:null===(l=o[0])||void 0===l?void 0:l.error;return{trip:c,error:s?null:{query:"ADD_ITEM_TO_TRIP",tripsError:d||void 0}}}).catch(function(){return{trip:null,error:{query:"ADD_ITEM_TO_TRIP"}}})},[p]),b=i.useCallback(function(e,t,a){var n=i.createElement(_,{trip:e,messageType:t,onCtaClick:a});r({node:n})},[r]),h=i.useCallback(function(e,t,a){var n=i.createElement(T,{trip:e,onUndo:function r(){v(e.id,t).then(function(e){a&&a(e.trip,e.error)})}});r({node:n})},[v,r]),C=i.useCallback(function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8e3,n=i.createElement(E,{trip:e,onCtaClick:function e(){t&&t(),o()}});r({node:n,timeout:a})},[r,o]),I=i.useCallback(function(){var e=i.createElement(s.ToastItem,null,i.createElement(l.a,{id:"m1_trips_save_success_stat_d2"}));r({node:e})},[r]),k=Object(c.useMutation)(d.AddItemToMySaves),y=n()(k,2)[1],g=i.useCallback(function(e){return y({id:"".concat(e.id),type:e.type}).then(function(e){var t;return{isAdded:!!(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.MySaves_addToMySavesSingle)}}).catch(function(){return{isAdded:!1}})},[y]),A=i.useCallback(function(e,t){var a=i.createElement(f,{onUndo:function a(){g(e).then(function(e){t(e.isAdded)})}});r({node:a})},[r,g]),S=i.useCallback(function(e){return r({node:i.createElement(s.ToastItem,null,e)})},[r]);return{launchViewTripToast:b,launchRemoveFromTripToast:h,launchAutoSavedToTripToast:C,launchAddItemToMySavesToast:I,launchRemoveItemFromMySavesToast:A,launchErrorTripToast:i.useCallback(function(e){var t=i.createElement(s.ToastItem,null,i.createElement(m.a,{query:e.query,error:e.tripsError}));r({node:t})},[r]),launchToastMessage:S}}}}});
//# sourceMappingURL=trips.trip-toasts.26af8ac8b9.js.map