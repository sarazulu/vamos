($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/attractions.product-details-map-lithium-container",d:["vendor-babel","vendor-react-libs","vendor-urql","lithium-platform","@ta/attractions.product-details-map"],e:["./packages/attractions/product-details-map-lithium-container/ProductDetailMapLithiumContainer.jsx"],m:{"./packages/attractions/product-details-map-lithium-container/ProductDetailMapLithiumContainer.jsx":function(e,i,n){"use strict";n.r(i);var t=n("@babel/runtime/helpers/esm/slicedToArray"),a=n.n(t),d=n("react"),l=n("urql"),o=n("@ta/lithium.context"),r=n("@ta/attractions.product-details-map"),u=n.n(r),s=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"LocationDetails"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"locationIds"}},"type":{"kind":"NonNullType","type":{"kind":"ListType","type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"locations"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"locationIds"},"value":{"kind":"Variable","name":{"kind":"Name","value":"locationIds"}}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"locationId"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"name"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"latitude"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"longitude"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"reviewSummary"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"rating"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"count"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"detail"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"InlineFragment","typeCondition":{"kind":"NamedType","name":{"kind":"Name","value":"Attraction"}},"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","alias":{"kind":"Name","value":"category"},"name":{"kind":"Name","value":"tags"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"tagCategoryTypes"},"value":{"kind":"ListValue","values":[{"kind":"EnumValue","value":"ATTRACTIONS_L2_CATEGORY"}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"tagId"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"tagNameLocalized"},"arguments":[],"directives":[]}]}}]}}]}},{"kind":"Field","name":{"kind":"Name","value":"hoursOfOperation"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"dailyTimeIntervals"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"day"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"timeIntervals"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"closingTime"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"hours"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"minutes"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"openingTime"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"hours"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"minutes"},"arguments":[],"directives":[]}]}}]}}]}}]}},{"kind":"Field","name":{"kind":"Name","value":"url"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"thumbnail"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"id"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"photoSizes"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"url"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"width"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"height"},"arguments":[],"directives":[]}]}}]}},{"kind":"Field","name":{"kind":"Name","value":"reviewSummary"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"count"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"rating"},"arguments":[],"directives":[]}]}}]}}]}}],"loc":{"start":0,"end":798}}');s.__key=0xb8faf740d323,s.loc.source={body:"b8faf740d323"};var m=s;i.default=function e(i){var n=i.data,t=function e(){var i=d.useContext(o.Route),n=a()(i,2),t=n[0],l=n[1].navigateToFragment;return["MAPVIEW"===t.fragment,d.useCallback(function(){l("MAPVIEW")},[l]),d.useCallback(function(){l(null)},[l])]}(),r=a()(t,3),s=r[0],c=r[1],v=r[2],k=function e(i,n){var t=d.useMemo(function(){return i.locations?i.locations.map(function(e){return e.locationId}):[]},[i]),o=Object(l.useQuery)({query:m,variables:{locationIds:t||[]},pause:!(null==t?void 0:t.length)||n}),r=a()(o,1)[0];return d.useMemo(function(){var e;return((null==r?void 0:null===(e=r.data)||void 0===e?void 0:e.locations)||[]).map(function(e){var i,n,t;if(!e)return null;var a=e.locationId,d=e.name,l=e.url,o=e.longitude,r=e.latitude,u=e.thumbnail,s=e.reviewSummary;if(!a||!d||!l||"number"!=typeof r||"number"!=typeof o)return null;var m=!!u&&function e(i){var n=null==i?void 0:i.photoSizes;if(!n||!n.length)return null;var t=n.filter(function(e){return e&&e.height&&e.width&&e.url}),a=t[0],d=t[n.length-1],l=t[Math.max(0,t.length-2)];return{thumbnail:a,small:t[Math.max(0,t.length-3)],medium:l,large:d,original:d}}(u),c=Math.round(10*((null==s?void 0:s.rating)||0));return{id:a,geoPoint:{latitude:r,longitude:o},numReviews:(null==s?void 0:s.count)||0,thumbnail:m?{id:(null==u?void 0:u.id)||a,images:m}:null,name:d,bubbleRating:c,detailUrl:l,entityType:"attraction",popIndexText:void 0,category:null===(i=e.detail)||void 0===i?void 0:null===(n=i.category)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.tagNameLocalized,experiencesCtaEncodedLink:void 0,experiencesCtaNumOffers:void 0,experiencesCtaStartingCost:void 0,openHours:void 0,openNow:void 0,poiDescription:""}}).filter(function(e){return!!e})},[r])}(n,!s),g="MOBILE"===d.useContext(o.Device).viewportCategory,p=d.useContext(o.Route),N=a()(p,1)[0],S=N.page,f=N.params;return"AttractionProductReview"===S&&f.geoId&&n.locations&&n.locations.length?d.createElement(u.a,{locations:n.locations,attractionsList:k,isMobile:g,trackingModule:S,geoId:f.geoId,servlet:S,showMap:s,openMap:c,closeMap:v}):null}}}});
//# sourceMappingURL=attractions.product-details-map-lithium-container.ebcaa44592.js.map