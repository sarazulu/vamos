($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/social.share-cta",d:["vendor-babel","vendor-react-libs","lithium-platform","@ta/common.features","lithium-common","@ta/overlays.popover","@ta/platform.interactions","vendor-urql","@ta/trips.trip-util","@ta/common.clipboard"],e:["./packages/social/share-cta/share-cta.jsx"],m:{"./packages/social/share-cta/share-cta.jsx":function(e,t,i){"use strict";i.r(t);var n=i("@babel/runtime/helpers/esm/defineProperty"),a=i.n(n),r=i("react"),o=i.n(r),l=i("@ta/common.classnames"),s=i.n(l),c=i("@ta/common.features"),d=i("@ta/core-ui.icon"),m=i.n(d),u=i("@ta/platform.i18n"),p=i.n(u),v=i("@ta/platform.interactions"),k=i("@ta/lithium.context"),f={sms:19907,email:55593,clipboard:19905},_=function e(t){var i=t.url,n=t.itemType,a=t.itemId,l=t.action,s=t.type,c=t.children,d=Object(r.useContext)(k.Environment).domainName,m=i.startsWith("/")?"https://".concat(d).concat(i):i,u="".concat(n,"|").concat(a,"|").concat(m),p=s&&"repost_action"!==s?f[s]:void 0,_=Object(v.useGARecordCallback)({module:"ShareCta",action:l,context:u,value:p});return o.a.createElement("div",{onClick:_},c(s&&"repost_action"!==s?function e(t,i,n){if("LinkPost"===i)return t;var a=-1!==t.indexOf("?"),r=-1!==t.indexOf("#"),o="".concat(a?"&":"?","m=").concat(n);return r?t.replace("#","".concat(o,"#")):"".concat(t).concat(o)}(m,n,f[s]):m))};_.defaultProps={type:null};var b=_,h=i("@ta/overlays.popover"),y=i.n(h),g=function e(t){var i,n,l=t.iconName,d=t.localizedText,u=t.onClickFunction,p=t.size,v=Object(r.useContext)(k.Environment).cdnPrefix;return o.a.createElement("li",{onClick:u,className:s()("_3JDcFqle",(i={},a()(i,"Fk50IqWd","small"===p),a()(i,"_3idHdbyJ","large"===p),i))},l.startsWith("/")?o.a.createElement("img",{src:"".concat(v).concat(l),className:s()("Aww4xCHf",(n={},a()(n,"Fk50IqWd","small"===p),a()(n,"_3idHdbyJ","large"===p),n))}):o.a.createElement(m.a,{name:l,color:Object(c.featureIsEnabled)("cx_brand_refresh_degreen")?"black":"taGreen",fontSize:"large"===p?20:18}),o.a.createElement("span",{className:"_1Su_kTAs"},d))};g.defaultProps={onClickFunction:function e(){return!1}};var N=g,E=function e(t){var i,n=t.url,a=t.itemType,o=t.size,l=Object(u.useLocalize)().localize;return i="LinkPost"===a?l.string("share_sms_link"):"ReadTrip"===a?l.string("trips_share_email_subject"):"WriteTrip"===a?l.string("trips_collaborate_invite_email_subject"):l.string("link_share_sms_checkthisout"),r.createElement(N,{iconName:"text-message-fill",localizedText:l.string("link_share_option_sms"),size:o,onClickFunction:function e(){return function e(t,i){var n="".concat(i," ").concat(t);n.length>140&&(n=t),window.location.href="sms:?&body=".concat(encodeURIComponent(n))}(n,i)}})},S=i("@babel/runtime/helpers/esm/extends"),T=i.n(S),I=i("urql"),x=i("@ta/trips.trip-util"),C=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"PoiDetails"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"locationId"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"locations"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"locationIds"},"value":{"kind":"ListValue","values":[{"kind":"Variable","name":{"kind":"Name","value":"locationId"}}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"name"},"arguments":[],"directives":[]}]}}]}}],"loc":{"start":0,"end":103}}');C.__key=30493395597162,C.loc.source={body:"1bbbcc03376a"};var A=C,D=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"ReviewDetails"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"reviewId"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"reviews"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"reviewIds"},"value":{"kind":"ListValue","values":[{"kind":"Variable","name":{"kind":"Name","value":"reviewId"}}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"title"},"arguments":[],"directives":[]}]}}]}}],"loc":{"start":0,"end":99}}');D.__key=8049210694612,D.loc.source={body:"07521a581bd4"};var w=D,j=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"PhotoDetails"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"id"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"photos"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"photoIds"},"value":{"kind":"ListValue","values":[{"kind":"Variable","name":{"kind":"Name","value":"id"}}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"caption"},"arguments":[],"directives":[]}]}}]}}],"loc":{"start":0,"end":86}}');j.__key=0xf892e2b2908,j.loc.source={body:"0f892e2b2908"};var O=j,F=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"VideoDetails"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"id"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"videos"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"videoIds"},"value":{"kind":"ListValue","values":[{"kind":"Variable","name":{"kind":"Name","value":"id"}}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"caption"},"arguments":[],"directives":[]}]}}]}}],"loc":{"start":0,"end":86}}');F.__key=0x71275c1e8de7,F.loc.source={body:"71275c1e8de7"};var L=F,z=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"TripDetails"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"id"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"trips"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"tripIds"},"value":{"kind":"ListValue","values":[{"kind":"Variable","name":{"kind":"Name","value":"id"}}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"id"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"title"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"owner"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"isMe"},"arguments":[],"directives":[]}]}}]}}]}}],"loc":{"start":0,"end":117}}');z.__key=0x7db41de4facd,z.loc.source={body:"7db41de4facd"};var V=z,P=["Restaurant_Review","Attraction_Review","MobileAttraction_Review","AttractionProductReview","MobileAttractionProductReview","Hotel_Review","MobileHotel_Review"],R=function e(t){var i=t.url,n=t.subject,a=t.firstSentence,o=t.textBeforeLink,l=t.textAfterLink,s=t.size,c=Object(u.useLocalize)().localize;return r.createElement(N,{iconName:"email",localizedText:c.string("link_share_option_email"),size:s,onClickFunction:function e(){return function e(t,i,n,a,r,o){var l=encodeURIComponent(i),s=encodeURIComponent(r),c=encodeURIComponent(o),d=encodeURIComponent(n||t("share_email_subject")),m=a||t("link_share_sms_checkthisout"),u="".concat(m,"%0D%0A%0D%0A").concat(s?"".concat(s,"%0D%0A"):"").concat(l,"%0D%0A").concat(c?"".concat(c,"%0D%0A"):"","%0D%0A").concat(t("ib_share_booking_download_app"),"%0D%0A").concat(t("app_download_url_secure"));window.location.href="mailto:?subject=".concat(d,"&body=").concat(u)}(c.string,i,n,a,o,l)}})};R.defaultProps={firstSentence:"",subject:"",textBeforeLink:"",textAfterLink:""};var q=function e(t){var i=Object(u.useLocalize)().localize;if(P.indexOf(t.itemType)>-1)return r.createElement(I.Query,{query:A,variables:{locationId:t.itemId}},function(e){var n=e.fetching,a=e.data;if(n||!a)return r.createElement(R,t);var o=a.locations[0]&&a.locations[0].name||"";return r.createElement(R,T()({},t,{subject:i.string("link_share_email_subject",{0:o}),firstSentence:i.string("mobile_here_is_a_place_i_found_8e0"),textBeforeLink:o}))});if("Review"===t.itemType)return r.createElement(I.Query,{query:w,variables:{reviewId:t.itemId}},function(e){var n=e.fetching,a=e.data;return n||!a?r.createElement(R,t):r.createElement(R,T()({},t,{firstSentence:i.string("share_email_reviews"),textBeforeLink:a.reviews[0]&&a.reviews[0].title||""}))});if("Photo"===t.itemType)return r.createElement(I.Query,{query:O,variables:{id:t.itemId}},function(e){var n=e.fetching,a=e.data;return n||!a?r.createElement(R,t):r.createElement(R,T()({},t,{firstSentence:i.string("share_email_photos"),textBeforeLink:a.photos[0]&&a.photos[0].caption||""}))});if("Video"===t.itemType)return r.createElement(I.Query,{query:L,variables:{id:t.itemId}},function(e){var n=e.fetching,a=e.data;return n||!a?r.createElement(R,t):r.createElement(R,T()({},t,{firstSentence:i.string("share_email_videos"),textBeforeLink:a.videos[0]&&a.videos[0].caption||""}))});if("LinkPost"===t.itemType)return r.createElement(R,T()({},t,{subject:i.string("share_email_link_subject"),firstSentence:i.string("share_email_link"),textAfterLink:i.string("share_email_link_attribution")}));if("ForumPost"===t.itemType)return r.createElement(R,T()({},t,{firstSentence:i.string("share_email_forumtopic")}));if("ForumResponse"===t.itemType)return r.createElement(R,T()({},t,{firstSentence:i.string("share_email_forumreply")}));if("WriteTrip"===t.itemType||"ReadTrip"===t.itemType){var n="WriteTrip"===t.itemType;return r.createElement(I.Query,{query:V,variables:{id:t.itemId}},function(e){var a=e.fetching,o=e.data,l=t;if(!a&&o){var s=o.trips&&o.trips.find(function(e){return e.id===t.itemId}),c={tripName:s&&s.title||""},d=Object(x.isOwner)(s);l=Object.assign({},t,{firstSentence:i.string("trips_share_email_hey"),subject:i.string("trips_share_email_subject"),textBeforeLink:i.string("trips_share_email_body_v2",c)}),n?(l.subject=i.string("trips_collaborate_invite_email_subject"),l.textBeforeLink=d?i.string("trips_collaborate_invite_email_body_v2",c):i.string("trips_collaborate_invite_email_body_collaborator_version",c)):d||(l.subject=i.string("trips_share_email_subject"),l.textBeforeLink=i.string("trips_email_share_collaborator_version",c))}return r.createElement(R,l)})}return r.createElement(R,t)},B=i("@babel/runtime/helpers/esm/classCallCheck"),M=i.n(B),W=i("@babel/runtime/helpers/esm/createClass"),J=i.n(W),Q=i("@babel/runtime/helpers/esm/possibleConstructorReturn"),U=i.n(Q),X=i("@babel/runtime/helpers/esm/getPrototypeOf"),Y=i.n(X),H=i("@babel/runtime/helpers/esm/assertThisInitialized"),$=i.n(H),G=i("@babel/runtime/helpers/esm/inherits"),K=i.n(G),Z=i("@ta/common.clipboard"),ee=i.n(Z),te=function(e){function t(){var e,i;M()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return i=U()(this,(e=Y()(t)).call.apply(e,[this].concat(r))),a()($()(i),"state",{copied:!1}),a()($()(i),"copyAndClose",function(e,t){var n=ee.a.copy(e);return n&&(i.setState({copied:!0}),setTimeout(function(){return t()},3e3)),n}),i}return K()(t,e),J()(t,[{key:"render",value:function e(){var t=this;return r.createElement(N,{iconName:"link",size:this.props.size,localizedText:this.state.copied?r.createElement(p.a,{id:"link_share_link_copied"}):r.createElement(p.a,{id:"link_share_option_clipboard"}),onClickFunction:this.state.copied?void 0:function(){return t.copyAndClose(t.props.url,t.props.close)}})}}]),t}(r.Component),ie=function e(t){var i=t.url,n=t.itemType,a=t.itemId,l=t.headerComponent,s=t.close,c=Object(r.useContext)(k.Device).viewportCategory;return o.a.createElement("div",{className:"_2qNMBNc2"},l,"MOBILE"===c&&o.a.createElement(b,{action:"share_select",itemType:n,itemId:a,url:i,type:"sms"},function(e){return o.a.createElement(E,{url:e,itemType:n,size:"small"})}),o.a.createElement(b,{url:i,itemType:n,itemId:a,action:"share_select",type:"email"},function(e){return o.a.createElement(q,{url:e,itemType:n,itemId:Number(a),size:"small"})}),o.a.createElement(b,{action:"share_select",itemType:n,itemId:a,url:i,type:"clipboard"},function(e){return o.a.createElement(te,{url:e,size:"small",close:s})}))},ne=function e(t){var i=t.fixed,n=t.url,a=t.itemType,r=t.itemId,l=t.shiftX,s=t.shiftY,c=t.children,d=t.headerComponent,m=t.alignEdge,u=t.above;return o.a.createElement(y.a,{local:!0,closeButton:!1,fixed:i,above:u,below:!0,alignEdge:m,shiftX:l,shiftY:s,shiftArrow:l,arrowType:"small",contents:function e(t){return o.a.createElement(ie,{url:n,itemType:a,itemId:r,headerComponent:d,close:t})}},c)};ne.defaultProps={fixed:!1,shiftX:0,shiftY:0,headerComponent:null,alignEdge:"right"};var ae=ne,re=function e(t){var i=t.url,n=t.itemType,a=t.itemId,r=t.styleAsSocialAction,l=t.darkMode,s=t.headerComponent,c=t.onClick,d=t.alignEdge,m=t.above,u=t.shiftX,p=t.shiftY,v=t.hideText;return o.a.createElement(o.a.Fragment,null,o.a.createElement(ae,{url:i,itemType:n,itemId:a,shiftX:u,shiftY:p,headerComponent:s,alignEdge:d,above:m},function(e,t){return o.a.createElement(b,{itemType:n,itemId:a,url:i,action:"share_button_click"},function(){return o.a.createElement(oe,{onClick:function e(i){c&&c(i),t()},target:e,styleAsSocialAction:r,darkMode:l,hideText:v})})}))};re.defaultProps={styleAsSocialAction:!1,headerComponent:null,onClick:void 0,above:!1,shiftX:6,shiftY:4,darkMode:!1};var oe=function e(t){var i,n=t.onClick,r=t.target,l=t.styleAsSocialAction,d=t.hideText,u=t.darkMode;return o.a.createElement("div",{onClick:n,className:s()(l?"_3RO180pc":"_3Qn6d96f",(i={},a()(i,"_1UeKc9Q0",!u&&Object(c.featureIsEnabled)("hr_dark_green_icons")),a()(i,"_2eOtnbZe",!u&&Object(c.featureIsEnabled)("cx_brand_refresh_degreen")),i))},o.a.createElement("span",{ref:r},o.a.createElement("span",{className:"_1-taKoBl"},o.a.createElement(m.a,{name:"share",color:"inherit"})),!d&&o.a.createElement("span",{className:"_2_4z5Nd6"},o.a.createElement(p.a,{id:"link_share_share"})," ")))};oe.defaultProps={styleAsSocialAction:!1,darkMode:!1};var le=re;i.d(t,"default",function(){return le})}}});
//# sourceMappingURL=social.share-cta.3e23853b69.js.map