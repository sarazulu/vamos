($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/social.login-gate",d:["vendor-babel","vendor-react-libs","vendor-urql","lithium-platform","@ta/login.login","@ta/platform.interactions"],e:["./packages/social/login-gate/index.jsx"],m:{"./packages/social/login-gate/index.jsx":function(e,n,t){"use strict";t.r(n);var o=t("@babel/runtime/helpers/esm/slicedToArray"),i=t.n(o),r=t("react"),a=t("urql"),c=t("@ta/lithium.portals"),s=t("@ta/login.login"),l=t.n(s),u=t("@ta/platform.import"),f=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"TermsOfUse"},"variableDefinitions":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"getTermOfUseAcceptanceInfo"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"accepted"},"arguments":[],"directives":[]}]}}]}}],"loc":{"start":0,"end":77}}');f.__key=0xd3ed4f0faa9c,f.loc.source={body:"d3ed4f0faa9c"};var d,m=f,g=u.component.onUsage(((d=function e(){return t.e("@ta/social.terms-of-use-gate")}).__PACKAGE__="@ta/social.login-gate",d.__MODULE_ID__="@ta/social.terms-of-use-gate",d.__MODULE_NAME__="@ta/social.terms-of-use-gate",d.__BUNDLE_NAME__="@ta/social.terms-of-use-gate",d.__GET_SYNC__=function(){return t.m["@ta/social.terms-of-use-gate"]?t("@ta/social.terms-of-use-gate"):null},d.__IS_LOADED__=function(){return void 0!==t.m["@ta/social.terms-of-use-gate"]},d),"default"),_=["SAVES_COMBINED"],p=function e(n){var t=r.useRef(void 0),o=l()(),s=r.useCallback(function(){if(t.current){var e=t.current;t.current=null,e()}},[]),u=Object(c.useVDOMPortal)(function(e){var n=e.close;return r.createElement(g,{onComplete:function e(){n(),s()},forceTermsOfUse:!0,onClose:function e(){n(),t.current=null}})}),f=u.open,d=u.isOpen,p=Object(a.useQuery)({query:m,pause:!0}),v=i()(p,2),O=v[0],E=v[1];return r.useEffect(function(){var e,n;O.fetching||!t.current||d||((null===(e=O.data)||void 0===e?void 0:null===(n=e.getTermOfUseAcceptanceInfo)||void 0===n?void 0:n.accepted)?s():f())},[d,f,s,O]),r.useCallback(function(){return o(n).then(function(){return n.flow&&_.includes(n.flow)?Promise.resolve():new Promise(function(e){t.current=e,E()})})},[n,o,E])},v=t("@ta/lithium.context"),O=function e(n){var t=r.useContext(v.Visitor).userId,o=p({pid:n.pid,flow:n.flow,flowOrigin:n.flowOrigin,forceLogin:n.forceLogin,extraQueryParams:n.extraRegParams,onLogin:n.onLoginStarted,onSuccess:n.onLoginSuccess,onClose:n.onClose});return n.children(o,t||"")},E=t("@ta/platform.interactions"),k=function e(n){var t=n.pid,o=n.isControl,i=n.trackingModule,a=Object(E.useGARecorder)();r.useEffect(function(){a({module:i,action:"member_gate_mounted"})},[i,a]);var c=l()();return r.useEffect(function(){o||c({pid:t,flowOrigin:"join",flow:"MEMBER_GATE_COMBINED",closeX:!1,closeOnDocClick:!1,windowShadeOption:"light"})},[c,t,o]),null};k.defaultProps={pid:-1,trackingModule:"memx_hard_gate",isControl:!1};var S=k;t.d(n,"useSocialLoginGate",function(){return p}),t.d(n,"SocialLoginGate",function(){return O}),t.d(n,"MemberHardGate",function(){return S})}}});
//# sourceMappingURL=social.login-gate.8b99f97c7f.js.map